!function(){var _promiseFactory,_httpRequest;function DefaultHttpRequest(){this.getJSON=function(t,n){return _promiseFactory.create(function(e,r){try{var i=new XMLHttpRequest;i.open("GET",t),i.responseType="json",n&&n.headers&&function(t,e){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i],o=e[n];t.setRequestHeader(n,o)}}(i,n.headers),i.onload=function(){try{if(200===i.status){var t=i.response;"string"==typeof t&&(t=JSON.parse(t)),e(t)}else r(Error(i.statusText+"("+i.status+")"))}catch(t){r(t)}},i.onerror=function(){r(Error("Network error"))},i.send()}catch(t){return r(t)}})}}function DefaultPromise(r){this.then=function(t,e){return new DefaultPromise(r.then(t,e))},this.catch=function(t){return new DefaultPromise(r.catch(t))}}function DefaultPromiseFactory(){this.resolve=function(t){return new DefaultPromise(Promise.resolve(t))},this.reject=function(t){return new DefaultPromise(Promise.reject(t))},this.create=function(t){return new DefaultPromise(new Promise(t))}}_httpRequest=new DefaultHttpRequest,_promiseFactory=new DefaultPromiseFactory,function(){var _promiseFactory,_httpRequest,CryptoJS=CryptoJS||(z=Math,B={},C=B.lib={},D=C.Base=function(){function r(){}return{extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),E=C.WordArray=D.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||G).stringify(this)},concat:function(t){var e=this.words,r=t.words,i=this.sigBytes,n=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=s<<24-(i+o)%4*8}else if(65535<r.length)for(o=0;o<n;o+=4)e[i+o>>>2]=r[o>>>2];else e.push.apply(e,r);return this.sigBytes+=n,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=z.ceil(e/4)},clone:function(){var t=D.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(4294967296*z.random()|0);return new E.init(e,t)}}),F=B.enc={},G=F.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var o=e[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i+=2)r[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new E.init(r,e/2)}},H=F.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],n=0;n<r;n++){var o=e[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new E.init(r,e)}},I=F.Utf8={stringify:function(t){try{return decodeURIComponent(escape(H.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return H.parse(unescape(encodeURIComponent(t)))}},J=C.BufferedBlockAlgorithm=D.extend({reset:function(){this._data=new E.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=I.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,r=e.words,i=e.sigBytes,n=this.blockSize,o=i/(4*n),s=(o=t?z.ceil(o):z.max((0|o)-this._minBufferSize,0))*n,a=z.min(4*s,i);if(s){for(var h=0;h<s;h+=n)this._doProcessBlock(r,h);var u=r.splice(0,s);e.sigBytes-=a}return new E.init(u,a)},clone:function(){var t=D.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),C.Hasher=J.extend({cfg:D.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){J.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(t,e){return new r.init(e).finalize(t)}},_createHmacHelper:function(r){return function(t,e){return new L.HMAC.init(r,e).finalize(t)}}}),L=B.algo={},B),z,B,C,D,E,F,G,H,I,J,L,$a,_a,ab,bb,cb,db,eb,nc,oc,pc,qc,rc;$a=CryptoJS,_a=$a.lib,ab=_a.WordArray,bb=_a.Hasher,cb=$a.algo,db=[],eb=cb.SHA1=bb.extend({_doReset:function(){this._hash=new ab.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],s=r[3],a=r[4],h=0;h<80;h++){if(h<16)db[h]=0|t[e+h];else{var u=db[h-3]^db[h-8]^db[h-14]^db[h-16];db[h]=u<<1|u>>>31}var c=(i<<5|i>>>27)+a+db[h];c+=h<20?1518500249+(n&o|~n&s):h<40?1859775393+(n^o^s):h<60?(n&o|n&s|o&s)-1894007588:(n^o^s)-899497514,a=s,s=o,o=n<<30|n>>>2,n=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=Math.floor(r/4294967296),e[15+(64+i>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=bb.clone.call(this);return t._hash=this._hash.clone(),t}}),$a.SHA1=bb._createHelper(eb),$a.HmacSHA1=bb._createHmacHelper(eb),function(n){var t=CryptoJS,e=t.lib,r=e.WordArray,i=e.Hasher,o=t.algo,s=[],b=[];!function(){function t(t){for(var e=n.sqrt(t),r=2;r<=e;r++)if(!(t%r))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=e(n.pow(r,.5))),b[i]=e(n.pow(r,1/3)),i++),r++}();var m=[],a=o.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],s=r[3],a=r[4],h=r[5],u=r[6],c=r[7],p=0;p<64;p++){if(p<16)m[p]=0|t[e+p];else{var g=m[p-15],l=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,f=m[p-2],d=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;m[p]=l+m[p-7]+d+m[p-16]}var y=i&n^i&o^n&o,S=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),v=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&h^~a&u)+b[p]+m[p];c=u,u=h,h=a,a=s+v|0,s=o,o=n,n=i,i=v+(S+y)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+h|0,r[6]=r[6]+u|0,r[7]=r[7]+c|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(64+i>>>9<<4)]=n.floor(r/4294967296),e[15+(64+i>>>9<<4)]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA256=i._createHelper(a),t.HmacSHA256=i._createHmacHelper(a)}(Math),nc=CryptoJS,oc=nc.lib,pc=oc.Base,qc=oc.WordArray,rc=nc.x64={},rc.Word=pc.extend({init:function(t,e){this.high=t,this.low=e}}),rc.WordArray=pc.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],i=0;i<e;i++){var n=t[i];r.push(n.high),r.push(n.low)}return qc.create(r,this.sigBytes)},clone:function(){for(var t=pc.clone.call(this),e=t.words=this.words.slice(0),r=e.length,i=0;i<r;i++)e[i]=e[i].clone();return t}}),function(){var t=CryptoJS,e=t.lib.Hasher,r=t.x64,i=r.Word,n=r.WordArray,o=t.algo;function s(){return i.create.apply(i,arguments)}var wt=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],xt=[];!function(){for(var t=0;t<80;t++)xt[t]=s()}();var a=o.SHA512=e.extend({_doReset:function(){this._hash=new n.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],s=r[3],a=r[4],h=r[5],u=r[6],c=r[7],p=i.high,g=i.low,l=n.high,f=n.low,d=o.high,y=o.low,S=s.high,v=s.low,b=a.high,m=a.low,_=h.high,A=h.low,w=u.high,x=u.low,R=c.high,T=c.low,H=p,I=g,B=l,E=f,P=d,O=y,k=S,C=v,N=b,D=m,j=_,M=A,J=w,K=x,U=R,F=T,L=0;L<80;L++){var W=xt[L];if(L<16)var X=W.high=0|t[e+2*L],V=W.low=0|t[e+2*L+1];else{var q=xt[L-15],z=q.high,G=q.low,Z=(z>>>1|G<<31)^(z>>>8|G<<24)^z>>>7,$=(G>>>1|z<<31)^(G>>>8|z<<24)^(G>>>7|z<<25),Y=xt[L-2],Q=Y.high,tt=Y.low,et=(Q>>>19|tt<<13)^(Q<<3|tt>>>29)^Q>>>6,rt=(tt>>>19|Q<<13)^(tt<<3|Q>>>29)^(tt>>>6|Q<<26),it=xt[L-7],nt=it.high,ot=it.low,st=xt[L-16],at=st.high,ht=st.low;X=(X=(X=Z+nt+((V=$+ot)>>>0<$>>>0?1:0))+et+((V=V+rt)>>>0<rt>>>0?1:0))+at+((V=V+ht)>>>0<ht>>>0?1:0);W.high=X,W.low=V}var ut,ct=N&j^~N&J,pt=D&M^~D&K,gt=H&B^H&P^B&P,lt=I&E^I&O^E&O,ft=(H>>>28|I<<4)^(H<<30|I>>>2)^(H<<25|I>>>7),dt=(I>>>28|H<<4)^(I<<30|H>>>2)^(I<<25|H>>>7),yt=(N>>>14|D<<18)^(N>>>18|D<<14)^(N<<23|D>>>9),St=(D>>>14|N<<18)^(D>>>18|N<<14)^(D<<23|N>>>9),vt=wt[L],bt=vt.high,mt=vt.low,_t=U+yt+((ut=F+St)>>>0<F>>>0?1:0),At=dt+lt;U=J,F=K,J=j,K=M,j=N,M=D,N=k+(_t=(_t=(_t=_t+ct+((ut=ut+pt)>>>0<pt>>>0?1:0))+bt+((ut=ut+mt)>>>0<mt>>>0?1:0))+X+((ut=ut+V)>>>0<V>>>0?1:0))+((D=C+ut|0)>>>0<C>>>0?1:0)|0,k=P,C=O,P=B,O=E,B=H,E=I,H=_t+(ft+gt+(At>>>0<dt>>>0?1:0))+((I=ut+At|0)>>>0<ut>>>0?1:0)|0}g=i.low=g+I,i.high=p+H+(g>>>0<I>>>0?1:0),f=n.low=f+E,n.high=l+B+(f>>>0<E>>>0?1:0),y=o.low=y+O,o.high=d+P+(y>>>0<O>>>0?1:0),v=s.low=v+C,s.high=S+k+(v>>>0<C>>>0?1:0),m=a.low=m+D,a.high=b+N+(m>>>0<D>>>0?1:0),A=h.low=A+M,h.high=_+j+(A>>>0<M>>>0?1:0),x=u.low=x+K,u.high=w+J+(x>>>0<K>>>0?1:0),T=c.low=T+F,c.high=R+U+(T>>>0<F>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(128+i>>>10<<5)]=Math.floor(r/4294967296),e[31+(128+i>>>10<<5)]=r,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(a),t.HmacSHA512=e._createHmacHelper(a)}();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=",dbits;function hex2b64(t){var e,r,i="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),i+=b64map.charAt(r>>6)+b64map.charAt(63&r);if(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),i+=b64map.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),i+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4)),b64pad)for(;0<(3&i.length);)i+=b64pad;return i}function b64tohex(t){var e,r,i,n="",o=0;for(e=0;e<t.length&&t.charAt(e)!=b64pad;++e)(i=b64map.indexOf(t.charAt(e)))<0||(o=0==o?(n+=int2char(i>>2),r=3&i,1):1==o?(n+=int2char(r<<2|i>>4),r=15&i,2):2==o?(n+=int2char(r),n+=int2char(i>>2),r=3&i,3):(n+=int2char(r<<2|i>>4),n+=int2char(15&i),0));return 1==o&&(n+=int2char(r<<2)),n}function b64toBA(t){var e,r=b64tohex(t),i=new Array;for(e=0;2*e<r.length;++e)i[e]=parseInt(r.substring(2*e,2*e+2),16);return i}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,r,i,n,o){for(;0<=--o;){var s=e*this[t++]+r[i]+n;n=Math.floor(s/67108864),r[i++]=67108863&s}return n}function am2(t,e,r,i,n,o){for(var s=32767&e,a=e>>15;0<=--o;){var h=32767&this[t],u=this[t++]>>15,c=a*h+u*s;n=((h=s*h+((32767&c)<<15)+r[i]+(1073741823&n))>>>30)+(c>>>15)+a*u+(n>>>30),r[i++]=1073741823&h}return n}function am3(t,e,r,i,n,o){for(var s=16383&e,a=e>>14;0<=--o;){var h=16383&this[t],u=this[t++]>>14,c=a*h+u*s;n=((h=s*h+((16383&c)<<14)+r[i]+n)>>28)+(c>>14)+a*u,r[i++]=268435455&h}return n}dbits=j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,26):(BigInteger.prototype.am=am3,28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var r=BI_RC[t.charCodeAt(e)];return null==r?-1:r}function bnpCopyTo(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,n=!1,o=0;0<=--i;){var s=8==r?255&t[i]:intAt(t,i);s<0?"-"==t.charAt(i)&&(n=!0):(n=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,0<o&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,i=(1<<e)-1,n=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(0<s--)for(a<this.DB&&0<(r=this[s]>>a)&&(n=!0,o=int2char(r));0<=s;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&i,a<=0&&(a+=this.DB,--s)),0<r&&(n=!0),n&&(o+=int2char(r));return n?o:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;0<=--r;)if(0!=(e=this[r]-t[r]))return e;return 0}function nbits(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var r;for(r=this.t-1;0<=r;--r)e[r+t]=this[r];for(r=t-1;0<=r;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var r,i=t%this.DB,n=this.DB-i,o=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;0<=r;--r)e[r+s+1]=this[r]>>n|a,a=(this[r]&o)<<i;for(r=s-1;0<=r;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var i=t%this.DB,n=this.DB-i,o=(1<<i)-1;e[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<n,e[s-r]=this[s]>>i;0<i&&(e[this.t-r-1]|=(this.s&o)<<n),e.t=this.t-r,e.clamp()}}function bnpSubTo(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this[r]-t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t[r],e[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[r++]=this.DV+i:0<i&&(e[r++]=i),e.t=r,e.clamp()}function bnpMultiplyTo(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;0<=--n;)e[n]=0;for(n=0;n<i.t;++n)e[n+r.t]=r.am(0,i[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),r=t.t=2*e.t;0<=--r;)t[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var o=nbi(),s=this.s,a=t.s,h=this.DB-nbits(i[i.t-1]);0<h?(i.lShiftTo(h,o),n.lShiftTo(h,r)):(i.copyTo(o),n.copyTo(r));var u=o.t,c=o[u-1];if(0!=c){var p=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),g=this.FV/p,l=(1<<this.F1)/p,f=1<<this.F2,d=r.t,y=d-u,S=null==e?nbi():e;for(o.dlShiftTo(y,S),0<=r.compareTo(S)&&(r[r.t++]=1,r.subTo(S,r)),BigInteger.ONE.dlShiftTo(u,S),S.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--y;){var v=r[--d]==c?this.DM:Math.floor(r[d]*g+(r[d-1]+f)*l);if((r[d]+=o.am(0,v,r,y,0,u))<v)for(o.dlShiftTo(y,S),r.subTo(S,r);r[d]<--v;)r.subTo(S,r)}null!=e&&(r.drShiftTo(u,e),s!=a&&BigInteger.ZERO.subTo(e,e)),r.t=u,r.clamp(),0<h&&r.rShiftTo(h,r),s<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&0<e.compareTo(BigInteger.ZERO)&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&0<e.compareTo(BigInteger.ZERO)&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],i=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,i,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(t,e){if(4294967295<t||t<1)return BigInteger.ONE;var r=nbi(),i=nbi(),n=e.convert(this),o=nbits(t)-1;for(n.copyTo(r);0<=--o;)if(e.sqrTo(r,i),0<(t&1<<o))e.mulTo(i,n,r);else{var s=r;r=i,i=s}return e.revert(r)}function bnModPowInt(t,e){var r;return r=t<256||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,r)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=nbv(r),n=nbi(),o=nbi(),s="";for(this.divRemTo(i,n,o);0<n.signum();)s=(r+o.intValue()).toString(t).substr(1)+s,n.divRemTo(i,n,o);return o.intValue().toString(t)+s}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,o=0,s=0,a=0;a<t.length;++a){var h=intAt(t,a);h<0?"-"==t.charAt(a)&&0==this.signum()&&(n=!0):(s=e*s+h,++o>=r&&(this.dMultiply(i),this.dAddOffset(s,0),s=o=0))}0<o&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),n&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var i=new Array,n=7&t;i.length=1+(t>>3),e.nextBytes(i),0<n?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var r,i=this.DB-t*this.DB%8,n=0;if(0<t--)for(i<this.DB&&(r=this[t]>>i)!=(this.s&this.DM)>>i&&(e[n++]=r|this.s<<this.DB-i);0<=t;)i<8?(r=(this[t]&(1<<i)-1)<<8-i,r|=this[--t]>>(i+=this.DB-8)):(r=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(0<n||r!=this.s)&&(e[n++]=r);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return 0<this.compareTo(t)?this:t}function bnpBitwiseTo(t,e,r){var i,n,o=Math.min(t.t,this.t);for(i=0;i<o;++i)r[i]=e(this[i],t[i]);if(t.t<this.t){for(n=t.s&this.DM,i=o;i<this.t;++i)r[i]=e(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=o;i<t.t;++i)r[i]=e(n,t[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=cbit(this[r]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var r=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this[r]+t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t[r],e[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,0<i?e[r++]=i:i<-1&&(e[r++]=this.DV+i),e.t=r,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),r=nbi();return this.divRemTo(t,e,r),new Array(e,r)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,r){t.multiplyTo(e,r)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,r){var i,n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;0<n;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()}function bnpMultiplyUpperTo(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;0<=--i;)r[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r[this.t+i-e]=this.am(e-i,t[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function bnModPow(t,e){var r,i,n=t.bitLength(),o=nbv(1);if(n<=0)return o;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var s=new Array,a=3,h=r-1,u=(1<<r)-1;if(s[1]=i.convert(this),1<r){var c=nbi();for(i.sqrTo(s[1],c);a<=u;)s[a]=nbi(),i.mulTo(c,s[a-2],s[a]),a+=2}var p,g,l=t.t-1,f=!0,d=nbi();for(n=nbits(t[l])-1;0<=l;){for(h<=n?p=t[l]>>n-h&u:(p=(t[l]&(1<<n+1)-1)<<h-n,0<l&&(p|=t[l-1]>>this.DB+n-h)),a=r;0==(1&p);)p>>=1,--a;if((n-=a)<0&&(n+=this.DB,--l),f)s[p].copyTo(o),f=!1;else{for(;1<a;)i.sqrTo(o,d),i.sqrTo(d,o),a-=2;0<a?i.sqrTo(o,d):(g=o,o=d,d=g),i.mulTo(d,s[p],o)}for(;0<=l&&0==(t[l]&1<<n);)i.sqrTo(o,d),g=o,o=d,d=g,--n<0&&(n=this.DB-1,--l)}return i.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(n<o&&(o=n),0<o&&(e.rShiftTo(o,e),r.rShiftTo(o,r));0<e.signum();)0<(n=e.getLowestSetBit())&&e.rShiftTo(n,e),0<(n=r.getLowestSetBit())&&r.rShiftTo(n,r),0<=e.compareTo(r)?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return 0<o&&r.lShiftTo(o,r),r}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(0<this.t)if(0==e)r=this[0]%t;else for(var i=this.t-1;0<=i;--i)r=(e*r+this[i])%t;return r}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var r=t.clone(),i=this.clone(),n=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);0<=r.compareTo(i)?(r.subTo(i,r),e&&n.subTo(s,n),o.subTo(a,o)):(i.subTo(r,i),e&&s.subTo(n,s),a.subTo(o,a))}return 0!=i.compareTo(BigInteger.ONE)?BigInteger.ZERO:0<=a.compareTo(t)?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,r=this.abs();if(1==r.t&&r[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(r[0]==lowprimes[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<lowprimes.length;){for(var i=lowprimes[e],n=e+1;n<lowprimes.length&&i<lplim;)i*=lowprimes[n++];for(i=r.modInt(i);e<n;)if(i%lowprimes[e++]==0)return!1}return r.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var i=e.shiftRight(r);(t=t+1>>1)>lowprimes.length&&(t=lowprimes.length);for(var n=nbi(),o=0;o<t;++o){n.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var s=n.modPow(i,this);if(0!=s.compareTo(BigInteger.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<r&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0}function parseBigInt(t,e){return new BigInteger(t,e)}function linebrk(t,e){for(var r="",i=0;i+e<t.length;)r+=t.substring(i,i+e)+"\n",i+=e;return r+t.substring(i,t.length)}function byte2Hex(t){return t<16?"0"+t.toString(16):t.toString(16)}function pkcs1pad2(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var r=new Array,i=t.length-1;0<=i&&0<e;){var n=t.charCodeAt(i--);n<128?r[--e]=n:127<n&&n<2048?(r[--e]=63&n|128,r[--e]=n>>6|192):(r[--e]=63&n|128,r[--e]=n>>6&63|128,r[--e]=n>>12|224)}r[--e]=0;for(var o=new SecureRandom,s=new Array;2<e;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--e]=s[0]}return r[--e]=2,r[--e]=0,new BigInteger(r)}function oaep_mgf1_arr(t,e,r){for(var i="",n=0;i.length<e;)i+=r(String.fromCharCode.apply(String,t.concat([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n]))),n+=1;return i}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare;var SHA1_SIZE=20;function oaep_pad(t,e,r){if(t.length+2*SHA1_SIZE+2>e)throw"Message too long for RSA";var i,n="";for(i=0;i<e-t.length-2*SHA1_SIZE-2;i+=1)n+="\0";var o=rstr_sha1("")+n+""+t,s=new Array(SHA1_SIZE);(new SecureRandom).nextBytes(s);var a=oaep_mgf1_arr(s,o.length,r||rstr_sha1),h=[];for(i=0;i<o.length;i+=1)h[i]=o.charCodeAt(i)^a.charCodeAt(i);var u=oaep_mgf1_arr(h,s.length,rstr_sha1),c=[0];for(i=0;i<s.length;i+=1)c[i+1]=s[i]^u.charCodeAt(i);return new BigInteger(c.concat(h))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(t,e){this.isPublic=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&0<t.length&&0<e.length?(this.n=parseBigInt(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function RSADoPublic(t){return t.modPowInt(this.e,this.n)}function RSAEncrypt(t){var e=pkcs1pad2(t,this.n.bitLength()+7>>3);if(null==e)return null;var r=this.doPublic(e);if(null==r)return null;var i=r.toString(16);return 0==(1&i.length)?i:"0"+i}function RSAEncryptOAEP(t,e){var r=oaep_pad(t,this.n.bitLength()+7>>3,e);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function pkcs1unpad2(t,e){for(var r=t.toByteArray(),i=0;i<r.length&&0==r[i];)++i;if(r.length-i!=e-1||2!=r[i])return null;for(++i;0!=r[i];)if(++i>=r.length)return null;for(var n="";++i<r.length;){var o=255&r[i];o<128?n+=String.fromCharCode(o):191<o&&o<224?(n+=String.fromCharCode((31&o)<<6|63&r[i+1]),++i):(n+=String.fromCharCode((15&o)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return n}function oaep_mgf1_str(t,e,r){for(var i="",n=0;i.length<e;)i+=r(t+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])),n+=1;return i}RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA";var SHA1_SIZE=20;function oaep_unpad(t,e,r){for(t=t.toByteArray(),i=0;i<t.length;i+=1)t[i]&=255;for(;t.length<e;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*SHA1_SIZE+2)throw"Cipher too short";var i,n=t.substr(1,SHA1_SIZE),o=t.substr(SHA1_SIZE+1),s=oaep_mgf1_str(o,SHA1_SIZE,r||rstr_sha1),a=[];for(i=0;i<n.length;i+=1)a[i]=n.charCodeAt(i)^s.charCodeAt(i);var h=oaep_mgf1_str(String.fromCharCode.apply(String,a),t.length-SHA1_SIZE,rstr_sha1),u=[];for(i=0;i<o.length;i+=1)u[i]=o.charCodeAt(i)^h.charCodeAt(i);if((u=String.fromCharCode.apply(String,u)).substr(0,SHA1_SIZE)!==rstr_sha1(""))throw"Hash mismatch";var c=(u=u.substr(SHA1_SIZE)).indexOf("");if((-1!=c?u.substr(0,c).lastIndexOf("\0"):-1)+1!=c)throw"Malformed data";return u.substr(c+1)}function RSASetPrivate(t,e,r){this.isPrivate=!0,"string"!=typeof t?(this.n=t,this.e=e,this.d=r):null!=t&&null!=e&&0<t.length&&0<e.length?(this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(r,16)):alert("Invalid RSA private key")}function RSASetPrivateEx(t,e,r,i,n,o,s,a){if(this.isPrivate=!0,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";null!=t&&null!=e&&0<t.length&&0<e.length?(this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(r,16),this.p=parseBigInt(i,16),this.q=parseBigInt(n,16),this.dmp1=parseBigInt(o,16),this.dmq1=parseBigInt(s,16),this.coeff=parseBigInt(a,16)):alert("Invalid RSA private key in RSASetPrivateEx")}function RSAGenerate(t,e){var r=new SecureRandom,i=t>>1;this.e=parseInt(e,16);for(var n=new BigInteger(e,16);;){for(;this.p=new BigInteger(t-i,1,r),0!=this.p.subtract(BigInteger.ONE).gcd(n).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(i,1,r),0!=this.q.subtract(BigInteger.ONE).gcd(n).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var s=this.p.subtract(BigInteger.ONE),a=this.q.subtract(BigInteger.ONE),h=s.multiply(a);if(0==h.gcd(n).compareTo(BigInteger.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(h),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function RSADoPrivate(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}function RSADecrypt(t){var e=parseBigInt(t,16),r=this.doPrivate(e);return null==r?null:pkcs1unpad2(r,this.n.bitLength()+7>>3)}function RSADecryptOAEP(t,e){var r=parseBigInt(t,16),i=this.doPrivate(r);return null==i?null:oaep_unpad(i,this.n.bitLength()+7>>3,e)}function _rsapem_pemToBase64(t){var e=t;return e=(e=(e=e.replace("-----BEGIN RSA PRIVATE KEY-----","")).replace("-----END RSA PRIVATE KEY-----","")).replace(/[ \n]+/g,"")}function _rsapem_getPosArrayOfChildrenFromHex(t){var e=new Array,r=ASN1HEX.getStartPosOfV_AtObj(t,0),i=ASN1HEX.getPosOfNextSibling_AtObj(t,r),n=ASN1HEX.getPosOfNextSibling_AtObj(t,i),o=ASN1HEX.getPosOfNextSibling_AtObj(t,n),s=ASN1HEX.getPosOfNextSibling_AtObj(t,o),a=ASN1HEX.getPosOfNextSibling_AtObj(t,s),h=ASN1HEX.getPosOfNextSibling_AtObj(t,a),u=ASN1HEX.getPosOfNextSibling_AtObj(t,h),c=ASN1HEX.getPosOfNextSibling_AtObj(t,u);return e.push(r,i,n,o,s,a,h,u,c),e}function _rsapem_getHexValueArrayOfChildrenFromHex(t){var e=_rsapem_getPosArrayOfChildrenFromHex(t),r=ASN1HEX.getHexOfV_AtObj(t,e[0]),i=ASN1HEX.getHexOfV_AtObj(t,e[1]),n=ASN1HEX.getHexOfV_AtObj(t,e[2]),o=ASN1HEX.getHexOfV_AtObj(t,e[3]),s=ASN1HEX.getHexOfV_AtObj(t,e[4]),a=ASN1HEX.getHexOfV_AtObj(t,e[5]),h=ASN1HEX.getHexOfV_AtObj(t,e[6]),u=ASN1HEX.getHexOfV_AtObj(t,e[7]),c=ASN1HEX.getHexOfV_AtObj(t,e[8]),p=new Array;return p.push(r,i,n,o,s,a,h,u,c),p}function _rsapem_readPrivateKeyFromASN1HexString(t){var e=_rsapem_getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function _rsapem_readPrivateKeyFromPEMString(t){var e=_rsapem_getHexValueArrayOfChildrenFromHex(b64tohex(_rsapem_pemToBase64(t)));this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP,RSAKey.prototype.readPrivateKeyFromPEMString=_rsapem_readPrivateKeyFromPEMString,RSAKey.prototype.readPrivateKeyFromASN1HexString=_rsapem_readPrivateKeyFromASN1HexString;var _RE_HEXDECONLY=new RegExp("");function _rsasign_getHexPaddedDigestInfoForString(t,e,r){var i,n=(i=t,KJUR.crypto.Util.hashString(i,r));return KJUR.crypto.Util.getPaddedDigestInfoHex(n,r,e)}function _zeroPaddingOfSignature(t,e){for(var r="",i=e/4-t.length,n=0;n<i;n++)r+="0";return r+t}function _rsasign_signString(t,e){var r,i=(r=t,KJUR.crypto.Util.hashString(r,e));return this.signWithMessageHash(i,e)}function _rsasign_signWithMessageHash(t,e){var r=parseBigInt(KJUR.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return _zeroPaddingOfSignature(this.doPrivate(r).toString(16),this.n.bitLength())}function _rsasign_signStringWithSHA1(t){return _rsasign_signString.call(this,t,"sha1")}function _rsasign_signStringWithSHA256(t){return _rsasign_signString.call(this,t,"sha256")}function pss_mgf1_str(t,e,r){for(var i="",n=0;i.length<e;)i+=hextorstr(r(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n])))),n+=1;return i}function _rsasign_signStringPSS(t,e,r){var i,n=(i=rstrtohex(t),KJUR.crypto.Util.hashHex(i,e));return void 0===r&&(r=-1),this.signWithMessageHashPSS(n,e,r)}function _rsasign_signWithMessageHashPSS(t,e,r){var i,n=hextorstr(t),o=n.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),h=function(t){return KJUR.crypto.Util.hashHex(t,e)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw"invalid salt length";if(a<o+r+2)throw"data too long";var u="";0<r&&(u=new Array(r),(new SecureRandom).nextBytes(u),u=String.fromCharCode.apply(String,u));var c=hextorstr(h(rstrtohex("\0\0\0\0\0\0\0\0"+n+u))),p=[];for(i=0;i<a-r-o-2;i+=1)p[i]=0;var g=String.fromCharCode.apply(String,p)+""+u,l=pss_mgf1_str(c,g.length,h),f=[];for(i=0;i<g.length;i+=1)f[i]=g.charCodeAt(i)^l.charCodeAt(i);var d=65280>>8*a-s&255;for(f[0]&=~d,i=0;i<o;i++)f.push(c.charCodeAt(i));return f.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(f)).toString(16),this.n.bitLength())}function _rsasign_getDecryptSignatureBI(t,e,r){var i=new RSAKey;return i.setPublic(e,r),i.doPublic(t)}function _rsasign_getHexDigestInfoFromSig(t,e,r){return _rsasign_getDecryptSignatureBI(t,e,r).toString(16).replace(/^1f+00/,"")}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(t){for(var e in KJUR.crypto.Util.DIGESTINFOHEAD){var r=KJUR.crypto.Util.DIGESTINFOHEAD[e],i=r.length;if(t.substring(0,i)==r)return[e,t.substring(i)]}return[]}function _rsasign_verifySignatureWithArgs(t,e,r,i){var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(_rsasign_getHexDigestInfoFromSig(e,r,i));if(0==n.length)return!1;var o,s=n[0];return n[1]==(o=t,KJUR.crypto.Util.hashString(o,s))}function _rsasign_verifyHexSignatureForMessage(t,e){return _rsasign_verifySignatureWithArgs(e,parseBigInt(t,16),this.n.toString(16),this.e.toString(16))}function _rsasign_verifyString(t,e){var r=parseBigInt(e=(e=e.replace(_RE_HEXDECONLY,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var i=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==i.length)return!1;var n,o=i[0];return i[1]==(n=t,KJUR.crypto.Util.hashString(n,o))}function _rsasign_verifyWithMessageHash(t,e){var r=parseBigInt(e=(e=e.replace(_RE_HEXDECONLY,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var i=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==i.length)return!1;i[0];return i[1]==t}function _rsasign_verifyStringPSS(t,e,r,i){var n,o=(n=rstrtohex(t),KJUR.crypto.Util.hashHex(n,r));return void 0===i&&(i=-1),this.verifyWithMessageHashPSS(o,e,r,i)}function _rsasign_verifyWithMessageHashPSS(t,e,r,i){var n=new BigInteger(e,16);if(n.bitLength()>this.n.bitLength())return!1;var o,s=function(t){return KJUR.crypto.Util.hashHex(t,r)},a=hextorstr(t),h=a.length,u=this.n.bitLength()-1,c=Math.ceil(u/8);if(-1===i||void 0===i)i=h;else if(-2===i)i=c-h-2;else if(i<-2)throw"invalid salt length";if(c<h+i+2)throw"data too long";var p=this.doPublic(n).toByteArray();for(o=0;o<p.length;o+=1)p[o]&=255;for(;p.length<c;)p.unshift(0);if(188!==p[c-1])throw"encoded message does not end in 0xbc";var g=(p=String.fromCharCode.apply(String,p)).substr(0,c-h-1),l=p.substr(g.length,h),f=65280>>8*c-u&255;if(0!=(g.charCodeAt(0)&f))throw"bits beyond keysize not zero";var d=pss_mgf1_str(l,g.length,s),y=[];for(o=0;o<g.length;o+=1)y[o]=g.charCodeAt(o)^d.charCodeAt(o);y[0]&=~f;var S=c-h-i-2;for(o=0;o<S;o+=1)if(0!==y[o])throw"leftmost octets not zero";if(1!==y[S])throw"0x01 marker not found";return l===hextorstr(s(rstrtohex("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-i)))))}_RE_HEXDECONLY.compile("[^0-9a-f]","gi"),RSAKey.prototype.signWithMessageHash=_rsasign_signWithMessageHash,RSAKey.prototype.signString=_rsasign_signString,RSAKey.prototype.signStringWithSHA1=_rsasign_signStringWithSHA1,RSAKey.prototype.signStringWithSHA256=_rsasign_signStringWithSHA256,RSAKey.prototype.sign=_rsasign_signString,RSAKey.prototype.signWithSHA1=_rsasign_signStringWithSHA1,RSAKey.prototype.signWithSHA256=_rsasign_signStringWithSHA256,RSAKey.prototype.signWithMessageHashPSS=_rsasign_signWithMessageHashPSS,RSAKey.prototype.signStringPSS=_rsasign_signStringPSS,RSAKey.prototype.signPSS=_rsasign_signStringPSS,RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.prototype.verifyWithMessageHash=_rsasign_verifyWithMessageHash,RSAKey.prototype.verifyString=_rsasign_verifyString,RSAKey.prototype.verifyHexSignatureForMessage=_rsasign_verifyHexSignatureForMessage,RSAKey.prototype.verify=_rsasign_verifyString,RSAKey.prototype.verifyHexSignatureForByteArrayMessage=_rsasign_verifyHexSignatureForMessage,RSAKey.prototype.verifyWithMessageHashPSS=_rsasign_verifyWithMessageHashPSS,RSAKey.prototype.verifyStringPSS=_rsasign_verifyStringPSS,RSAKey.prototype.verifyPSS=_rsasign_verifyStringPSS,RSAKey.SALT_LEN_RECOVER=-2;var ASN1HEX=new function(){this.getByteLengthOfL_AtObj=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var r=parseInt(t.substring(e+3,e+4));return 0==r?-1:0<r&&r<10?r+1:-2},this.getHexOfL_AtObj=function(t,e){var r=this.getByteLengthOfL_AtObj(t,e);return r<1?"":t.substring(e+2,e+2+2*r)},this.getIntOfL_AtObj=function(t,e){var r=this.getHexOfL_AtObj(t,e);return""==r?-1:(parseInt(r.substring(0,1))<8?new BigInteger(r,16):new BigInteger(r.substring(2),16)).intValue()},this.getStartPosOfV_AtObj=function(t,e){var r=this.getByteLengthOfL_AtObj(t,e);return r<0?r:e+2*(r+1)},this.getHexOfV_AtObj=function(t,e){var r=this.getStartPosOfV_AtObj(t,e),i=this.getIntOfL_AtObj(t,e);return t.substring(r,r+2*i)},this.getHexOfTLV_AtObj=function(t,e){return t.substr(e,2)+this.getHexOfL_AtObj(t,e)+this.getHexOfV_AtObj(t,e)},this.getPosOfNextSibling_AtObj=function(t,e){return this.getStartPosOfV_AtObj(t,e)+2*this.getIntOfL_AtObj(t,e)},this.getPosArrayOfChildren_AtObj=function(t,e){var r=new Array,i=this.getStartPosOfV_AtObj(t,e);r.push(i);for(var n=this.getIntOfL_AtObj(t,e),o=i,s=0;;){var a=this.getPosOfNextSibling_AtObj(t,o);if(null==a||2*n<=a-i)break;if(200<=s)break;r.push(a),o=a,s++}return r},this.getNthChildIndex_AtObj=function(t,e,r){return this.getPosArrayOfChildren_AtObj(t,e)[r]},this.getDecendantIndexByNthList=function(t,e,r){if(0==r.length)return e;var i=r.shift(),n=this.getPosArrayOfChildren_AtObj(t,e);return this.getDecendantIndexByNthList(t,n[i],r)},this.getDecendantHexTLVByNthList=function(t,e,r){var i=this.getDecendantIndexByNthList(t,e,r);return this.getHexOfTLV_AtObj(t,i)},this.getDecendantHexVByNthList=function(t,e,r){var i=this.getDecendantIndexByNthList(t,e,r);return this.getHexOfV_AtObj(t,i)}},utf8tob64u,b64utoutf8;function X509(){this.subjectPublicKeyRSA=null,this.subjectPublicKeyRSA_hN=null,this.subjectPublicKeyRSA_hE=null,this.hex=null,this.getSerialNumberHex=function(){return ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,1])},this.getIssuerHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3])},this.getIssuerString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3]))},this.getSubjectHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5])},this.getSubjectString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5]))},this.getNotBefore=function(){var t=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.readCertPEM=function(t){var e=X509.pemToHex(t),r=X509.getPublicKeyHexArrayFromCertHex(e),i=new RSAKey;i.setPublic(r[0],r[1]),this.subjectPublicKeyRSA=i,this.subjectPublicKeyRSA_hN=r[0],this.subjectPublicKeyRSA_hE=r[1],this.hex=e},this.readCertPEMWithoutRSAInit=function(t){var e=X509.pemToHex(t),r=X509.getPublicKeyHexArrayFromCertHex(e);this.subjectPublicKeyRSA.setPublic(r[0],r[1]),this.subjectPublicKeyRSA_hN=r[0],this.subjectPublicKeyRSA_hE=r[1],this.hex=e}}function Base64x(){}function stoBA(t){for(var e=new Array,r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function BAtos(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function BAtohex(t){for(var e="",r=0;r<t.length;r++){var i=t[r].toString(16);1==i.length&&(i="0"+i),e+=i}return e}function stohex(t){return BAtohex(stoBA(t))}function stob64(t){return hex2b64(stohex(t))}function stob64u(t){return b64tob64u(hex2b64(stohex(t)))}function b64utos(t){return BAtos(b64toBA(b64utob64(t)))}function b64tob64u(t){return t=(t=(t=t.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function b64utob64(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=(t=t.replace(/-/g,"+")).replace(/_/g,"/")}function hextob64u(t){return b64tob64u(hex2b64(t))}function b64utohex(t){return b64tohex(b64utob64(t))}function utf8tob64(t){return hex2b64(uricmptohex(encodeURIComponentAll(t)))}function b64toutf8(t){return decodeURIComponent(hextouricmp(b64tohex(t)))}function utf8tohex(t){return uricmptohex(encodeURIComponentAll(t))}function hextoutf8(t){return decodeURIComponent(hextouricmp(t))}function hextorstr(t){for(var e="",r=0;r<t.length-1;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e}function rstrtohex(t){for(var e="",r=0;r<t.length;r++)e+=("0"+t.charCodeAt(r).toString(16)).slice(-2);return e}function hextob64(t){return hex2b64(t)}function hextob64nl(t){var e=hextob64(t).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,"")}function b64nltohex(t){return b64tohex(t.replace(/[^0-9A-Za-z\/+=]*/g,""))}function uricmptohex(t){return t.replace(/%/g,"")}function hextouricmp(t){return t.replace(/(..)/g,"%$1")}function encodeURIComponentAll(t){for(var e=encodeURIComponent(t),r="",i=0;i<e.length;i++)"%"==e[i]?(r+=e.substr(i,3),i+=2):r=r+"%"+stohex(e[i]);return r}function newline_toUnix(t){return t=t.replace(/\r\n/gm,"\n")}function newline_toDos(t){return t=(t=t.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")}ASN1HEX.getVbyList=function(t,e,r,i){var n=this.getDecendantIndexByNthList(t,e,r);if(void 0===n)throw"can't find nthList object";if(void 0!==i&&t.substr(n,2)!=i)throw"checking tag doesn't match: "+t.substr(n,2)+"!="+i;return this.getHexOfV_AtObj(t,n)},ASN1HEX.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},r=[],i=t.substr(0,2),n=parseInt(i,16);r[0]=new String(Math.floor(n/40)),r[1]=new String(n%40);for(var o=t.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var h=[],u="";for(a=0;a<s.length;a++)128&s[a]?u+=e((127&s[a]).toString(2),7):(u+=e((127&s[a]).toString(2),7),h.push(new String(parseInt(u,2))),u="");var c=r.join(".");return 0<h.length&&(c=c+"."+h.join(".")),c},X509.pemToBase64=function(t){var e=t;return e=(e=(e=e.replace("-----BEGIN CERTIFICATE-----","")).replace("-----END CERTIFICATE-----","")).replace(/[ \n]+/g,"")},X509.pemToHex=function(t){return b64tohex(X509.pemToBase64(t))},X509.getSubjectPublicKeyPosFromCertHex=function(t){var e=X509.getSubjectPublicKeyInfoPosFromCertHex(t);if(-1==e)return-1;var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(2!=r.length)return-1;var i=r[1];if("03"!=t.substring(i,i+2))return-1;var n=ASN1HEX.getStartPosOfV_AtObj(t,i);return"00"!=t.substring(n,n+2)?-1:n+2},X509.getSubjectPublicKeyInfoPosFromCertHex=function(t){var e=ASN1HEX.getStartPosOfV_AtObj(t,0),r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);return r.length<1?-1:"a003020102"==t.substring(r[0],r[0]+10)?r.length<6?-1:r[6]:r.length<5?-1:r[5]},X509.getPublicKeyHexArrayFromCertHex=function(t){var e=X509.getSubjectPublicKeyPosFromCertHex(t),r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(2!=r.length)return[];var i=ASN1HEX.getHexOfV_AtObj(t,r[0]),n=ASN1HEX.getHexOfV_AtObj(t,r[1]);return null!=i&&null!=n?[i,n]:[]},X509.getHexTbsCertificateFromCert=function(t){return ASN1HEX.getStartPosOfV_AtObj(t,0)},X509.getPublicKeyHexArrayFromCertPEM=function(t){var e=X509.pemToHex(t);return X509.getPublicKeyHexArrayFromCertHex(e)},X509.hex2dn=function(t){for(var e="",r=ASN1HEX.getPosArrayOfChildren_AtObj(t,0),i=0;i<r.length;i++){var n=ASN1HEX.getHexOfTLV_AtObj(t,r[i]);e=e+"/"+X509.hex2rdn(n)}return e},X509.hex2rdn=function(t){var e=ASN1HEX.getDecendantHexTLVByNthList(t,0,[0,0]),r=ASN1HEX.getDecendantHexVByNthList(t,0,[0,1]),i="";try{i=X509.DN_ATTRHEX[e]}catch(t){i=e}return r=r.replace(/(..)/g,"%$1"),i+"="+decodeURIComponent(r)},X509.DN_ATTRHEX={"0603550406":"C","060355040a":"O","060355040b":"OU","0603550403":"CN","0603550405":"SN","0603550408":"ST","0603550407":"L"},X509.getPublicKeyFromCertPEM=function(t){var e=X509.getPublicKeyInfoPropOfCertPEM(t);if("2a864886f70d010101"==e.algoid){var r=KEYUTIL.parsePublicRawRSAKeyHex(e.keyhex);return(n=new RSAKey).setPublic(r.n,r.e),n}if("2a8648ce3d0201"==e.algoid){var i=KJUR.crypto.OID.oidhex2name[e.algparam];return(n=new KJUR.crypto.ECDSA({curve:i,info:e.keyhex})).setPublicKeyHex(e.keyhex),n}if("2a8648ce380401"!=e.algoid)throw"unsupported key";var n,o=ASN1HEX.getVbyList(e.algparam,0,[0],"02"),s=ASN1HEX.getVbyList(e.algparam,0,[1],"02"),a=ASN1HEX.getVbyList(e.algparam,0,[2],"02"),h=ASN1HEX.getHexOfV_AtObj(e.keyhex,0);return h=h.substr(2),(n=new KJUR.crypto.DSA).setPublic(new BigInteger(o,16),new BigInteger(s,16),new BigInteger(a,16),new BigInteger(h,16)),n},X509.getPublicKeyInfoPropOfCertPEM=function(t){var e={algparam:null},r=X509.pemToHex(t),i=ASN1HEX.getPosArrayOfChildren_AtObj(r,0);if(3!=i.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=r.substr(i[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(r,i[0]);if(n.length<7)throw"malformed X.509 certificate PEM (code:003)";var o=ASN1HEX.getPosArrayOfChildren_AtObj(r,n[6]);if(2!=o.length)throw"malformed X.509 certificate PEM (code:004)";var s=ASN1HEX.getPosArrayOfChildren_AtObj(r,o[0]);if(2!=s.length)throw"malformed X.509 certificate PEM (code:005)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(r,s[0]),"06"==r.substr(s[1],2)?e.algparam=ASN1HEX.getHexOfV_AtObj(r,s[1]):"30"==r.substr(s[1],2)&&(e.algparam=ASN1HEX.getHexOfTLV_AtObj(r,s[1])),"03"!=r.substr(o[1],2))throw"malformed X.509 certificate PEM (code:006)";var a=ASN1HEX.getHexOfV_AtObj(r,o[1]);return e.keyhex=a.substr(2),e},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:"CryptoJS.algo.MD5",sha1:"CryptoJS.algo.SHA1",sha224:"CryptoJS.algo.SHA224",sha256:"CryptoJS.algo.SHA256",sha384:"CryptoJS.algo.SHA384",sha512:"CryptoJS.algo.SHA512",ripemd160:"CryptoJS.algo.RIPEMD160"},this.getDigestInfoHex=function(t,e){if(void 0===this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,r){var i=this.getDigestInfoHex(t,e),n=r/4;if(i.length+22>n)throw"key is too short for SigAlg: keylen="+r+","+e;for(var o="00"+i,s="",a=n-"0001".length-o.length,h=0;h<a;h+=2)s+="ff";return"0001"+s+o},this.hashString=function(t,e){return new KJUR.crypto.MessageDigest({alg:e}).digestString(t)},this.hashHex=function(t,e){return new KJUR.crypto.MessageDigest({alg:e}).digestHex(t)},this.sha1=function(t){return new KJUR.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(t)},this.sha256=function(t){return new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(t)},this.sha256Hex=function(t){return new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(t)},this.sha512=function(t){return new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(t)},this.sha512Hex=function(t){return new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(t)},this.md5=function(t){return new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(t)},this.ripemd160=function(t){return new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(t)},this.getCryptoJSMDByName=function(t){}},KJUR.crypto.MessageDigest=function(params){var md=null,algName=null,provName=null;this.setAlgAndProvider=function(alg,prov){if(null!=alg&&void 0===prov&&(prov=KJUR.crypto.Util.DEFAULTPROVIDER[alg]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(alg)&&"cryptojs"==prov){try{this.md=eval(KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[alg]).create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+alg+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=CryptoJS.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){return this.md.finalize().toString(CryptoJS.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(alg)&&"sjcl"==prov){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+alg+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==params&&void 0!==params.alg&&(this.algName=params.alg,void 0===params.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.Mac=function(params){var mac=null,pass=null,algName=null,provName=null,algProv=null;this.setAlgAndProvider=function(alg,prov){if(null==alg&&(alg="hmacsha1"),alg=alg.toLowerCase(),"hmac"!=alg.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+alg;void 0===prov&&(prov=KJUR.crypto.Util.DEFAULTPROVIDER[alg]),this.algProv=alg+"/"+prov;var hashAlg=alg.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(hashAlg)&&"cryptojs"==prov){try{var mdObj=eval(KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[hashAlg]);this.mac=CryptoJS.algo.HMAC.create(mdObj,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+hashAlg+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=CryptoJS.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(CryptoJS.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},void 0!==params&&(void 0!==params.pass&&(this.pass=params.pass),void 0!==params.alg&&(this.algName=params.alg,void 0===params.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){this.algName.match(/^(.+)with(.+)$/)&&(this.mdAlgName=RegExp.$1.toLowerCase(),this.pubkeyAlgName=RegExp.$2.toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var r="",i=e/4-t.length,n=0;n<i;n++)r+="0";return r+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t}this.init=function(t,e){var r=null;try{r=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.initSign=function(t){"string"==typeof t.ecprvhex&&"string"==typeof t.eccurvename?(this.ecprvhex=t.ecprvhex,this.eccurvename=t.eccurvename):this.prvKey=t,this.state="SIGN"},this.initVerifyByPublicKey=function(t){"string"==typeof t.ecpubhex&&"string"==typeof t.eccurvename?(this.ecpubhex=t.ecpubhex,this.eccurvename=t.eccurvename):t instanceof KJUR.crypto.ECDSA?this.pubKey=t:t instanceof RSAKey&&(this.pubKey=t),this.state="VERIFY"},this.initVerifyByCertificatePEM=function(t){var e=new X509;e.readCertPEM(t),this.pubKey=e.subjectPublicKeyRSA,this.state="VERIFY"},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var t=new KJUR.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if("rsaandmgf1"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if("rsa"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof KJUR.crypto.DSA))throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new KJUR.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,t,this.ecpubhex);if("rsaandmgf1"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if("rsa"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.initVerifyByPublicKey=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName},this.initVerifyByCertificatePEM=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName},this.initSign=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},void 0!==(this.initParams=t)&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{(e=new RSAKey).readPrivateKeyFromPEMString(t.prvkeypem),this.initSign(e)}catch(t){throw"fatal error to load pem private key: "+t}}},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},b64utoutf8="function"==typeof Buffer?(utf8tob64u=function(t){return b64tob64u(new Buffer(t,"utf8").toString("base64"))},function(t){return new Buffer(b64utob64(t),"base64").toString("utf8")}):(utf8tob64u=function(t){return hextob64u(uricmptohex(encodeURIComponentAll(t)))},function(t){return decodeURIComponent(hextouricmp(b64utohex(t)))});var jsonParse=function(){var g=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),l=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),i={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function f(t,e,r){return e?i[e]:String.fromCharCode(parseInt(r,16))}var d=new String(""),y=(Object,Array,Object.hasOwnProperty);return function(t,a){var e,r,i=t.match(g),n=i[0],o=!1;"{"===n?e={}:"["===n?e=[]:(e=[],o=!0);for(var s=[e],h=1-o,u=i.length;h<u;++h){var c;switch((n=i[h]).charCodeAt(0)){default:(c=s[0])[r||c.length]=+n,r=void 0;break;case 34:if(-1!==(n=n.substring(1,n.length-1)).indexOf("\\")&&(n=n.replace(l,f)),c=s[0],!r){if(!(c instanceof Array)){r=n||d;break}r=c.length}c[r]=n,r=void 0;break;case 91:c=s[0],s.unshift(c[r||c.length]=[]),r=void 0;break;case 93:s.shift();break;case 102:(c=s[0])[r||c.length]=!1,r=void 0;break;case 110:(c=s[0])[r||c.length]=null,r=void 0;break;case 116:(c=s[0])[r||c.length]=!0,r=void 0;break;case 123:c=s[0],s.unshift(c[r||c.length]={}),r=void 0;break;case 125:s.shift()}}if(o){if(1!==s.length)throw new Error;e=e[0]}else if(s.length)throw new Error;if(a){var p=function(t,e){var r=t[e];if(r&&"object"==typeof r){var i=null;for(var n in r)if(y.call(r,n)&&r!==t){var o=p(r,n);void 0!==o?r[n]=o:(i||(i=[]),i.push(n))}if(i)for(var s=i.length;0<=--s;)delete r[i[s]]}return a.call(t,e,r)};e=p({"":e},"")}return e}}();function DefaultHttpRequest(){this.getJSON=function(t,n){return _promiseFactory.create(function(e,r){try{var i=new XMLHttpRequest;i.open("GET",t),i.responseType="json",n&&n.headers&&function(t,e){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i],o=e[n];t.setRequestHeader(n,o)}}(i,n.headers),i.onload=function(){try{if(200===i.status){var t=i.response;"string"==typeof t&&(t=JSON.parse(t)),e(t)}else r(Error(i.statusText+"("+i.status+")"))}catch(t){r(t)}},i.onerror=function(){r(Error("Network error"))},i.send()}catch(t){return r(t)}})}}function DefaultPromise(r){this.then=function(t,e){return new DefaultPromise(r.then(t,e))},this.catch=function(t){return new DefaultPromise(r.catch(t))}}function DefaultPromiseFactory(){this.resolve=function(t){return new DefaultPromise(Promise.resolve(t))},this.reject=function(t){return new DefaultPromise(Promise.reject(t))},this.create=function(t){return new DefaultPromise(new Promise(t))}}function log(){}function copy(t,e){for(var r in e=e||{},t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function rand(){return((Date.now()+Math.random())*Math.random()).toString().replace(".","")}function error(t){return _promiseFactory.reject(Error(t))}function parseOidcResult(t){log("parseOidcResult");var e=(t=t||location.hash).lastIndexOf("#");0<=e&&(t=t.substr(e+1));for(var r,i={},n=/([^&=]+)=([^&]*)/g,o=0;r=n.exec(t);)if(i[decodeURIComponent(r[1])]=decodeURIComponent(r[2]),50<o++)return{error:"Response exceeded expected number of parameters"};for(var s in i)return i}function getJson(t,e){log("getJson",t);var r={};return e&&(r.headers={Authorization:"Bearer "+e}),_httpRequest.getJSON(t,r)}function OidcClient(t){this._settings=t||{},this._settings.request_state_key||(this._settings.request_state_key="OidcClient.request_state"),this._settings.request_state_store||(this._settings.request_state_store=window.localStorage),void 0===this._settings.load_user_profile&&(this._settings.load_user_profile=!0),void 0===this._settings.filter_protocol_claims&&(this._settings.filter_protocol_claims=!0),this._settings.authority&&this._settings.authority.indexOf(".well-known/openid-configuration")<0&&("/"!==this._settings.authority[this._settings.authority.length-1]&&(this._settings.authority+="/"),this._settings.authority+=".well-known/openid-configuration"),this._settings.response_type||(this._settings.response_type="id_token token"),Object.defineProperty(this,"isOidc",{get:function(){return!!this._settings.response_type&&!!this._settings.response_type.split(/\s+/g).filter(function(t){return"id_token"===t})[0]}}),Object.defineProperty(this,"isOAuth",{get:function(){return!!this._settings.response_type&&!!this._settings.response_type.split(/\s+/g).filter(function(t){return"token"===t})[0]}})}"undefined"!=typeof KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWS=function(){function a(t,e){return utf8tob64u(t)+"."+utf8tob64u(e)}function h(t){var e=t.alg,r="";if("RS256"!=e&&"RS512"!=e&&"PS256"!=e&&"PS512"!=e)throw"JWS signature algorithm not supported: "+e;return"256"==e.substr(2)&&(r="sha256"),"512"==e.substr(2)&&(r="sha512"),r}function u(t){return h(jsonParse(t))}function c(t,e,r,i,n,o){var s=new RSAKey;s.setPrivate(i,n,o);var a=u(t);return s.signString(r,a)}this.parseJWS=function(t,e){if(void 0===this.parsedJWS||!e&&void 0===this.parsedJWS.sigvalH){if(null==t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/))throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var r=RegExp.$1,i=RegExp.$2,n=RegExp.$3,o=r+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=r,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=n,this.parsedJWS.si=o,!e){var s=b64utohex(n),a=parseBigInt(s,16);this.parsedJWS.sigvalH=s,this.parsedJWS.sigvalBI=a}var h=b64utoutf8(r),u=b64utoutf8(i);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=u,!KJUR.jws.JWS.isSafeJSONString(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}},this.verifyJWSByNE=function(t,e,r){return this.parseJWS(t),_rsasign_verifySignatureWithArgs(this.parsedJWS.si,this.parsedJWS.sigvalBI,e,r)},this.verifyJWSByKey=function(t,e){this.parseJWS(t);var r=h(this.parsedJWS.headP),i="PS"==this.parsedJWS.headP.alg.substr(0,2);return e.hashAndVerify?e.hashAndVerify(r,new Buffer(this.parsedJWS.si,"utf8").toString("base64"),b64utob64(this.parsedJWS.sigvalB64U),"base64",i):i?e.verifyStringPSS(this.parsedJWS.si,this.parsedJWS.sigvalH,r):e.verifyString(this.parsedJWS.si,this.parsedJWS.sigvalH)},this.verifyJWSByPemX509Cert=function(t,e){this.parseJWS(t);var r=new X509;return r.readCertPEM(e),r.subjectPublicKeyRSA.verifyString(this.parsedJWS.si,this.parsedJWS.sigvalH)},this.generateJWSByNED=function(t,e,r,i,n){if(!KJUR.jws.JWS.isSafeJSONString(t))throw"JWS Head is not safe JSON string: "+t;var o=a(t,e),s=hextob64u(c(t,0,o,r,i,n));return this.parsedJWS={},this.parsedJWS.headB64U=o.split(".")[0],this.parsedJWS.payloadB64U=o.split(".")[1],o+"."+(this.parsedJWS.sigvalB64U=s)},this.generateJWSByKey=function(t,e,r){var i={};if(!KJUR.jws.JWS.isSafeJSONString(t,i,"headP"))throw"JWS Head is not safe JSON string: "+t;var n=a(t,e),o=function(t,e,r,i,n){var o=null;o=void 0===n?u(t):h(n);var s="PS"==n.alg.substr(0,2);return i.hashAndSign?b64tob64u(i.hashAndSign(o,r,"binary","base64",s)):hextob64u(s?i.signStringPSS(r,o):i.signString(r,o))}(t,0,n,r,i.headP);return this.parsedJWS={},this.parsedJWS.headB64U=n.split(".")[0],this.parsedJWS.payloadB64U=n.split(".")[1],n+"."+(this.parsedJWS.sigvalB64U=o)},this.generateJWSByP1PrvKey=function(t,e,r){if(!KJUR.jws.JWS.isSafeJSONString(t))throw"JWS Head is not safe JSON string: "+t;var i=a(t,e),n=hextob64u(function(t,e,r,i){var n=new RSAKey;n.readPrivateKeyFromPEMString(i);var o=u(t);return n.signString(r,o)}(t,0,i,r));return this.parsedJWS={},this.parsedJWS.headB64U=i.split(".")[0],this.parsedJWS.payloadB64U=i.split(".")[1],i+"."+(this.parsedJWS.sigvalB64U=n)}},KJUR.jws.JWS.sign=function(t,e,r,i,n){var o=KJUR.jws.JWS;if(!o.isSafeJSONString(e))throw"JWS Head is not safe JSON string: "+sHead;var s=o.readSafeJSONString(e);""!=t&&null!=t||void 0===s.alg||(t=s.alg),""!=t&&null!=t&&void 0===s.alg&&(s.alg=t,e=JSON.stringify(s));var a=null;if(void 0===o.jwsalg2sigalg[t])throw"unsupported alg name: "+t;a=o.jwsalg2sigalg[t];var h=utf8tob64u(e)+"."+utf8tob64u(r),u="";if("Hmac"==a.substr(0,4)){if(void 0===i)throw"hexadecimal key shall be specified for HMAC";var c=new KJUR.crypto.Mac({alg:a,pass:hextorstr(i)});c.updateString(h),u=c.doFinal()}else if(-1!=a.indexOf("withECDSA")){(p=new KJUR.crypto.Signature({alg:a})).init(i,n),p.updateString(h),hASN1Sig=p.sign(),u=KJUR.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)}else if("none"!=a){var p;(p=new KJUR.crypto.Signature({alg:a})).init(i,n),p.updateString(h),u=p.sign()}return h+"."+hextob64u(u)},KJUR.jws.JWS.verify=function(t,e){var r=KJUR.jws.JWS,i=t.split("."),n=i[0]+"."+i[1],o=b64utohex(i[2]),s=r.readSafeJSONString(b64utoutf8(i[0])),a=null;if(void 0===s.alg)throw"algorithm not specified in header";a=s.alg;var h=null;if(void 0===r.jwsalg2sigalg[s.alg])throw"unsupported alg name: "+a;if("none"==(h=r.jwsalg2sigalg[a]))return!0;if("Hmac"==h.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var u=new KJUR.crypto.Mac({alg:h,pass:hextorstr(e)});return u.updateString(n),hSig2=u.doFinal(),o==hSig2}if(-1==h.indexOf("withECDSA"))return(c=new KJUR.crypto.Signature({alg:h})).init(e),c.updateString(n),c.verify(o);var c,p=null;try{p=KJUR.crypto.ECDSA.concatSigToASN1Sig(o)}catch(t){return!1}return(c=new KJUR.crypto.Signature({alg:h})).init(e),c.updateString(n),c.verify(p)},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(t,e,r){var i=null;try{return"object"!=typeof(i=jsonParse(t))?0:i.constructor===Array?0:(e&&(e[r]=i),1)}catch(t){return 0}},KJUR.jws.JWS.readSafeJSONString=function(t){var e=null;try{return"object"!=typeof(e=jsonParse(t))?null:e.constructor===Array?null:e}catch(t){return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(t){if(null==t.match(/^[^.]+\.[^.]+\.([^.]+)$/))throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return RegExp.$1},KJUR.jws.IntDate=function(){},KJUR.jws.IntDate.get=function(t){if("now"==t)return KJUR.jws.IntDate.getNow();if("now + 1hour"==t)return KJUR.jws.IntDate.getNow()+3600;if("now + 1day"==t)return KJUR.jws.IntDate.getNow()+86400;if("now + 1month"==t)return KJUR.jws.IntDate.getNow()+2592e3;if("now + 1year"==t)return KJUR.jws.IntDate.getNow()+31536e3;if(t.match(/Z$/))return KJUR.jws.IntDate.getZulu(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},KJUR.jws.IntDate.getZulu=function(t){if(a=t.match(/(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/)){var e=parseInt(RegExp.$1),r=parseInt(RegExp.$2)-1,i=parseInt(RegExp.$3),n=parseInt(RegExp.$4),o=parseInt(RegExp.$5),s=parseInt(RegExp.$6);return~~(new Date(Date.UTC(e,r,i,n,o,s))/1e3)}throw"unsupported format: "+t},KJUR.jws.IntDate.getNow=function(){return~~(new Date/1e3)},KJUR.jws.IntDate.intDate2UTCString=function(t){return new Date(1e3*t).toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t);return("0000"+e.getUTCFullYear()).slice(-4)+("00"+(e.getUTCMonth()+1)).slice(-2)+("00"+e.getUTCDate()).slice(-2)+("00"+e.getUTCHours()).slice(-2)+("00"+e.getUTCMinutes()).slice(-2)+("00"+e.getUTCSeconds()).slice(-2)+"Z"},function(){"use strict";function u(t){return"function"==typeof t}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};Date.now;function t(){}Object.create;var r=0,h=function(t,e){l[r]=t,l[r+1]=e,2===(r+=2)&&o()},e="undefined"!=typeof window?window:{},i=e.MutationObserver||e.WebKitMutationObserver,n="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;var o,s,c,p,g,l=new Array(1e3);function f(){for(var t=0;t<r;t+=2){(0,l[t])(l[t+1]),l[t]=void 0,l[t+1]=void 0}r=0}function d(){}o="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){process.nextTick(f)}:i?(c=0,p=new i(f),g=document.createTextNode(""),p.observe(g,{characterData:!0}),function(){g.data=c=++c%2}):n?((s=new MessageChannel).port1.onmessage=f,function(){s.port2.postMessage(0)}):function(){setTimeout(f,1)};var y=void 0,S=1,v=2,b=new H;function m(t,e){if(e.constructor===t.constructor)!function(e,t){t._state===S?w(e,t._result):e._state===v?x(e,t._result):R(t,void 0,function(t){_(e,t)},function(t){x(e,t)})}(t,e);else{var r=function(t){try{return t.then}catch(t){return b.error=t,b}}(e);r===b?x(t,b.error):void 0===r?w(t,e):u(r)?function(t,i,n){h(function(e){var r=!1,t=function(t,e,r,i){try{t.call(e,r,i)}catch(t){return t}}(n,i,function(t){r||(r=!0,i!==t?_(e,t):w(e,t))},function(t){r||(r=!0,x(e,t))},e._label);!r&&t&&(r=!0,x(e,t))},t)}(t,e,r):w(t,e)}}function _(t,e){t===e?x(t,new TypeError("You cannot resolve a promise with itself")):!function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?w(t,e):m(t,e)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function w(t,e){t._state===y&&(t._result=e,t._state=S,0===t._subscribers.length||h(T,t))}function x(t,e){t._state===y&&(t._state=v,t._result=e,h(A,t))}function R(t,e,r,i){var n=t._subscribers,o=n.length;t._onerror=null,n[o]=e,n[o+S]=r,n[o+v]=i,0===o&&t._state&&h(T,t)}function T(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var i,n,o=t._result,s=0;s<e.length;s+=3)i=e[s],n=e[s+r],i?B(r,i,n,o):n(o);t._subscribers.length=0}}function H(){this.error=null}var I=new H;function B(t,e,r,i){var n,o,s,a,h=u(r);if(h){if((n=function(t,e){try{return t(e)}catch(t){return I.error=t,I}}(r,i))===I?(a=!0,o=n.error,n=null):s=!0,e===n)return void x(e,new TypeError("A promises callback cannot return that same promise."))}else n=i,s=!0;e._state!==y||(h&&s?_(e,n):a?x(e,o):t===S?w(e,n):t===v&&x(e,n))}function E(t,e,r,i){this._instanceConstructor=t,this.promise=new t(d,i),this._abortOnReject=r,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,this._validationError())}E.prototype._validateInput=function(t){return a(t)},E.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},E.prototype._init=function(){this._result=new Array(this.length)};var P=E;E.prototype._enumerate=function(){for(var t=this.length,e=this.promise,r=this._input,i=0;e._state===y&&i<t;i++)this._eachEntry(r[i],i)},E.prototype._eachEntry=function(t,e){var r=this._instanceConstructor;!function(t){return"object"==typeof t&&null!==t}(t)?(this._remaining--,this._result[e]=this._makeResult(S,e,t)):t.constructor===r&&t._state!==y?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(r.resolve(t),e)},E.prototype._settledAt=function(t,e,r){var i=this.promise;i._state===y&&(this._remaining--,this._abortOnReject&&t===v?x(i,r):this._result[e]=this._makeResult(t,e,r)),0===this._remaining&&w(i,this._result)},E.prototype._makeResult=function(t,e,r){return r},E.prototype._willSettleAt=function(t,e){var r=this;R(t,void 0,function(t){r._settledAt(S,e,t)},function(t){r._settledAt(v,e,t)})};var O=0;var k=C;function C(t,e){this._id=O++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],d!==t&&(u(t)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof C||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(e,t){try{t(function(t){_(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}(this,t))}C.all=function(t,e){return new P(this,t,!0,e).promise},C.race=function(t,e){var r=new this(d,e);if(!a(t))return x(r,new TypeError("You must pass an array to race.")),r;var i=t.length;function n(t){_(r,t)}function o(t){x(r,t)}for(var s=0;r._state===y&&s<i;s++)R(this.resolve(t[s]),void 0,n,o);return r},C.resolve=function(t,e){if(t&&"object"==typeof t&&t.constructor===this)return t;var r=new this(d,e);return _(r,t),r},C.reject=function(t,e){var r=new this(d,e);return x(r,t),r},C.prototype={constructor:C,then:function(t,e,r){var i=this._state;if(i===S&&!t||i===v&&!e)return this;this._onerror=null;var n=new this.constructor(d,r),o=this._result;if(i){var s=arguments[i-1];h(function(){B(i,n,s,o)})}else R(this,n,t,e);return n},catch:function(t,e){return this.then(null,t,e)}};var N={Promise:k,polyfill:function(){var t,e;"Promise"in(t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise(function(t){e=t}),u(e))||(t.Promise=k)}};"function"==typeof define&&define.amd?define(function(){return N}):"undefined"!=typeof module&&module.exports?module.exports=N:void 0!==this&&(this.ES6Promise=N),window.Promise=window.Promise||this.ES6Promise.Promise}.call(this),_httpRequest=new DefaultHttpRequest,_promiseFactory=new DefaultPromiseFactory,OidcClient.prototype.loadMetadataAsync=function(){log("OidcClient.loadMetadataAsync");var e=this._settings;return e.metadata?_promiseFactory.resolve(e.metadata):e.authority?getJson(e.authority).then(function(t){return e.metadata=t},function(t){return error("Failed to load metadata ("+t.message+")")}):error("No authority configured")},OidcClient.prototype.loadX509SigningKeyAsync=function(){log("OidcClient.loadX509SigningKeyAsync");var e=this._settings;function r(t){if(!t.keys||!t.keys.length)return error("Signing keys empty");var e=t.keys[0];return"RSA"!==e.kty?error("Signing key not RSA"):e.x5c&&e.x5c.length?_promiseFactory.resolve(e.x5c[0]):error("RSA keys empty")}return e.jwks?r(e.jwks):this.loadMetadataAsync().then(function(t){return t.jwks_uri?getJson(t.jwks_uri).then(function(t){return r(e.jwks=t)},function(t){return error("Failed to load signing keys ("+t.message+")")}):error("Metadata does not contain jwks_uri")})},OidcClient.prototype.loadUserProfile=function(e){return log("OidcClient.loadUserProfile"),this.loadMetadataAsync().then(function(t){return t.userinfo_endpoint?getJson(t.userinfo_endpoint,e):_promiseFactory.reject(Error("Metadata does not contain userinfo_endpoint"))})},OidcClient.prototype.loadAuthorizationEndpoint=function(){return log("OidcClient.loadAuthorizationEndpoint"),this._settings.authorization_endpoint?_promiseFactory.resolve(this._settings.authorization_endpoint):this._settings.authority?this.loadMetadataAsync().then(function(t){return t.authorization_endpoint?t.authorization_endpoint:error("Metadata does not contain authorization_endpoint")}):error("No authorization_endpoint configured")},OidcClient.prototype.createTokenRequestAsync=function(){log("OidcClient.createTokenRequestAsync");var o=this,s=o._settings;return o.loadAuthorizationEndpoint().then(function(t){var e=rand(),r=t+"?state="+encodeURIComponent(e);if(o.isOidc){var i=rand();r+="&nonce="+encodeURIComponent(i)}["client_id","redirect_uri","response_type","scope"].forEach(function(t){var e=s[t];e&&(r+="&"+t+"="+encodeURIComponent(e))});["prompt","display","max_age","ui_locales","id_token_hint","login_hint","acr_values"].forEach(function(t){var e=s[t];e&&(r+="&"+t+"="+encodeURIComponent(e))});var n={oidc:o.isOidc,oauth:o.isOAuth,state:e};return i&&(n.nonce=i),s.request_state_store.setItem(s.request_state_key,JSON.stringify(n)),{request_state:n,url:r}})},OidcClient.prototype.createLogoutRequestAsync=function(r){log("OidcClient.createLogoutRequestAsync");var i=this._settings;return this.loadMetadataAsync().then(function(t){if(!t.end_session_endpoint)return error("No end_session_endpoint in metadata");var e=t.end_session_endpoint;return r&&i.post_logout_redirect_uri&&(e+="?post_logout_redirect_uri="+encodeURIComponent(i.post_logout_redirect_uri),e+="&id_token_hint="+encodeURIComponent(r)),e})},OidcClient.prototype.validateIdTokenAsync=function(i,n,o){log("OidcClient.validateIdTokenAsync");var s=this,a=s._settings;return s.loadX509SigningKeyAsync().then(function(t){var e=new KJUR.jws.JWS;if(e.verifyJWSByPemX509Cert(i,t)){var r=JSON.parse(e.parsedJWS.payloadS);return n!==r.nonce?error("Invalid nonce"):s.loadMetadataAsync().then(function(t){if(r.iss!==t.issuer)return error("Invalid issuer");if(r.aud!==a.client_id)return error("Invalid audience");var e=parseInt(Date.now()/1e3);return 300<e-r.iat?error("Token issued too long ago"):r.exp<e?error("Token expired"):o&&a.load_user_profile?s.loadUserProfile(o,r).then(function(t){return copy(t,r)}):r})}return error("JWT failed to validate")})},OidcClient.prototype.validateAccessTokenAsync=function(t,e){if(log("OidcClient.validateAccessTokenAsync"),!t.at_hash)return error("No at_hash in id_token");var r=KJUR.crypto.Util.sha256(e);return hextob64u(r.substr(0,r.length/2))!==t.at_hash?error("at_hash failed to validate"):_promiseFactory.resolve()},OidcClient.prototype.validateIdTokenAndAccessTokenAsync=function(t,e,r){log("OidcClient.validateIdTokenAndAccessTokenAsync");var i=this;return i.validateIdTokenAsync(t,e,r).then(function(t){return i.validateAccessTokenAsync(t,r).then(function(){return t})})},OidcClient.prototype.processResponseAsync=function(t){log("OidcClient.processResponseAsync");var r=this._settings,e=r.request_state_store.getItem(r.request_state_key);if(r.request_state_store.removeItem(r.request_state_key),!e)return error("No request state loaded");if(!(e=JSON.parse(e)))return error("No request state loaded");if(!e.state)return error("No state loaded");var i=parseOidcResult(t);if(!i)return error("No OIDC response");if(i.error)return error(i.error);if(i.state!==e.state)return error("Invalid state");if(e.oidc){if(!i.id_token)return error("No identity token");if(!e.nonce)return error("No nonce loaded")}if(e.oauth){if(!i.access_token)return error("No access token");if(!i.token_type||"bearer"!==i.token_type.toLowerCase())return error("Invalid token type");if(!i.expires_in)return error("No token expiration")}var n=_promiseFactory.resolve();return e.oidc&&e.oauth?n=this.validateIdTokenAndAccessTokenAsync(i.id_token,e.nonce,i.access_token):e.oidc&&(n=this.validateIdTokenAsync(i.id_token,e.nonce)),n.then(function(e){if(e&&r.filter_protocol_claims){["nonce","at_hash","iat","nbf","exp","aud","iss","idp"].forEach(function(t){delete e[t]})}return{profile:e,id_token:i.id_token,access_token:i.access_token,expires_in:i.expires_in,scope:i.scope,session_state:i.session_state}})},window.OidcClient=OidcClient}();var _httpRequest=new DefaultHttpRequest,_promiseFactory=new DefaultPromiseFactory;function copy(t,e){for(var r in e=e||{},t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Token(t){if(t){if(this.profile=t.profile,this.id_token=t.id_token,this.access_token=t.access_token,t.access_token)this.expires_at=parseInt(t.expires_at);else{if(!t.id_token)throw Error("Either access_token or id_token required.");this.expires_at=t.profile.exp}this.scopes=(t.scope||"").split(" "),this.session_state=t.session_state}else this.expires_at=0;Object.defineProperty(this,"expired",{get:function(){var t=parseInt(Date.now()/1e3);return this.expires_at<t}}),Object.defineProperty(this,"expires_in",{get:function(){var t=parseInt(Date.now()/1e3);return this.expires_at-t}})}function FrameLoader(t){this.url=t}function loadToken(t){if(t._token=null,t._settings.persist){var e=t._settings.store.getItem(t._settings.persistKey);if(e){var r=Token.fromJSON(e);r.expired||(t._token=r)}}}function configureTokenExpiring(e){function r(){i=null,e._callTokenExpiring()}var i=null;function n(){i&&(window.clearTimeout(i),i=null)}function t(){if(n(),!e.expired){var t=e.expires_in;60<t?function(t){i=window.setTimeout(r,1e3*t)}(t-60):r()}}t(),e.addOnTokenObtained(t),e.addOnTokenRemoved(n)}function configureAutoRenewToken(e){e._settings.silent_redirect_uri&&e._settings.silent_renew&&e.addOnTokenExpiring(function(){e.renewTokenSilentAsync().catch(function(t){e._callSilentTokenRenewFailed(),console.error(t.message||t)})})}function configureTokenExpired(t){function e(){r=null,t._token&&t.saveToken(null),t._callTokenExpired()}var r=null;function i(){r&&(window.clearTimeout(r),r=null)}function n(){i(),0<t.expires_in&&function(t){r=window.setTimeout(e,1e3*t)}(t.expires_in+1)}n(),t.addOnTokenObtained(n),t.addOnTokenRemoved(i)}function TokenManager(t){this._settings=t||{},this._settings.persist=this._settings.persist||!0,this._settings.store=this._settings.store||window.localStorage,this._settings.persistKey=this._settings.persistKey||"TokenManager.token",this.oidcClient=new OidcClient(this._settings),this._callbacks={tokenRemovedCallbacks:[],tokenExpiringCallbacks:[],tokenExpiredCallbacks:[],tokenObtainedCallbacks:[],silentTokenRenewFailedCallbacks:[]},Object.defineProperty(this,"profile",{get:function(){if(this._token)return this._token.profile}}),Object.defineProperty(this,"id_token",{get:function(){if(this._token)return this._token.id_token}}),Object.defineProperty(this,"access_token",{get:function(){if(this._token&&!this._token.expired)return this._token.access_token}}),Object.defineProperty(this,"expired",{get:function(){return!this._token||this._token.expired}}),Object.defineProperty(this,"expires_in",{get:function(){return this._token?this._token.expires_in:0}}),Object.defineProperty(this,"expires_at",{get:function(){return this._token?this._token.expires_at:0}}),Object.defineProperty(this,"scopes",{get:function(){return this._token?[].concat(this._token.scopes):[]}}),Object.defineProperty(this,"session_state",{get:function(){if(this._token)return this._token.session_state}});var e=this;loadToken(e),window.addEventListener("storage",function(t){t.key===e._settings.persistKey&&(loadToken(e),e._token?e._callTokenObtained():e._callTokenRemoved())}),configureTokenExpired(e),configureAutoRenewToken(e),window.setTimeout(function(){configureTokenExpiring(e)},0)}Token.fromResponse=function(t){if(t.access_token){var e=parseInt(Date.now()/1e3);t.expires_at=e+parseInt(t.expires_in)}return new Token(t)},Token.fromJSON=function(t){if(t)try{return new Token(JSON.parse(t))}catch(t){}return new Token(null)},Token.prototype.toJSON=function(){return JSON.stringify({profile:this.profile,id_token:this.id_token,access_token:this.access_token,expires_at:this.expires_at,scope:this.scopes.join(" "),session_state:this.session_state})},FrameLoader.prototype.loadAsync=function(s){return(s=s||this.url)?_promiseFactory.create(function(e,r){var i=window.document.createElement("iframe");function n(){window.removeEventListener("message",t,!1),o&&window.clearTimeout(o),o=null,window.document.body.removeChild(i)}function t(t){o&&t.origin===location.protocol+"//"+location.host&&t.source==i.contentWindow&&(n(),e(t.data))}i.style.display="none";var o=window.setTimeout(function(t){n(),r()},5e3);window.addEventListener("message",t,!1),window.document.body.appendChild(i),i.src=s}):_promiseFactory.reject("No url provided")},TokenManager.setPromiseFactory=function(t){_promiseFactory=t},TokenManager.setHttpRequest=function(t){if("object"!=typeof t||"function"!=typeof t.getJSON)throw Error("The provided value is not a valid http request.");_httpRequest=t},TokenManager.prototype._callTokenRemoved=function(){this._callbacks.tokenRemovedCallbacks.forEach(function(t){t()})},TokenManager.prototype._callTokenExpiring=function(){this._callbacks.tokenExpiringCallbacks.forEach(function(t){t()})},TokenManager.prototype._callTokenExpired=function(){this._callbacks.tokenExpiredCallbacks.forEach(function(t){t()})},TokenManager.prototype._callTokenObtained=function(){this._callbacks.tokenObtainedCallbacks.forEach(function(t){t()})},TokenManager.prototype._callSilentTokenRenewFailed=function(){this._callbacks.silentTokenRenewFailedCallbacks.forEach(function(t){t()})},TokenManager.prototype.saveToken=function(t){!t||t instanceof Token||(t=Token.fromResponse(t)),this._token=t,this._settings.persist&&!this.expired?this._settings.store.setItem(this._settings.persistKey,t.toJSON()):this._settings.store.removeItem(this._settings.persistKey),t?this._callTokenObtained():this._callTokenRemoved()},TokenManager.prototype.addOnTokenRemoved=function(t){this._callbacks.tokenRemovedCallbacks.push(t)},TokenManager.prototype.addOnTokenObtained=function(t){this._callbacks.tokenObtainedCallbacks.push(t)},TokenManager.prototype.addOnTokenExpiring=function(t){this._callbacks.tokenExpiringCallbacks.push(t)},TokenManager.prototype.addOnTokenExpired=function(t){this._callbacks.tokenExpiredCallbacks.push(t)},TokenManager.prototype.addOnSilentTokenRenewFailed=function(t){this._callbacks.silentTokenRenewFailedCallbacks.push(t)},TokenManager.prototype.removeToken=function(){this.saveToken(null)},TokenManager.prototype.redirectForToken=function(){this.oidcClient.createTokenRequestAsync().then(function(t){window.location=t.url},function(t){console.error("TokenManager.redirectForToken error: "+(t&&t.message||t||""))})},TokenManager.prototype.redirectForLogout=function(){var e=this;e.oidcClient.createLogoutRequestAsync(e.id_token).then(function(t){e.removeToken(),window.location=t},function(t){console.error("TokenManager.redirectForLogout error: "+(t&&t.message||t||""))})},TokenManager.prototype.processTokenCallbackAsync=function(t){var e=this;return e.oidcClient.processResponseAsync(t).then(function(t){e.saveToken(t)})},TokenManager.prototype.renewTokenSilentAsync=function(){var e=this;if(!e._settings.silent_redirect_uri)return _promiseFactory.reject("silent_redirect_uri not configured");var t=copy(e._settings);t.redirect_uri=t.silent_redirect_uri,t.prompt="none";var r=new OidcClient(t);return r.createTokenRequestAsync().then(function(t){return new FrameLoader(t.url).loadAsync().then(function(t){return r.processResponseAsync(t).then(function(t){e.saveToken(t)})})})},TokenManager.prototype.processTokenCallbackSilent=function(t){window.parent&&window!==window.parent&&((t=t||window.location.hash)&&window.parent.postMessage(t,location.protocol+"//"+location.host))},window.OidcTokenManager=TokenManager}();
var mgr,config={client_id:app_configuration.app_config.identity_config.client_id,redirect_uri:app_configuration.app_config.identity_config.re_direct_uri,post_logout_redirect_uri:app_configuration.app_config.identity_config.post_logout_redirect_uri,response_type:"id_token token",scope:"openid profile email role companyId partnerId",authority:app_configuration.app_config.identity_config.authority,silent_redirect_uri:app_configuration.app_config.identity_config.silent_redirect_uri,silent_renew:!0};function gettokenid(){var e=window.location.hash.substr(1).split("&").reduce(function(e,o){var n=o.split("=");return e[n[0]]=n[1],e},{});if(e.id_token||e.access_token)return id_token=e.id_token,id_token}function logout(){window.localStorage.removeItem("userInfo"),mgr.redirectForLogout()}(mgr=new OidcTokenManager(config)).expired&&(window.location.hash?null!=gettokenid()?mgr.processTokenCallbackAsync().then(function(){},function(e){}):(window.localStorage.removeItem("userInfo"),mgr.redirectForToken()):mgr.expired&&(window.localStorage.removeItem("userInfo"),mgr.redirectForToken())),(mgr=new OidcTokenManager(config)).expired&&(window.location.hash?null!=gettokenid()?mgr.processTokenCallbackAsync().then(function(){console.log("Successfully Obtained Token",mgr.access_token)},function(e){console.error("Problem Getting Token : "+(e.message||e))}):mgr.redirectForToken():mgr.expired&&(window.localStorage.removeItem("userInfo"),mgr.redirectForToken()));
angular.module("appsworld",["ui.router","ngSanitize","ui.bootstrap","angular-flot","angles","angular-peity","cgNotify","angles","ngAnimate","ui.map","ui.calendar","summernote","ngGrid","ui.tree","bm.bsTour","datatables","xeditable","ui.select","ui.sortable","ui.footable","angular-chartist","gridshore.c3js.chart","datatables.buttons","angular-ladda","ui.codemirror","kendo.directives","addressbook","masterGrids","ZValidations","ngCookies","angucomplete-alt","common.bootstrap","angular-momentjs","gridColumns","reports","autoform","employeeprofile","autoform","notification.center","ui.bootstrap.contextMenu","communicatormodule"]).service("SignalRConn",function(){return(new signalR.HubConnectionBuilder).withUrl("http://localhost:54086/notificationsHub").build()}).service("scopeApply",function(){return function(e){e.$$phase||e.$apply()}}).run(["$rootScope","$state","$cookies","config","zStorageEnc",function(r,i,e,u,l){r.$on("$stateChangeStart",function(e,o,a,t,n){window.onbeforeunload=function(){l.setItem("__breadcrumbLabel",u.displayLabel?u.displayLabel:"")},r.prevUrlParam=i.params,r.prevUrl=i.current.name})}]);
!function(){"use strict";function e(t,n,r,m,o,i){var e=mgr,a=e.profile,s=[],u={};if(a.email&&a.role){var d={userName:a.email,role:"object"!=typeof a.role?a.role:-1<a.role.indexOf("Super User")?"Super User":-1<a.role.indexOf("Super Admin")?"admin":a.role},l={isMultiCompany:"object"==typeof a.companyId,companyId:a.companyId,isAuthCompany:!1};n.partnerId=a.partnerId,n.isPartner=!!n.partnerId,u.auth_company=l,u.user_info=d,u.fill_authentication_details=function(){var e=i.getCookie("company_details");n.userName=d.userName,n.role=d.role,n.TwoFactorEnabled=a.TwoFactorEnabled,e&&-1==a.companyId.indexOf(JSON.parse(e).companyId.toString())&&(i.removeCookie("company_details"),i.removeCookie("companyCursors"),e=null),e?(e=JSON.parse(e),n.companyId=e.companyId,n.companyName=e.companyName,n.dateFormat=e.dateFormat,n.timeFormat=e.timeFormat,n.currency=e.currency,n.userImage=e.userImage,n.userFullName=e.userFullName,n.shortCode=e.ShortCode,n.IssetupDone=e.IssetupDone,n.TenantId=e.TenantId,n.skey=e.skey,l.isAuthCompany=!0):n.isPartner?window.location.href=app_configuration.app_config.module_linking.partner:r.go("selectcompany")},u.company_details=function(e){return e=e||{ids:l.isMultiCompany?l.companyId:[l.companyId],userName:n.userName,IsFavourite:!1},t.post((m.frmeworkV2Service?m.frmeworkV2Service:m.admincommonRemoteServer)+"GetCompanyDetails1",e,{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:i.encrypt({companyId:n.companyId?n.companyId:null,userName:n.userName?n.userName:null,moduleDetailId:i.getSessionItem("ModuleDetailId")?i.getSessionItem("ModuleDetailId"):"",type:null,Subtype:null,Values:{PermissionName:"View"}})}})},u.saveFavourites=function(e){var a=angular.copy(e.CompanyId);e.CompanyId="";var o=i.getSessionItem("ModuleDetailId");return t.post(m.admincommonRemoteServer+"savefavouritecompany",e,{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:i.encrypt({companyId:a,userName:n.userName?n.userName:null,moduleDetailId:o||"",type:null,Subtype:null,Values:{PermissionName:"Edit"}})}})},u.check_module_info=function(){var e=i.getCookie("moduleInfo");e&&-1==(e=JSON.parse(e)).name.toLowerCase().indexOf(app_configuration.app_config.current_module)&&i.removeCookie("moduleInfo")},u.company_modules=function(){n.companyId&&t.get(m.admincommonRemoteServer+"modulemaster",{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:i.encrypt({companyId:n.companyId?n.companyId:null,userName:n.userName?n.userName:null,moduleDetailId:i.getSessionItem("ModuleDetailId")?i.getSessionItem("ModuleDetailId"):"",type:null,Subtype:null,Values:{PermissionName:"View"}})}}).then(function(e){if(s=e.data,o.$broadcast("company_modules_loaded"),n.Modules={},0!==s.length)for(var a=0;a<=s.length-1;a++)"Active"===s[a].Status?n.Modules["is"+s[a].Name.split(" ")[0]]=!0:n.Modules["is"+s[a].Name.split(" ")[0]]=!1})},u.get_company_modules=function(){return s},u.current_module=function(a){if(0!=s.length)return s.filter(function(e){return e.Name==a+" Cursor"})[0];setTimeout(function(){u.current_module()},1)},u.is_session_expired=function(){return e.expired},u.re_direct_for_token=function(){e.redirectForToken()},u.getcompnaydetails=function(e){var a={domain:window.location.host.split(":")[0],path:"/"};if(!o){var o=!0;if(n.skey=e.data.sKey,i.setSkey(e.data.sKey),0!=e.data.Details.length){if("Active"!==e.data.Details[0].Status||"Active"!==e.data.Details[0].UserStatus)return n.companyId=e.data.Details[0].Id,n.companyName=e.data.Details[0].Name,void r.go("access_denied");n.companyId=e.data.Details[0].Id,n.companyName=e.data.Details[0].Name,n.dateFormat=e.data.Details[0].LocalDateTimeFormat||"dd/MM/yyyy",n.timeFormat=e.data.Details[0].TimeFormat||"hh:mm",n.currency=e.data.Details[0].LocalCurrencyFormat||"$",n.userFullName=e.data.Details[0].FirstName,n.userImage=e.data.Details[0].MediumImage,n.shortCode=e.data.Details[0].ShortCode,n.TenantId=e.data.Details[0].TenantId,e.data.Details[0].CompanyCursors&&i.setCookie("companyCursors",e.data.Details[0].CompanyCursors,a.path,a.domain),i.setCookie("company_details",{companyName:n.companyName,companyId:n.companyId,dateFormat:n.dateFormat,timeFormat:n.timeFormat,currency:n.currency,userImage:n.userImage,userFullName:n.userFullName,ShortCode:n.shortCode,IssetupDone:n.IssetupDone,skey:n.skey,TenantId:n.TenantId},a.path,a.domain)}else n.companyId=null,n.companyName="Smart cursors",n.dateFormat="dd/MM/yyyy",n.timeFormat="hh:mm",n.currency="$";l.isAuthCompany=!0,"Super User"!==n.role&&"Super Admin"!==n.role||"admin"===app_configuration.app_config.current_module?r.go(app_configuration.app_config.current_module+".dashboard"):window.location.replace(app_configuration.app_config.module_linking.admin),o=!1}},u.saveView=function(e){var a=m.admincommonRemoteServer+"saveuser";return t.post(a,e,{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:i.encrypt({companyId:n.companyId?n.companyId:null,userName:n.userName?n.userName:null,moduleDetailId:i.getSessionItem("ModuleDetailId")?i.getSessionItem("ModuleDetailId"):"",type:null,Subtype:null,Values:{PermissionName:"Edit"}})}})};var c=setInterval(function(){n.companyId&&(u.company_modules(),clearInterval(c))},1);return u}console.log('Note: this is to inform you that the  claim(s) are  not inserted. any of these "companyId","role"')}angular.module("appsworld").factory("authService",e),e.$inject=["$http","config","$state","serviceConfig","$rootScope","zStorageEnc"]}();
function fixWrapperHeight(){var i=$("#navigation").height(),e=$(".content").height();e<i&&$("#wrapper").css("min-height",i+"px"),e<i&&i<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-62+"px"),i<e&&e<$(window).height()&&$("#wrapper").css("min-height",$(window).height()-62+"px")}function setBodySmall(){$(this).width()<769?$("body").addClass("page-small"):($("body").removeClass("page-small"),$("body").removeClass("show-sidebar"))}$(document).ready(function(){fixWrapperHeight(),setBodySmall()}),$(window).bind("load",function(){$(".splash").css("display","none")}),$(window).bind("resize click",function(){setBodySmall(),setTimeout(function(){fixWrapperHeight()},300)});
!function(){"use strict";function a(a,m,c,e,p,o,t,n,r,u){var d=this;d.isPartner=m.isPartner;var l={domain:window.location.host.split(":")[0],path:"/"};d.chooseCompany=f;var i={ids:p.auth_company.isMultiCompany?p.auth_company.companyId:[p.auth_company.companyId],userName:m.userName};function y(){u.setCookie("company_details",{companyName:m.companyName,companyId:m.companyId,dateFormat:m.dateFormat,timeFormat:m.timeFormat,currency:m.currency,userImage:m.userImage,userFullName:m.userFullName,ShortCode:m.shortCode,IssetupDone:m.IssetupDone,skey:m.skey,TenantId:m.TenantId},l.path,l.domain)}function s(){d.companyName="";var a=1==d.myFavorate;i={ids:p.auth_company.isMultiCompany?p.auth_company.companyId:[p.auth_company.companyId],userName:m.userName,IsFavourite:a},d.locationurl=-1<c.current.name.indexOf("cursor"),p.company_details(i).then(function(a){new Date;if(m.skey=a.data.sKey,u.setSkey(a.data.sKey),p.auth_company.isMultiCompany||m.isPartner){m.userImage=a.data.Details[0].MediumImage,d.companies=a.data.Details;var e=[];if(d.cursorName)for(var o in d.companies)for(var n in d.companies[o].CompanyCursors)d.companies[o].CompanyCursors[n].ModuleName==d.cursorName&&e.push(d.companies[o]);for(var r in d.companies=d.cursorName?e:a.data.Details,d.companyList=d.cursorName?angular.copy(e):angular.copy(d.companies),d.companyList){var t;if(-1!=d.companyList[r].Name.indexOf(" ")){var i=d.companyList[r].Name.split(" ");t=(t=i[0].substr(0,1)+i[1].substr(0,1)).toUpperCase()}else t=(t=d.companyList[r].Name.substr(0,2)).toUpperCase();d.companyList[r].compSortName=t}var s=a.data.Personalization?JSON.parse(a.data.Personalization).ViewType:"";d.changeView=d.cursorName?"bar_view":s||"card_view"}else{if(0!=a.data.Details.length){if("Active"!==a.data.Details[0].Status||"Active"!==a.data.Details[0].UserStatus)return d.companies=a.data.Details,void(d.companyList=angular.copy(d.companies));m.companyId=a.data.Details[0].Id,m.companyName=a.data.Details[0].Name,m.dateFormat=a.data.Details[0].LocalDateTimeFormat||"dd/MM/yyyy",m.timeFormat=a.data.Details[0].TimeFormat||"hh:mm",m.currency=a.data.Details[0].LocalCurrencyFormat||"$",m.userFullName=a.data.Details[0].FirstName,m.userImage=a.data.Details[0].MediumImage,m.shortCode=a.data.Details[0].ShortCode,m.TenantId=a.data.Details[0].TenantId,a.data.Details[0].CompanyCursors&&u.setCookie("companyCursors",a.data.Details[0].CompanyCursors,l.path,l.domain)}else m.companyId=null,m.companyName="Smart cursors",m.dateFormat="dd/MM/yyyy",m.timeFormat="hh:mm",m.currency="$";y(),p.auth_company.isAuthCompany=!0,"Super User"!==m.role&&"Super Admin"!==m.role||"admin"===app_configuration.app_config.current_module?c.go(app_configuration.app_config.current_module+".dashboard"):window.location.replace(app_configuration.app_config.module_linking.admin)}})}function f(a,e,o){var n=new Date;if((n=t(n).format("YYYY-MM-DD"))<=t(a.ExpiryDate).format("YYYY-MM-DD"))if(m.companyId=a.Id,m.companyName=a.Name,m.dateFormat=a.LocalDateTimeFormat||"dd/MM/yyyy",m.timeFormat=a.TimeFormat||"hh:mm",m.currency=a.LocalCurrencyFormat||"$",m.userFullName=a.FirstName,m.userImage=a.MediumImage,m.shortCode=a.ShortCode,m.IssetupDone=a.IssetupDone,m.TenantId=a.TenantId,m.IndividualModuleDetails=!1,a.CompanyCursors&&u.setCookie("companyCursors",a.CompanyCursors,l.path,l.domain),y(),p.auth_company.isAuthCompany=!0,"bar_view"==d.changeView)e?window.location.replace(app_configuration.app_config.module_linking[o]):window.location.replace(app_configuration.app_config.module_linking.admin);else{var r={Username:m.userName,Personalization:JSON.stringify({ViewType:d.changeView})};p.saveView(r).then(function(a){e?window.location.replace("hr"==o||"bean"==o?app_configuration.app_config.module_linking[o]+"#/"+o:app_configuration.app_config.module_linking[o]):window.location.replace(app_configuration.app_config.module_linking.admin)})}}d.show=!1,d.viewType=function(a){"Grid"==a?(d.showGrid=!0,d.showBar=!1):(d.showGrid=!1,d.showBar=!0)},d.showGrid=!1,d.showBar=!0,d.showFavourites=function(a){a.IsFavourite=!a.IsFavourite;d.myFavorate;p.saveFavourites({CompanyId:a.Id,userName:m.userName,IsFavourite:a.IsFavourite}).then(function(a){d.favouriteCompanyies=a.data,p.company_details(i).then(function(a){d.companies=a.data.Details;var e=[];if(d.cursorName)for(var o in d.companies)for(var n in d.companies[o].CompanyCursors)d.companies[o].CompanyCursors[n].ModuleName==d.cursorName&&e.push(d.companies[o]);for(var r in d.companies=d.cursorName?e:a.data.Details,d.companyList=d.cursorName?angular.copy(e):angular.copy(d.companies),d.companyList){var t;if(-1!=d.companyList[r].Name.indexOf(" ")){var i=d.companyList[r].Name.split(" ");t=(t=i[0].substr(0,1)+i[1].substr(0,1)).toUpperCase()}else t=(t=d.companyList[r].Name.substr(0,2)).toUpperCase();d.companyList[r].compSortName=t}$("#Button1").prop("checked",!0)})})},d.onlyFavourites=function(a){"fav"==a?(d.companyList=d.companies.filter(function(a){return a.IsFavourite}),d.companyList.length<1&&($("#Button1").prop("checked",!0),d.companyList=angular.copy(d.companies),r.notify.warning("You dont have favourite Entities"))):d.companyList=angular.copy(d.companies)},d.filterCompaney=function(a){{if(!d.companyName)return a;if(-1<a.Name.indexOf(d.companyName))return a}},d.cursorChange1=function(){d.changeView=d.cursorName?"bar_view":"card_view";var a=d.cursorName;s(),e.$broadcast("onCursorChange1",a)},d.activate_company_selection=s,d.cursorName="",d.name=mgr.profile.name?mgr.profile.name:m.userName?m.userName:mgr.profile.email,d.onCompanySelectWithCursor=function(a,e){"Active"===a.Status&&"Active"===a.UserStatus&&f(a,!0,e.ModuleName.substring(0,e.ModuleName.indexOf(" ")).toLowerCase())},d.cursorChange=function(){d.changeView=d.cursorName?"bar_view":"card_view";var a=d.cursorName;s(),e.$broadcast("onCursorChange",a)},s()}angular.module("appsworld").controller("routeMediate",a),a.$inject=["$http","config","$state","$rootScope","authService","$cookies","$moment","$stateParams","commonService","zStorageEnc"]}();
!function(){"use strict";function e(e,t,i,n,r,o,u,a,s,c){var p=this;function l(e){p.permissionBar=e.current.data.isPermissionBarRequired,d()}p.permissionBar=!0,p.pageTitle=d,p.role=n.role,p.profileStatus=0,p.checkRole=function(e){return n.role.toLowerCase()===e.toLowerCase()},p.isContinueSetup=function(){return 100!=n.setupPercentage&&"Super User"!=n.role},p.setupPercentage=function(){return n.setupPercentage},p.onSetupButtonsClick=function(e){"Nothanks"==e?n.setupPercentage=100:-1<app_configuration.app_config.current_module.indexOf("admin")?i.go(app_configuration.app_config.current_module+".intialsetup"):i.go("intialsetup")},p.isNav=function(){return"true"==u.getItem("IsSetupRoute")},p.showProgress=function(){return-1<i.current.name.indexOf("intialsetup")},p.isContinueSetUpBtn=function(){return-1==i.current.name.indexOf("intialsetup")},p.nvigateTo=function(e){i.go(e)},p.menudataLoded=function(){return!!f||!!n.IndividualModuleDetails},p.prevState=function(){a.history.back()},p.isshowheaader=function(){var e=s.auth_company.isMultiCompany||n.companyName&&n.companyId;return!!e||0==e},p.isCompanysettingLoaded=function(){return 0!==Object.keys(c).length},n.displayLabel=u.getItem("__breadcrumbLabel"),u.removeItem("__breadcrumbLabel"),p.navigate_to=function(e,t){e&&i.go(e,t)},e.$on("$stateChangeStart",function(){p.mode=""}),e.$on("refresh_permissions",function(){l(i)}),e.$on("set_profile_status",function(e,t){p.profileStatus=t}),e.$state=i,e.state=i,p.progressOptions=r.profileStatusOptions(),p.getPerWidth=function(){return"{ width:"+n.setupPercentage+"%}"};var g=u.getSessionItem("ModuleDetailId"),f=g||u.getItem("ModuleDetailId");function d(){var e=[];if(p.sateList=[],i.current){var t;e=i.current.name.split(".");var n=!1;for(var r in e){t=t?t+"."+e[r]:e[r];var o={};if(i.get(t)&&i.get(t).data.permissionKey)if((o=angular.copy(i.get(t))).data.gridState&&!n){var a=angular.copy(i.get(o.data.gridState));p.sateList.push(a),n=!0}else p.sateList.push(o)}}return p.breadCrumbsValue=u.getSessionItem("BreabcrumbName"),p.sateList}d(),t.$on("$stateChangeSuccess",function(){l(i)}),p.reportview=function(){t.$broadcast("reportbtn","change")}}angular.module("appsworld").controller("contentController",e),e.$inject=["$scope","$rootScope","$state","config","commonService","breadCrumbsFactory","zStorageEnc","$window","authService","companysettings"]}();
var module_linking_config=function(){"use strict";return{publishEnv:{core:"http://202.153.45.142/appsworld.core.newtest",admin:"http://202.153.45.142/appsworld.admin.newtest",client:"http://202.153.45.142/appsworld.client.newtest",hr:"http://202.153.45.142/appsworld.hr.newtest",bean:"http://202.153.45.142/appsworld.bean.newtest",audit:"http://202.153.45.142/appsworld.audit.newtest",doc:"http://202.153.45.142:9001/_trust/",knowledge:"http://202.153.45.142/appsworld.knowledge.newtest",workflow:"http://202.153.45.142/appsworld.workflow.newtest",tax:"http://202.153.45.142/appsworld.tax.newtest"},devEnv:{core:"http://localhost:37046",admin:"http://localhost:37047",client:"http://localhost:37048",hr:"http://localhost:37049",bean:"http://localhost:37050",audit:"http://localhost:37051",doc:"http://202.153.45.142:9001/_trust/",knowledge:"http://localhost:37058",workflow:"http://localhost:37059",tax:"http://localhost:37060"}}}();
!function(){"use strict";var e=angular.module("common.bootstrap",["ui.bootstrap"]);function t(s,e,t){var a={deleteDialog:function(e,t){return o("Confirm "+t,"Are you sure, do you want "+t+" The "+(e=e||"item")+"?","ok","cancel")},confirmationDialog:o,primaryContact:function(e,t,a,o,n){var i={templateUrl:"isPrimaryContact.tpl.html",controller:d,keyboard:!0,resolve:{options:function(){return{field1:e,title:t,message:a,okText:o,cancelText:n}}}};return s.open(i).result},servicedeleteDialog:function(e,t,a){var o={templateUrl:"modalDialog.tpl.html",controller:n,keyboard:!0,resolve:{options:function(){return{title:e,message:t,val:a,okText:"OK",cancelText:"CANCEL"}}}};return s.open(o).result},servicedeleteDialog1:function(e,t,a){var o={templateUrl:"modalDialog.tpl.html",controller:i,keyboard:!0,resolve:{options:function(){return{title:e,message:t,val:a,okText:"OK",cancelText:"CANCEL"}}}};return s.open(o).result},confirmationDialogedi:function(e,t,a,o,n,i){var l={templateUrl:"modalDialogedit.tpl.html",controller:c,keyboard:!0,resolve:{options:function(){return{title:e,message:t,okText:a,cancelText:o,isview:n,tempId:i}}}};return s.open(l).result},sendmail:function(e,t){var a={templateUrl:"CustomDirectives/EmailDialog/emailSend.html",controller:r,backdrop:"static",windowClass:"modelpopup-semdmail",size:"lg",resolve:{options:function(){return{refObj:e,Savedform:t}}}};return s.open(a).result},PreviewTemp:function(e){var t={templateUrl:"isPreviewtemplate.tpl.html",controller:u,backdrop:"static",windowClass:"modelpopup-semdmail",size:"lg",resolve:{options:function(){return{refObj:e}}}};return s.open(t).result}};return e.put("modalDialogedit.tpl.html",'<div style="min-width:800px;" view-mode="true"><div class="color-line"></div>    <div class="modal-header" >        <h4 class="row col-md-12">{{title}}</h4>    </div><div class="tem-height"><div ckeditor="" ng-model="msgtext">    </div>    </div>    <div class="modal-footer">        <button class="btn btn-cancel" ng-if="cancelText" data-ng-click="cancel()">{{cancelText}}<i class="cancel-icon"></i></button>    </div></div>'),e.put("modalDialog.tpl.html",'<div ><div class="color-line"></div>    <div class="modal-header" >         <h4 class="modal-title">{{title}} {{FName}}</h4>    </div><div class="col-md-12" id="validationDiv" ng-show="isValidationRequired"><div class="alert alert-danger alert-dismissable"><p ng-repeat="vms in validationMessages"><i class="fa fa-exclamation-circle"></i>{{vms}}</p></div></div>         <div class="modal-body">            <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-prime" data-ng-click="ok()">{{okText}}<i class="ok-icon"></i></button>        <button class="btn btn-cancel" ng-if="cancelText" data-ng-click="cancel()">{{cancelText}}<i class="cancel-icon"></i></button>    </div></div>'),e.put("isPrimaryContact.tpl.html",'<div>    <div class="modal-header">        <h4 class="row col-md-12">{{title}} - {{field1}}</h4>    </div>    <div class="modal-body">    <br/>        <p> {{message}} - {{field1}} ?</p>    </div>    <div class="modal-footer">        <button class="btn btn-cancel" data-ng-click="cancel()">{{cancelText}}<i class="cancel-icon"></i></button>        <button class="btn btn-prime" data-ng-click="ok()">{{okText}}<i class="ok-icon"></i></button>    </div></div>'),e.put("isPreviewtemplate.tpl.html",'<div class="modelpopup-semdmail">    <div z-loader>    </div><div>    <div class="modal-body">    <div id="preview" ng-bind-html="templateContent" class="word-break" ng-if="templateContent">    </div><div class="modal-footer">     <button type="submit" class="btn btn-prime" ng-if="previewobj.Permissions.Email" ng-click="openemailModel()">Email<i class="email-icon"></i></button>         <button type="button" class="btn btn-prime" ng-if="previewobj.Permissions.Download" ng-click="downloadFile()">Download<i class="btn-download-icon"></i></button>          <button type="submit" class="btn btn-cancel" ng-click="close()">Close<i class="cancel-icon"></i></button>    </div></div>'),a;function o(e,t,a,o,n){var i={templateUrl:"modalDialog.tpl.html",controller:l,backdrop:"static",keyboard:!0,resolve:{options:function(){return{title:e,message:t,okText:a,cancelText:o,FName:n}}}};return s.open(i).result}}function c(a,e,t,o,n){a.title=t.title||"Title",a.msgtext=t.message||"",a.okText=t.okText||"OK",a.isView="view"===t.isview,a.cancelText=t.cancelText,a.tempId=t.tempId,a.$on("kendoWidgetCreated",function(e,t){a.isView&&(t.body.contentEditable=!1)}),a.ok=function(){o.mesgmodel=a.msgtext,e.close("ok")},a.cancel=function(){e.close("cancel")}}function l(e,t,a,o){e.title=a.title||"Title",e.message=a.message||"",e.FName=a.FName||"",e.okText=a.okText||"OK",e.cancelText=a.cancelText,e.ok=function(){t.close("ok")},e.cancel=function(){t.close("cancel")}}function n(t,a,o,e,n,i){"lead"===e.title?(t.statemesg="Delete",t.screenname="Lead"):(t.screenname="Service Group","Active"==e.message?t.statemesg="Inactive":t.statemesg="Active"),t.title=" Confirm "+t.statemesg||"Title",t.message="Are you sure, do you want to "+t.statemesg+" The "+t.screenname,t.status=e.message,t.okText=e.okText||"OK",t.cancelText=e.cancelText,t.isValidationRequired=!1,t.validationMessages=[],t.value=e.val,t.ok=function(){"Lead"===t.screenname?i.LeadDeleteData(t.value).success(function(e){a.$broadcast("closemodel",{data:{status:"saveContact"}}),o.close("ok")}).error(function(e){t.isValidationRequired=!0,t.validationMessages.push(e)}):n.enableData(t.value,t.status).then(function(e){return"Update Successfull"==e.data?(a.$broadcast("closemodel",{data:{status:"saveContact"}}),void o.close("ok")):(t.isValidationRequired=!0,void t.validationMessages.push(e.data))})},t.cancel=function(){a.$broadcast("closemodel",{data:{status:"saveContact"}}),o.close("cancel")}}function i(t,a,o,e,n){e.status,"Active"==e.message?t.statemesg="Inactive":t.statemesg="Active",t.title=" Confirm "+t.statemesg||"Title",t.message="Are you sure, do you want to "+t.statemesg+" The Service",t.status=e.message,t.okText=e.okText||"OK",t.cancelText=e.cancelText,t.isValidationRequired=!1,t.validationMessages=[],t.value=e.val,t.ok=function(){n.enableData1(t.value,t.status).then(function(e){return"Update Successfull"==e.data?(a.$broadcast("closemodel",{data:{status:"saveContact"}}),void o.close("ok")):(t.isValidationRequired=!0,void t.validationMessages.push(e.data))})},t.cancel=function(){a.$broadcast("closemodel",{data:{status:"saveContact"}}),o.close("cancel")}}function d(e,t,a){e.field1=a.field1||"Title",e.title=a.title||"Title",e.message=a.message||"",e.okText=a.okText||"OK",e.cancelText=a.cancelText||"Cancel",e.ok=function(){t.close("Yes")},e.cancel=function(){t.close("No")}}function r(a,o,n,e,i,t,l,s,c,d){function r(e){e?d.getTemplateDetails(a.sendMailData,e).then(function(e){a.sendmailDetails=e.data}):(a.sendmailDetails=a.sendMailData,a.sendmailDetails.TemplateName=null)}function u(e){return a.isValidationRequired=!0,a.validationMessages.push(e),window.scrollTo(0,0),!1}a.sendmailDetails=e.refObj,a.sendMailData=angular.copy(e.refObj),a.sendMailsave=function(){{if(a.isValidationRequired=!1,a.validationMessages=[],1==i.validate("emailForm").isValidationRequired)return window.scrollTo(0,0),u("Invalid data,Please verify!"),!1;var e=$("#toEmail").val();if(a.ToEmail=!!e&&d.getEmailValue(e),"boolean"==typeof a.ToEmail||""==a.ToEmail)return u("Invalid Email!"),!1;if(a.sendmailDetails.BCcMail){$("#ccEmail").val();if(a.CcMail=d.getEmailValue(a.sendmailDetails.BCcMail),"boolean"==typeof a.CcMail)return u("Invalid Email!"),!1}var t=d.sendEmail(a.sendmailDetails,a.sendMailData,a.ToEmail,a.CcMail).success(function(e){l.notify.success("Email sent successfully"),n.close()});t.error(function(e){return u(e.Message),!1})}},a.cancel=function(){n.close()},a.From=t.userName,a.changeContent=r,d.getTemplatesLu(a.sendMailData).then(function(e){a.TemplateLu=e.data,r(a.sendMailData.ScreenName)}),a.downloadFile=function(){var e=o.getDownloadId(obj);e.then(function(e){var t=e.data;o.getDownloadFile(t).then(function(e){l.notify.success("Downloaded Successfully")})}),e.error(function(e){l.notify.warning(e.Message)})},a.cancel=function(){n.close()},a.downloadPathFile=function(){window.location.href=a.downloadFilePath,l.notify.success("Downloaded Successfully")}}function u(t,a,o,e,n,i,l,s,c,d){var r;t.previewobj=e.refObj,t.ok=function(){o.close("Yes")},t.close=function(){o.close()},(r=d.getPreview(t.previewobj)).then(function(e){t.templateContent=n.trustAsHtml(e.data.TemplateContent),t.downloadFilePath=e.data.Attachement}),r.error(function(e){l.notify.warning(e.Message)}),t.downloadFile=function(){t.previewobj.Id=t.previewobj.ScreenId;var e=a.getDownloadId(t.previewobj);e.then(function(e){var t=e.data;a.getDownloadFile(t),o.close(),l.notify.success("Downloaded Successfully")}),e.error(function(e){l.notify.warning(e.Message)})},t.openemailModel=function(){o.close("Sendmail")}}e.factory("bootstrap.dialog",t),t.$inject=["$uibModal","$templateCache","config"],e.controller("ModalInstanceedit",c),c.$inject=["$scope","$uibModalInstance","options","$rootScope","serviceFactory"],e.controller("ModalInstance",l),l.$inject=["$scope","$uibModalInstance","options","$rootScope"],e.controller("serviceDisableModalInstance",n),n.$inject=["$scope","$rootScope","$uibModalInstance","options","serviceGroupFactory","leadAccountDataContext"],e.controller("serviceDisableModalInstance1",i),i.$inject=["$scope","$rootScope","$uibModalInstance","options","serviceFactory"],e.controller("ModalInstanceisPrimaryContact",d),d.$inject=["$scope","$uibModalInstance","options"],e.controller("ModalInstanceisSendmail",r),r.$inject=["$scope","masterGridDataContext","$uibModalInstance","options","formValidate","config","commonService","serviceConfig","zStorageEnc","sendmailContext"],e.controller("ModalInstanceisPreview",u),u.$inject=["$scope","masterGridDataContext","$uibModalInstance","options","$sce","config","commonService","serviceConfig","zStorageEnc","sendmailContext"]}();
function propsFilter(){return function(r,i){var l=[];return angular.isArray(r)?r.forEach(function(r){for(var e=!1,o=Object.keys(i),t=0;t<o.length;t++){var a=o[t],n=i[a].toLowerCase();if(-1!==r[a].toString().toLowerCase().indexOf(n)){e=!0;break}}e&&l.push(r)}):l=r,l}}angular.module("appsworld").filter("propsFilter",propsFilter);
!function(){"use strict";function e(s,r,d,o){return{require:"?ngModel",restrict:"EC",templateUrl:"ckEditor.html",scope:{data:"=",isView:"=",ckId:"=",draggableId:"=",variableNames:"=?",dataBinding:"=ngModel",isBasicToolBar:"=?",isMax:"=?"},link:function(i,e,t,a){var n,l=[];o.remove("PHPSESSID",{path:"/",domain:window.location.hostname}),i.getCkEditor=function(){if(CKEDITOR.instances[i.ckId])return(n=CKEDITOR.instances[i.ckId]).readOnly=i.isView,void(n.config.wordcount={showCharCount:!0,countSpacesAsChars:!0,maxCharCount:i.isMax?i.isMax:-1});(n=CKEDITOR.replace(document.getElementById(i.ckId),{allowedContent:!0,readonly:!0,return:!0,toolbar:i.isBasicToolBar?[["Styles","Format","Font","FontSize"],["Bold","Italic","Underline","Print"],["NumberedList","BulletedList","JustifyLeft","JustifyCenter","JustifyRight"]]:null})).readOnly=i.isView,n.config.wordcount={showCharCount:!0,countSpacesAsChars:!0,maxCharCount:i.isMax?i.isMax:-1},i.variableNames=i.variableNames?i.variableNames:i.data?"Variables":null,""==i.data&&i.data||i.$watch("data",function(){"string"==typeof i.data&&function(e){return d.getEntities(e)}(i.data).then(function(e){return i.data=e.data})}),n.on("instanceReady",function(e){a&&(!0,a.$viewValue&&l.push(a.$viewValue),n.setData(l[0]||"<span></span>",function(){}))}),e.bind("$destroy",function(){n.destroy(!1)}),a&&(n.on("change",function(){s(function(){var e=n.getData();"<span></span>"==e&&(e=null),a.$setViewValue(e)},0)}),a.$render=function(e){l=[],a.$viewValue?(l.push(a.$viewValue),!0):(a.$setViewValue(null),a.$viewValue=null),n.setData(l[0]||"<span></span>",function(){})}),i.showStates=function(e){e.active=!e.active},n.on("blur",function(e){i.placeId=i.ckId,i.otherTextId=null}),i.draggableId&&CKEDITOR.document.getById(i.draggableId).on("dragstart",function(e){var t=e.data.$.target,a=(CKEDITOR.plugins.clipboard.initDragDataTransfer(e),"");if(t.innerText){var i=t.innerText.split(".");for(var n in i)a=a?a+"."+i[n].trim():i[n].trim()}a="{{"+a+"}}";e.data.dataTransfer.setData("text/html",a);$(".bg-lightblue").removeClass("bg-lightblue")}),i.insertData=function(){if(i.detailInsert)if(i.detailinsert="",i.detailinsert="{{"+i.variableType+"."+i.detailInsert+"}}",i.placeId)i.placeId===i.ckId&&(CKEDITOR.instances[i.ckId].insertText(i.detailinsert),i.detailInsert=null);else if(i.otherTextId){var e=$("#"+i.otherTextId).val();$("#"+i.otherTextId).val(e+i.detailinsert),i.detailInsert=null}else i.detailinsert="",d.notify.warning("Please place the cursor to insert the variable");else d.notify.warning("Please select one Variable")},r.$on("textId",function(e,t){i.otherTextId=t,i.placeId=null}),i.getDetail=function(e,t,a){i.detailInsert=e,i.variableType=t,a&&i.insertData()}}}}}angular.module("ckEditorStructure",["ckEditor.html"]).directive("ckEditor",e),e.$inject=["$timeout","$rootScope","commonService","$cookies"]}(),angular.module("ckEditor.html",[]).run(["$templateCache",function(e){e.put("ckEditor.html","<div class='row' id='{{draggableId}}'><div class=\"templateediter-height\" ng-class=\"{'col-md-9':data,'col-md-12':!data}\"><textarea id='{{ckId}}' ng-bind='getCkEditor()' ng-model='dataBinding' ng-disabled='isView'></textarea></div><div class=\"col-md-3\">"+'<h4 class="color-wrapper-border" ng-if="data">{{variableNames}}</h4><div class="mtm height-auto"><div ng-show="data.length===0">There are no Variables</div><div class="contact-box overflow-height-bar-main" id=\'{{draggableId}}\'><ul class="p-0"><li ng-repeat="(key , val) in data track by $index" ng-show="data.length!=0"><span ng-click="showStates(item)" ng-init="item.active=false"><h5 class="tempvable cursor-pointer">&nbsp;<i ng-class="{\'fa fa-caret-right\' : !item.active,\'fa fa-caret-down\' : item.active}" class="w-10"></i>&nbsp;&nbsp;&nbsp;{{key}}<span ng-if="key===\'Lead\'">/Account<span></h5></span><div class="row"><div class="col-md-12"><ul class="pl-0 cursor-pointer contact-box overflow-height-bar"><li draggable="true" ng-click="getDetail(key2,key,null);$parent.selectedIndex = $index" ng-dblclick="getDetail(key2,key,\'Double\')"class="temp-li template h-card" ng-repeat="(key2 , val2) in val" ng-show="item.active"><span class="display-block" ng-class="{\'bg-lightblue\':$parent.selectedIndex== $index,}"><span class="opacity-zero"> {{key}}.</span><span class="key-position">{{key2}}</span> </span></li></ul></div></div></li></ul></div><div class="text-right section-space10" ng-if="data"><button type="submit" class="btn btn-prime insert-bottom" ng-disabled="isView" ng-click="insertData()">Insert<i class="upload-icon"></i></button></div></div></div></div>')}]);
function pageTitle(n,r){return{link:function(e,o){n.$on("$stateChangeStart",function(e,n,i,t,a){var l="SmartCursors";n.data&&n.data.pageTitle&&(l="SmartCursors | "+n.data.pageTitle),r(function(){o.text(l)})})}}}function sideNavigation(e){return{restrict:"A",link:function(e,n){n.metisMenu(),$('#side-menu a:not([href$="\\#"])').click(function(){$(window).width()<769&&$("body").toggleClass("show-sidebar")})}}}function minimalizaMenu(e){return{restrict:"EA",template:'<div class="header-link hide-menu" ng-click="minimalize()"><i class="fa fa-bars"></i></div>',controller:["$scope","$element",function(e,n){e.minimalize=function(){$(window).width()<769?$("body").toggleClass("show-sidebar"):$("body").toggleClass("hide-sidebar")}}]}}function sparkline(){return{restrict:"A",scope:{sparkData:"=",sparkOptions:"="},link:function(e,n,i){e.$watch(e.sparkData,function(){t()}),e.$watch(e.sparkOptions,function(){t()});var t=function(){$(n).sparkline(e.sparkData,e.sparkOptions)}}}}function icheck(e){return{restrict:"A",require:"ngModel",link:function(i,t,a,l){return e(function(){var n;return n=a.value,i.$watch(a.ngModel,function(e){$(t).iCheck("update")}),$(t).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(e){if("checkbox"===$(t).attr("type")&&a.ngModel&&i.$apply(function(){return l.$setViewValue(e.target.checked)}),"radio"===$(t).attr("type")&&a.ngModel)return i.$apply(function(){return l.$setViewValue(n)})})})}}}function panelTools(l){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools.html",controller:["$scope","$element",function(e,a){e.showhide=function(){var e=a.closest("div.hpanel"),n=a.find("i:first"),i=e.find("div.panel-body"),t=e.find("div.panel-footer");i.slideToggle(300),t.slideToggle(200),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("panel-collapse"),l(function(){e.resize(),e.find("[id^=map-]").resize()},50)},e.closebox=function(){a.closest("div.hpanel").remove()}}]}}function panelToolsFullscreen(l){return{restrict:"A",scope:!0,templateUrl:"views/common/panel_tools_fullscreen.html",controller:["$scope","$element",function(e,a){e.showhide=function(){var e=a.closest("div.hpanel"),n=a.find("i:first"),i=e.find("div.panel-body"),t=e.find("div.panel-footer");i.slideToggle(300),t.slideToggle(200),n.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),e.toggleClass("").toggleClass("panel-collapse"),l(function(){e.resize(),e.find("[id^=map-]").resize()},50)},e.closebox=function(){a.closest("div.hpanel").remove(),$("body").hasClass("fullscreen-panel-mode")&&$("body").removeClass("fullscreen-panel-mode")},e.fullscreen=function(){var e=a.closest("div.hpanel"),n=a.find("i:first");$("body").toggleClass("fullscreen-panel-mode"),n.toggleClass("fa-expand").toggleClass("fa-compress"),e.toggleClass("fullscreen"),setTimeout(function(){$(window).trigger("resize")},100)}}]}}function smallHeader(){return{restrict:"A",scope:!0,controller:["$scope","$element",function(e,i){e.small=function(){var e=i.find("i:first"),n=i.find("#hbreadcrumb");i.toggleClass("small-header"),n.toggleClass("m-t-lg"),e.toggleClass("fa-arrow-up").toggleClass("fa-arrow-down")}}]}}function animatePanel(o,r){return{restrict:"A",link:function(e,n,i){var t=.06,a=Math.abs(t)+0;r.current.name;i.effect||(i.effect="zoomIn"),t=i.delay?i.delay/10:.06,i.child?i.child="."+i.child:i.child=".row > div";var l=n.find(i.child);l.addClass("opacity-0");l.length;o(function(){(l=n.find(i.child)).addClass("stagger").addClass("animated-panel").addClass(i.effect);var e=(l.length+10)*t*1e4/10;l.each(function(e,n){a+=t;var i=Math.round(10*a)/10;$(n).css("animation-delay",i+"s"),$(n).removeClass("opacity-0")}),o(function(){$(".stagger").css("animation",""),$(".stagger").removeClass(i.effect).removeClass("animated-panel").removeClass("stagger"),l.resize()},e)})}}}function landingScrollspy(){return{restrict:"A",link:function(e,n,i){n.scrollspy({target:".navbar-fixed-top",offset:80})}}}function clockPicker(){return{restrict:"A",link:function(e,n){n.clockpicker({twelvehour:!0,donetext:"OK"})}}}function dateTimePicker(){return{require:"?ngModel",restrict:"AE",scope:{pick12HourFormat:"@",language:"@",useCurrent:"@",location:"@"},link:function(e,n,i){n.datetimepicker({pick12HourFormat:e.pick12HourFormat,language:e.language,useCurrent:e.useCurrent}),n.on("blur",function(){})}}}angular.module("appsworld").directive("pageTitle",pageTitle).directive("sideNavigation",sideNavigation).directive("minimalizaMenu",minimalizaMenu).directive("sparkline",sparkline).directive("icheck",icheck).directive("panelTools",panelTools).directive("panelToolsFullscreen",panelToolsFullscreen).directive("smallHeader",smallHeader).directive("animatePanel",animatePanel).directive("landingScrollspy",landingScrollspy).directive("clockPicker",clockPicker).directive("dateTimePicker",dateTimePicker),pageTitle.$inject=["$rootScope","$timeout"],sideNavigation.$inject=["$timeout"],minimalizaMenu.$inject=["$rootScope"],sparkline.$inject=[],icheck.$inject=["$timeout"],panelTools.$inject=["$timeout"],panelToolsFullscreen.$inject=["$timeout"],smallHeader.$inject=[],animatePanel.$inject=["$timeout","$state"],landingScrollspy.$inject=[],clockPicker.$inject=[],dateTimePicker.$inject=[];
function appCtrl(a,o,e){o.checkOne=!0,o.barProfileData=[5,6,7,2,0,4,2,4,5,7,2,4,12,11,4],o.barProfileOptions={type:"bar",barWidth:7,height:"30px",barColor:"#62cb31",negBarColor:"#53ac2a"},o.chartIncomeData=[{label:"line",data:[[1,10],[2,26],[3,16],[4,36],[5,32],[6,51]]}],o.chartIncomeOptions={series:{lines:{show:!0,lineWidth:0,fill:!0,fillColor:"#64cc34"}},colors:["#62cb31"],grid:{show:!1},legend:{show:!1}},o.dynamicTooltip="Hello, World!",o.htmlTooltip="I've been made <b>bold</b>!",o.dynamicTooltipText="Dynamic",o.dynamicPopover="Hello, World!",o.dynamicPopoverTitle="Title",o.totalItems=64,o.currentPage=4,o.setPage=function(e){o.currentPage=e},o.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],o.getLocation=function(e){return a.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,sensor:!1}}).then(function(e){return e.data.results.map(function(e){return e.formatted_address})})},o.rate=7,o.max=10,o.hoveringOver=function(e){o.overStar=e,o.percent=e/this.max*100},o.groups=[{title:"Dynamic Group Header - 1",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "},{title:"Dynamic Group Header - 2",content:"A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine. "}],o.oneAtATime=!0;o.chartUsersData=[[[0,55],[1,48],[2,40],[3,36],[4,40],[5,60],[6,50],[7,51]],[[0,56],[1,49],[2,41],[3,38],[4,46],[5,67],[6,57],[7,59]]],o.chartUsersOptions={series:{splines:{show:!0,tension:.4,lineWidth:1,fill:.4}},grid:{tickColor:"#f0f0f0",borderWidth:1,borderColor:"f0f0f0",color:"#6a6c6f"},colors:["#62cb31","#efefef"]},o.PieChart={data:[1,5],options:{fill:["#62cb31","#edf0f5"]}},o.PieChart2={data:[226,360],options:{fill:["#62cb31","#edf0f5"]}},o.PieChart3={data:[.52,1.561],options:{fill:["#62cb31","#edf0f5"]}},o.PieChart4={data:[1,4],options:{fill:["#62cb31","#edf0f5"]}},o.PieChart5={data:[226,134],options:{fill:["#62cb31","#edf0f5"]}},o.PieChart6={data:[.52,1.041],options:{fill:["#62cb31","#edf0f5"]}},o.BarChart={data:[5,3,9,6,5,9,7,3,5,2],options:{fill:["#dbdbdb","#62cb31"]}},o.LineChart={data:[5,9,7,3,5,2,5,3,9,6,5,9,4,7,3,2,9,8,7,4,5,1,2,9,5,4,7],options:{fill:"#62cb31",stroke:"#62cb31",width:64}},o.stanimation="bounceIn",o.runIt=!0,o.runAnimation=function(){o.runIt=!1,e(function(){o.runIt=!0},100)}}angular.module("appsworld").controller("appCtrl",appCtrl),appCtrl.$inject=["$http","$scope","$timeout"];
function sweetAlert(e,n){var i=n.swal;return{swal:function(n,t,o){e(function(){i(n,"function"==typeof t?function(n){e(function(){t(n)})}:t,o)},200)},success:function(n,t){e(function(){i(n,t,"success")},200)},error:function(n,t){e(function(){i(n,t,"error")},200)},warning:function(n,t){e(function(){i(n,t,"warning")},200)},info:function(n,t){e(function(){i(n,t,"info")},200)}}}sweetAlert.$inject=["$timeout","$window"],angular.module("appsworld").factory("sweetAlert",sweetAlert);
function alertsCtrl(e,t,o){e.demo1=function(){t.swal({title:"Welcome in Alerts",text:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})},e.demo2=function(){t.swal({title:"Good job!",text:"You clicked the button!",type:"success"})},e.demo3=function(){t.swal({title:"Are you sure?",text:"Your will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!"},function(){t.swal("Booyah!")})},e.demo4=function(){t.swal({title:"Are you sure?",text:"Your will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?t.swal("Deleted!","Your imaginary file has been deleted.","success"):t.swal("Cancelled","Your imaginary file is safe :)","error")})},e.msg="Hello! This is a sample message!",e.demo=function(){o({message:e.msg,classes:e.classes,templateUrl:e.template})},e.closeAll=function(){o.closeAll()},e.homerTemplate="views/notification/notify.html",e.homerDemo1=function(){o({message:"Info - This is a Homer info notification",classes:"alert-info",templateUrl:e.homerTemplate})},e.homerDemo2=function(){o({message:"Success - This is a Homer success notification",classes:"alert-success",templateUrl:e.homerTemplate})},e.homerDemo3=function(){o({message:"Warning - This is a Homer warning notification",classes:"alert-warning",templateUrl:e.homerTemplate})},e.homerDemo4=function(){o({message:"Danger - This is a Homer danger notification",classes:"alert-danger",templateUrl:e.homerTemplate})}}angular.module("appsworld").controller("alertsCtrl",alertsCtrl),alertsCtrl.$inject=["$scope","sweetAlert","notify"];
function modalCtrl(l,o){l.open=function(){o.open({templateUrl:"views/modal/modal_example.html",controller:ModalInstanceCtrl})},l.open1=function(){o.open({templateUrl:"views/modal/modal_example1.html",controller:ModalInstanceCtrl})},l.open3=function(l){o.open({templateUrl:"views/modal/modal_example3.html",size:l,controller:ModalInstanceCtrl})},l.open2=function(){o.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-info"})},l.open4=function(){o.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-warning"})},l.open5=function(){o.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-success"})},l.open6=function(){o.open({templateUrl:"views/modal/modal_example2.html",controller:ModalInstanceCtrl,windowClass:"hmodal-danger"})}}function ModalInstanceCtrl(l,o){l.ok=function(){o.close()},l.cancel=function(){o.dismiss("cancel")}}angular.module("appsworld").controller("modalCtrl",modalCtrl),modalCtrl.$inject=["$scope","$uibModal"],ModalInstanceCtrl.$inject=["$scope","$uibModalInstance"];
function charts_flotCtrl(o){o.flotBarOptions={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:.6},{opacity:.6}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{color:"#e4e5e7",hoverable:!0,clickable:!0,tickColor:"#D4D4D4",borderWidth:0,borderColor:"e4e5e7"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}},o.flotBarOptionsDas={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{show:!1},legend:{show:!1}},o.flotBarOptionsWid={series:{bars:{show:!0,barWidth:.8,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]},lineWidth:1}},xaxis:{tickDecimals:0},colors:["#3498db"],grid:{show:!1},legend:{show:!1}},o.flotChartData=[{label:"bar",data:[[1,12],[2,14],[3,18],[4,24],[5,32],[6,22]]}],o.flotLineAreaData=[{label:"line",data:[[1,34],[2,22],[3,19],[4,12],[5,32],[6,54],[7,23],[8,57],[9,12],[10,24],[11,44],[12,64],[13,21]]}];o.chartUsersData=[[[0,26],[1,24],[2,29],[3,26],[4,33],[5,26],[6,36],[7,28]]],o.chartUsersOptions={series:{splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},colors:["#62cb31","#efefef"]},o.pieChartData=[{label:"Data 1",data:16,color:"#84c465"},{label:"Data 2",data:6,color:"#8dd76a"},{label:"Data 3",data:22,color:"#a2c98f"},{label:"Data 4",data:32,color:"#c7eeb4"}],o.pieChartDataDas=[{label:"East",data:16,color:"#62cb31"},{label:"West",data:6,color:"#A4E585"},{label:"North",data:22,color:"#368410"},{label:"South",data:32,color:"#8DE563"}],o.pieChartDataWid=[{label:"Data 1",data:16,color:"#fad57c"},{label:"Data 2",data:6,color:"#fde5ad"},{label:"Data 3",data:22,color:"#fcc43c"},{label:"Data 4",data:32,color:"#ffb606"}],o.pieChartOptions={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},o.lineChartData=[{label:"line",data:[[1,24],[2,15],[3,29],[4,34],[5,30],[6,40],[7,23],[8,27],[9,40]]}],o.lineChartOptions={series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.5},{opacity:.5}]}}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}},o.lineChartOptionsDas={series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},xaxis:{tickDecimals:0},colors:["#62cb31"],grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},legend:{show:!1},tooltip:!0,tooltipOpts:{content:"x: %x, y: %y"}};for(var l=[],a=[],t=0;t<14;t+=.5)l.push([t,Math.sin(t)]),a.push([t,Math.cos(t)]);o.sinCosChartData=[{data:l,label:"sin(x)"},{data:a,label:"cos(x)"}],o.sinCosChartOptions={series:{lines:{show:!0},points:{show:!0}},grid:{tickColor:"#e4e5e7",borderWidth:1,borderColor:"#e4e5e7",color:"#6a6c6f"},yaxis:{min:-1.2,max:1.2},colors:["#62cb31","#efefef"]}}angular.module("appsworld").controller("charts_flotCtrl",charts_flotCtrl),charts_flotCtrl.$inject=["$scope"];
function chartjsCtrl(a){a.polarData=[{value:120,color:"#62cb31",highlight:"#57b32c",label:"Homer"},{value:140,color:"#80dd55",highlight:"#57b32c",label:"Inspinia"},{value:100,color:"#a3e186",highlight:"#57b32c",label:"Luna"}],a.polarOptions={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:1,scaleBackdropPaddingX:1,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1},a.doughnutData=[{value:20,color:"#62cb31",highlight:"#57b32c",label:"App"},{value:120,color:"#91dc6e",highlight:"#57b32c",label:"Software"},{value:100,color:"#a3e186",highlight:"#57b32c",label:"Laptop"}],a.doughnutOptions={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:45,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1},a.lineData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"Example dataset",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[22,44,67,43,76,45,12]},{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[16,32,18,26,42,33,44]}]},a.lineOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},a.sharpLineData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(98,203,49,1)",data:[33,48,40,19,54,27,54]}]},a.sharpLineOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!1,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},a.barOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1},a.barData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[65,59,80,81,56,55,40]},{label:"My Second dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.8)",highlightFill:"rgba(98,203,49,0.75)",highlightStroke:"rgba(98,203,49,1)",data:[28,48,40,19,86,27,90]}]},a.singleBarOptions={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1},a.singleBarData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My Second dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.8)",highlightFill:"rgba(98,203,49,0.75)",highlightStroke:"rgba(98,203,49,1)",data:[10,20,30,40,30,50,60]}]},a.radarData={labels:["Eating","Drinking","Sleeping","Designing","Coding","Cycling","Running"],datasets:[{label:"My First dataset",fillColor:"rgba(98,203,49,0.2)",strokeColor:"rgba(98,203,49,1)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"#62cb31",data:[65,59,66,45,56,55,40]},{label:"My Second dataset",fillColor:"rgba(98,203,49,0.4)",strokeColor:"rgba(98,203,49,1)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"#62cb31",data:[28,12,40,19,63,27,87]}]},a.radarOptions={scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:2,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:1,datasetFill:!0},a.lineProjectData={labels:["January","February","March","April"],datasets:[{label:"Example dataset",fillColor:"rgba(98,203,49,0.5)",strokeColor:"rgba(98,203,49,0.7)",pointColor:"rgba(98,203,49,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(26,179,148,1)",data:[17,21,19,24]}]},a.lineProjectOptions={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!1,pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!1,datasetStrokeWidth:1,datasetFill:!0,responsive:!0,tooltipTemplate:"<%= value %>",showTooltips:!0,onAnimationComplete:function(){this.showTooltip(this.datasets[0].points,!0)},tooltipEvents:[]}}angular.module("appsworld").controller("chartjsCtrl",chartjsCtrl),chartjsCtrl.$inject=["$scope"];
function inlineChartsCtrl(t){t.inlineData=[34,43,43,35,44,32,44,52,25],t.inlineOptions={type:"line",lineColor:"#54ab2c",fillColor:"#62cb31"},t.barSmallData=[5,6,7,2,0,-4,-2,4],t.barSmallOptions={type:"bar",barColor:"#62cb31",negBarColor:"#c6c6c6"},t.smallPieData=[1,1,2],t.smallPieOptions={type:"pie",sliceColors:["#62cb31","#b3b3b3","#e4f0fb"]},t.longLineData=[34,43,43,35,44,32,15,22,46,33,86,54,73,53,12,53,23,65,23,63,53,42,34,56,76,15,54,23,44],t.longLineOptions={type:"line",lineColor:"#62cb31",fillColor:"#ffffff"},t.tristateData=[1,1,0,1,-1,-1,1,-1,0,0,1,1],t.tristateOptions={type:"tristate",posBarColor:"#62cb31",negBarColor:"#bfbfbf"},t.discreteData=[4,6,7,7,4,3,2,1,4,4,5,6,3,4,5,8,7,6,9,3,2,4,1,5,6,4,3,7],t.discreteOptions={type:"discrete",lineColor:"#62cb31"},t.pieCustomData=[52,12,44],t.pieCustomOptions={type:"pie",height:"150px",sliceColors:["#1ab394","#b3b3b3","#e4f0fb"]},t.barCustomData=[5,6,7,2,0,4,2,4,5,7,2,4,12,14,4,2,14,12,7],t.barCustomOptions={type:"bar",barWidth:8,height:"150px",barColor:"#1ab394",negBarColor:"#c6c6c6"},t.lineCustomData=[34,43,43,35,44,32,15,22,46,33,86,54,73,53,12,53,23,65,23,63,53,42,34,56,76,15,54,23,44],t.lineCustomOptions={type:"line",lineWidth:1,height:"150px",lineColor:"#17997f",fillColor:"#ffffff"}}angular.module("appsworld").controller("inlineChartsCtrl",inlineChartsCtrl),inlineChartsCtrl.$inject=["$scope"];
function clockCtrl(c,l){c.tickInterval=1e3;var t=function(){c.clock=Date.now(),l(t,c.tickInterval)};l(t,c.tickInterval)}angular.module("appsworld").controller("clockCtrl",clockCtrl),clockCtrl.$inject=["$scope","$timeout"];
function timelineCtrl(e){e.timelineItems=[{type:"The standard chunk of Lorem Ipsum",content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to ",date:1423063721,info:"It is a long established fact that"},{type:"There are many variations",content:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here",date:1423063721,info:"It is a long established fact that"},{type:"Contrary to popular belief",content:" If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text.",date:1423063721,info:"It is a long established fact that"},{type:"Lorem Ipsum",content:"All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words.",date:1423063721,info:"It is a long established fact that"},{type:"The generated Lorem Ipsum",content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to ",date:1423063721,info:"It is a long established fact that"},{type:"The standard chunk",content:"Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc.",date:1423063721,info:"It is a long established fact that"}]}angular.module("appsworld").controller("timelineCtrl",timelineCtrl),timelineCtrl.$inject=["$scope"];
function googleMapCtrl(e,t){e.mapOptions={zoom:14,center:new google.maps.LatLng(40.67,-73.94),styles:[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],mapTypeId:google.maps.MapTypeId.ROADMAP}}angular.module("appsworld").controller("googleMapCtrl",googleMapCtrl),googleMapCtrl.$inject=["$scope"," $timeout"];
function calendarCtrl(d){var e=new Date,t=e.getDate(),a=e.getMonth(),l=e.getFullYear();d.alertMessage="Report all events from UI calendar.",d.events=[{title:"All Day Event",start:new Date(l,a,1)},{id:999,title:"Repeating Event",start:new Date(l,a,t-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(l,a,t+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(l,a,t+1,19,0),end:new Date(l,a,t+1,22,30),allDay:!1},{title:"Homer task",start:new Date(l,a,t+5,19,0),end:new Date(l,a,t+6,22,30),allDay:!1,backgroundColor:"#62cb31",borderColor:"#62cb31"},{title:"Click for Google",start:new Date(l,a,28),end:new Date(l,a,29),url:"http://google.com/"}],d.alertOnEventClick=function(e,t,a,l){d.alertMessage=e.title+": Clicked "},d.alertOnDrop=function(e,t,a,l,n,r,i,o){d.alertMessage=e.title+": Droped to make dayDelta "+t},d.alertOnResize=function(e,t,a,l,n,r,i){d.alertMessage=e.title+": Resized to make dayDelta "+a},d.uiConfig={calendar:{height:550,editable:!0,header:{left:"prev,next",center:"title",right:"month,agendaWeek,agendaDay"},eventClick:d.alertOnEventClick,eventDrop:d.alertOnDrop,eventResize:d.alertOnResize}},d.eventSources=[d.events]}angular.module("appsworld").controller("calendarCtrl",calendarCtrl),calendarCtrl.$inject=["$scope"];
function editorCtrl(e){e.summernoteText=["<h3>Hello Jonathan! </h3>","<p>dummy text of the printing and typesetting industry. <strong>Lorem Ipsum has been the dustrys</strong> standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more","<br/><br/>All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable.","recently with.</p><p>Mark Smith</p>"].join(""),e.summernoteTextTwo=["<h4>It is a long established fact</h4>","<p>Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for lorem ipsum will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)","<p>Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for lorem ipsum will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)","with.</p>"].join(""),e.summernoteOpt={toolbar:[["headline",["style"]],["style",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["textsize",["fontsize"]],["alignment",["ul","ol","paragraph","lineheight"]]]}}angular.module("appsworld").controller("editorCtrl",editorCtrl),editorCtrl.$inject=["$scope"];
function nggridCtrl(a){a.exampleData=[{Name:"Jakeem",Email:"imperdiet@vulputatevelit.com",Company:"Laoreet Lectus Corporation",City:"Vaux-sur-Sure",Country:"Papua New Guinea"},{Name:"Kadeem",Email:"sit.amet.risus@scelerisquenequesed.net",Company:"Mi Felis Adipiscing Institute",City:"Fauglia",Country:"Bouvet Island"},{Name:"Paula",Email:"venenatis.lacus@milorem.net",Company:"Libero LLP",City:"Tirupati",Country:"Antigua and Barbuda"},{Name:"Bree",Email:"adipiscing.non.luctus@loremutaliquam.edu",Company:"Vitae Purus Gravida Institute",City:"Chatteris",Country:"Poland"},{Name:"Quinn",Email:"Nunc@ac.com",Company:"Dui Lectus Rutrum Consulting",City:"Wolverhampton",Country:"Venezuela"},{Name:"Magee",Email:"pretium.aliquet.metus@venenatislacus.co.uk",Company:"Dui Associates",City:"Stokrooie",Country:"Japan"},{Name:"Rowan",Email:"mus@rutrum.net",Company:"Diam Pellentesque Habitant Institute",City:"Ashburton",Country:"Taiwan"},{Name:"Nina",Email:"lobortis.augue@feugiatnec.org",Company:"Auctor Velit Eget Consulting",City:"Stevenage",Country:"Denmark"},{Name:"Chava",Email:"nec@ipsumSuspendissesagittis.com",Company:"Egestas Company",City:"Aulnay-sous-Bois",Country:"Togo"},{Name:"Uma",Email:"tincidunt.nunc@vestibulumneque.net",Company:"Sem Semper Corp.",City:"Dalkeith",Country:"Nigeria"},{Name:"Amal",Email:"laoreet.posuere@eu.net",Company:"Non Massa PC",City:"Stafford",Country:"South Sudan"},{Name:"Dana",Email:"Nulla.dignissim@mattisornarelectus.co.uk",Company:"Laoreet PC",City:"Gentinnes",Country:"Korea, South"},{Name:"Iris",Email:"nostra.per.inceptos@magnamalesuada.co.uk",Company:"Diam Vel LLC",City:"Oudekapelle",Country:"Dominican Republic"},{Name:"Joshua",Email:"Duis@enimgravidasit.com",Company:"Magna Foundation",City:"San Francisco",Country:"Guinea-Bissau"},{Name:"Rosalyn",Email:"egestas.ligula.Nullam@auctorullamcorpernisl.ca",Company:"Sodales Mauris LLC",City:"Seydiehir",Country:"Sudan"},{Name:"Hilary",Email:"et.pede.Nunc@accumsanneque.co.uk",Company:"Et Rutrum Corp.",City:"Broechem",Country:"Bulgaria"},{Name:"Amena",Email:"nisl.Maecenas.malesuada@vitaeorci.edu",Company:"Quis LLC",City:"Joliet",Country:"Saint Lucia"},{Name:"Rashad",Email:"Pellentesque.tincidunt@euneque.org",Company:"Suspendisse Tristique Neque Industries",City:"Amlwch",Country:"Timor-Leste"},{Name:"Sharon",Email:"ornare.sagittis@vitaeeratvel.ca",Company:"Tellus Foundation",City:"Woodstock",Country:"Chile"}],a.gridOptions={data:"exampleData"},a.gridOptionsTwo={data:"exampleData",showGroupPanel:!0,jqueryUIDraggable:!0}}angular.module("appsworld").controller("nggridCtrl",nggridCtrl),nggridCtrl.$inject=["$scope"];
function nestableCtrl(t){t.remove=function(e){e.remove()},t.toggle=function(e){e.toggle()},t.moveLastToTheBeginning=function(){var e=t.data.pop();t.data.splice(0,0,e)},t.newSubItem=function(e){var t=e.$modelValue;t.nodes.push({id:10*t.id+t.nodes.length,title:t.title+"."+(t.nodes.length+1),nodes:[]})},t.collapseAll=function(){t.$broadcast("collapseAll")},t.expandAll=function(){t.$broadcast("expandAll")},t.data=[{id:1,title:"Sem fringilla",nodes:[{id:11,title:"Nisl lacus et, ultricies",nodes:[{id:111,title:"Congue hac",nodes:[]}]},{id:12,title:"Consectetuer orci mollis",nodes:[]}]},{id:2,title:"Gravida morbi non",nodes:[{id:21,title:"Lorem aliquam",nodes:[]},{id:22,title:"Inceptos nibh",nodes:[]}]},{id:3,title:"Pede hymenaeos",nodes:[{id:31,title:"Magnis morbi orci",nodes:[]},{id:32,title:"Ad tortor, auctor dui",nodes:[]},{id:33,title:"Orci magnis, mauris",nodes:[]}]}]}angular.module("appsworld").controller("nestableCtrl",nestableCtrl),nestableCtrl.$inject=["$scope"];
function touchSpin(){return{restrict:"A",scope:{spinOptions:"="},link:function(n,i,t){n.$watch(n.spinOptions,function(){o()});var o=function(){$(i).TouchSpin(n.spinOptions)}}}}angular.module("appsworld").directive("touchSpin",touchSpin),touchSpin.$inject=[];
!function(){"use strict";function i(a,i,t,s){return{restrict:"A",scope:{},link:function(i,t,n){if(s.companyId){$(t).addClass("initialsettings");var e=angular.element('<div class="splash-title intial_loading"><img src=""><p style="margin: 8px 0px 4px 110px;"></p></div>');$(t[0].parentElement).append(e),a.company_settings().then(function(){$(t).removeClass("initialsettings"),$(".intial_loading").remove()})}}}}angular.module("appsworld").directive("initialSettings",i),i.$inject=["framework","$state","$rootScope","config"]}();
!function(){"use strict";function a(a,n,i){return{countries:function(){return Countries},currencies:function(){return{USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"",name:"Euro",symbol_native:"",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"..",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lek"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:".",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:".",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:".",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN",name:"Chinese Yuan",symbol_native:"CN",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"",name:"Costa Rican Coln",symbol_native:"",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"K",name:"Czech Republic Koruna",symbol_native:"K",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"..",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"..",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"",name:"British Pound Sterling",symbol_native:"",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH",name:"Ghanaian Cedi",symbol_native:"GH",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"",name:"Israeli New Sheqel",symbol_native:"",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"..",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Krna",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krnur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"",name:"Japanese Yen",symbol_native:"",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"",name:"South Korean Won",symbol_native:"",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:".",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB",name:"Lebanese Pound",symbol_native:"..",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"..",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"",name:"Nigerian Naira",symbol_native:"",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan Crdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan crdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"..",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"",name:"Philippine Peso",symbol_native:"",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"z",name:"Polish Zloty",symbol_native:"z",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"",name:"Paraguayan Guarani",symbol_native:"",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"..",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:".",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:".",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"..",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY",name:"Syrian Pound",symbol_native:"..",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"",name:"Thai Baht",symbol_native:"",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Paanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"",name:"Ukrainian Hryvnia",symbol_native:"",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bolvar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolvars"},VND:{symbol:"",name:"Vietnamese Dong",symbol_native:"",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"..",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}}},addressBook:function(){return{Id:n.guid(),BlockHouseNo:"",Street:"",UnitNo:"",BuildingEstate:"",City:"Singapore",PostalCode:"",State:"Singapore",Country:"Singapore",Phone:"",Email:"",Website:null,Latitude:null,Longitude:null,RecOrder:1,Remarks:null,UserCreated:i.userFullName,CreatedDate:new Date,ModifiedBy:null,ModifiedDate:null,Version:null,Status:"Active",IsLocal:!0}}}}angular.module("appsworld").factory("DefaultValues",a),a.$inject=["$http","commonService","config"]}();
!function(){"use strict";var o=angular.module("appsworld"),a={userName:void 0,userRole:void 0,companyId:void 0,primaryId:-1,companyName:void 0,likeDislike:void 0,selectedCursor:void 0,dateFormat:void 0,timeFormat:void 0,currency:void 0,moduleActionsObj:void 0,IndividualModuleDetails:void 0,userImage:void 0,userFullName:void 0,IssetupDone:void 0,setupPercentage:void 0,TwoFactorEnabled:void 0,dashbordurl:"http://118.201.92.6/reports.uat/report/",reporturl:"http://118.201.92.6:83/Reports/mobilereport/ClientCursorReport/",reportpowerbiurl:"http://118.201.92.6:84/reports/powerbi/",displayLabel:void 0};o.value("config",a),o.run(["$rootScope","$state",function(i,t){i.$on("$stateChangeSuccess",function(o,e,r){i.prevUrlParam=t.params,i.prevUrl=t.current.name,mgr.profile?mgr.profile.email!=a.userName&&window.location.reload():window.location.reload()})}])}();
function bookmarkctrl(r,i,o,m,a,t,c,l,e,p,n){var s=this;r.pinimge="fa fa-thumb-tack",r.tooltip="Bookmark this link",function(){u||(u=app_configuration.app_config.current_module+" cursor");if("null"!=c.companyId&&null!=c.companyId&&c.companyId&&u){var o=n.getSessionItem("ModuleDetailId");a.get(l.admincommonRemoteServer+"GetPinImageStatus",{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:n.encrypt({companyId:c.companyId?c.companyId:null,userName:c.userName?c.userName:null,moduleDetailId:o||"",type:null,Subtype:null})}}).success(function(o){return 0==o?(r.pinimge="fa fa-thumb-tack",r.tooltip="Bookmark this link"):(r.pinimge="fa fa-thumb-tack fa-rotate-45",r.tooltip="Unbookmark this link"),o})}}();var u,k=n.getCookie("moduleInfo");k&&(u=JSON.parse(k).name?JSON.parse(k).name:app_configuration.app_config.current_module+" cursor"),r.$on("$stateChangeSuccess",function(o,a){r.entityname=a.data.pageTitle}),r.pin=r.entitypin,r.bookmark=function(){var o;o="fa fa-thumb-tack"==r.pinimge?(r.pinimge="fa fa-thumb-tack fa-rotate-45",r.tooltip="Unbookmark this link",1):(r.pinimge="fa fa-thumb-tack",r.tooltip="Bookmark this link",2);var a=i.current.name;if(3<JSON.stringify(i.params).length){var t;for(var e in i.params)t=t?t+","+e+":'"+i.params[e]+"'":e+":'"+i.params[e]+"'";a=t?a+"({"+t+"})":a}r.bookmark123={Id:c.primaryId,CompanyId:c.companyId,UserName:c.userName,UrlContext:a,Status:o,Text:r.entityname,ModuleName:app_configuration.app_config.current_module};var n=l.admincommonRemoteServer+"SavePinDTO";p.saveEntity(n,r.bookmark123).success(function(o){m.$broadcast("refreshBookMarks")}).error(function(o,a){s.isSaving=!1})}}angular.module("appsworld").directive("zBookmark",[function(){return{restrict:"EA",scope:{entityname:"="},template:'<a href tooltip-placement="top" uib-tooltip="{{tooltip}}" class="clr" ng-click="bookmark()"><i class="{{pinimge}}"></i></a>',controller:"bookmarkctrl",controllerAs:"vm"}}]).controller("bookmarkctrl",bookmarkctrl),bookmarkctrl.$inject=["$scope","$state","$window","$rootScope","$http","$moment","config","serviceConfig","$cookies","commonService","zStorageEnc"];
function updateTitle(n,d){return{link:function(i,s){n.$on("$stateChangeSuccess",function(i,n,t){var e="AppsWorld";n.data&&n.data.pageTitle&&(e=n.data.pageTitle),d(function(){s.text(e)},0,!1)})}}}angular.module("appsworld").directive("zLoader",["$http",function(e){return{restrict:"A",template:'<div class="loading-spiner-holder"><div class="splash-tle"><div class="spinner spinner1">  <img src="content/images/logo-gif.gif" width="50"></div> </div> </div>',link:function(i,n,t){i.isLoading=function(){return 0<e.pendingRequests.length&&!i.rightSidebar},i.$watch(i.isLoading,function(i){i?n.show():n.hide()}),i.$on("$stateChangeStart",function(){e.pendingRequests=[]})}}}]).directive("updateTitle",updateTitle).directive("zIndvLoader",["$http",function(i){return{restrict:"A",template:'<div class="loading-spiner-holder"><div class="splash-tle"><div class="spinner spinner1"> <img src="content/images/indivLoader.gif"></div> </div> </div>',scope:{isLoading:"="},link:function(t,e,i){t.$watch(function(){return t.isLoading},function(i,n){t.isLoading?e.show():e.hide()})}}}]).directive("zFormLoader",["$http",function(i){return{restrict:"A",template:'<div class="loading-spiner-holder"><div class="splash-tle"><div class="spinner spinner1"> <img src="content/images/logo-gif.gif"></div> </div> </div>',scope:{isLoading:"="},link:function(t,e,i){t.$watch(function(){return t.isLoading},function(i,n){t.isLoading?e.show():e.hide()})}}}]),updateTitle.$inject=["$rootScope","$timeout"];
!function(){"use strict";var e=angular.module("masterGrids",[]);function t(d,n,e,c,m,o,t,r,p,a,i,l,f){p["/opportunities"].recordType=null,p["/myopportunities"].recordType="Self",p["/myinvoices"].userName=c.userName,p["/nontradeincomesections"].type="Non Trade Income",p["/furtherdeductions"].type="Further Deductions",p["/Leads"].recordType=null,p["/Accounts"].recordType=null,p["/myLeads"].recordType="Self",p["/myAccounts"].recordType="Self",p["/quotations"].recordType="",p["/myQuotations"].recordType="Self",p["/tmallTab"].tabName="All",p["/tmtentativeTab"].tabName="Tentative",p["/tmconfirmedTab"].tabName="Confirm",p["/tmcompletedTab"].tabName="Completed",p["/tmcancelledTab"].tabName="Cancel";var y={};function C(e){var t={};return angular.forEach(e,function(e){e&&e.field&&(t[e.field]={type:e.dataType||"string"})}),t}function u(e,t,a,n,o,r){var i=!0,l={PermissionName:"View"},u=f.getSessionItem("ModuleDetailId");if(o)for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s]);return a?{excel:{fileName:m.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){d.loadExcelxportdata(e)},dataSource:{serverPaging:!0,serverFiltering:!0,serverSorting:!0,pageSize:20,schema:{data:"Data",total:"Total",model:{id:"Id",fields:C(e)}},batch:!1,transport:{read:{url:t,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",f.encrypt({companyId:c.companyId,userName:c.userName,moduleDetailId:u||f.getItem("ModuleDetailId"),Values:l}))}},parameterMap:function(n,e){n.filter&&angular.forEach(n.filter.filters,function(e,t){if(3<n.filter.filters[t].field.length){var a=new Date(n.filter.filters[t].value);angular.isDate(a="Invalid Date"==a?null:a)&&(n.filter.filters[t].value=n.filter.filters[t].value?moment(n.filter.filters[t].value).format("YYYY-MM-DDT00:00:00"):null)}});var t=y.load_additionalParams();return""==t?(n.take=500,JSON.stringify(n)):(n.take=500,JSON.stringify(n)+t)}},requestStart:function(){i&&kendo.ui.progress($("[kendo-grid]"),!0)},requestEnd:function(){i&&(kendo.ui.progress($("[kendo-grid]"),!1),i=!1)}},dataBound:function(e,t){},sortable:!0,filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,reorderable:!0,resizable:!0,scrollable:!0,columns:y.setDatePickerfilter(e)}:{excel:{fileName:m.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){d.loadExcelxportdata(e)},dataSource:{serverPaging:!0,serverFiltering:!0,serverSorting:!0,pageSize:20,aggregate:n,schema:{data:"Data",total:"Total",model:{id:"Id",fields:C(e)}},batch:!1,transport:{read:{url:t,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",f.encrypt({companyId:c.companyId,userName:c.userName,moduleDetailId:u||f.getItem("ModuleDetailId"),Values:l}))}},parameterMap:function(a,e){-1<window.location.hash.indexOf("quotations")&&0!==this.options.dataSource._data.length&&(p["/quotations"].quotationId=this.options.dataSource._data[0].QuotationId,p["/leadQuotations"].quotationId=this.options.dataSource._data[0].QuotationId,p["/myleadquotation"].quotationId=this.options.dataSource._data[0].QuotationId,p["/myaccountquotation"].quotationId=this.options.dataSource._data[0].QuotationId,p["/accountquotation"].quotationId=this.options.dataSource._data[0].QuotationId,p["/myQuotations"].quotationId=this.options.dataSource._data[0].QuotationId),p["/foreignexchanges"].functionalCurrency="",a.filter&&angular.forEach(a.filter.filters,function(e,t){3<a.filter.filters[t].field.length&&("Date"==a.filter.filters[t].field.substring(a.filter.filters[t].field.length-4)&&(a.filter.filters[t].value=a.filter.filters[t].value?moment(a.filter.filters[t].value).format("YYYY-MM-DDT00:00:00"):null))});var t=y.load_additionalParams();return""==t?JSON.stringify(a):JSON.stringify(a)+t}},requestStart:function(){i&&kendo.ui.progress($("[kendo-grid]"),!0)},requestEnd:function(){i&&(kendo.ui.progress($("[kendo-grid]"),!1),i=!1)}},dataBound:function(e,t){if("hr.employeeselfservice.myappraisals"==m.current.name){var a=this;a.tbody.find(">tr").each(function(){a.dataItem(this).hasChildren||("As Appraisee"==r?$(this).find(".k-hierarchy-cell a").removeClass("k-icon"):"As Appraiser"==r&&$(this).find(".k-hierarchy-cell a").addClass("k-icon"))})}},sortable:!0,filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,reorderable:!0,resizable:!0,scrollable:!0,pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},columns:y.setDatePickerfilter(e),filterMenuInit:g}}function g(e){e.container.find('[data-bind="value: filters[0].operator"]').data("kendoDropDownList").value("contains"),e.container.find('[data-bind="value: filters[1].operator"]').data("kendoDropDownList").value("neq")}function s(){if("admin"!==c.role.toLowerCase())return[];var e=[];return i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("ExCurrency","BaseAmount","ExchangeRate"),i.BeanCursor&&!i.BeanCursor.IsBankReconciliationActivate&&e.push("BankClearingDate"),i.BeanCursor&&!i.BeanCursor.IsNoSupportingDocActivate&&e.push("NoSupportingDocument"),l&&!l.MultiCompany&&e.push("ServiceCompanyName"),e}function v(){if("admin"!==c.role.toLowerCase())return[];var e=[];return i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("ExCurrency","BaseAmount","ExchangeRate","BaseBal","BaseTotal"),i.BeanCursor&&!i.BeanCursor.IsBankReconciliationActivate&&e.push("BankClearingDate"),i.BeanCursor&&!i.BeanCursor.IsNoSupportingDocActivate&&e.push("NoSupportingDocument"),l&&!l.MultiCompany&&e.push("ServiceCompanyName"),e}function h(){if("admin"!==c.role.toLowerCase())return[];var e=[];return i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("BaseCurrency","BaseTotal","ExchangeRate","BaseBal"),i.BeanCursor&&!i.BeanCursor.IsNoSupportingDocActivate&&e.push("NoSupportingDocument"),l&&!l.MultiCompany&&e.push("ServiceCompanyName"),e}function D(){if("admin"!==c.role.toLowerCase())return[];var e=[];return i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("ExchangeRate"),i.BeanCursor&&!i.BeanCursor.IsBankReconciliationActivate&&e.push("BankClearingDate"),i.BeanCursor&&!i.BeanCursor.IsNoSupportingDocActivate&&e.push("NoSupportingDocument"),l&&!l.MultiCompany&&e.push("ServiceCompanyName"),e}return y.savedPageOptions={},y.remove_columns=function(e,t){return e.filter(function(e){return-1==t.indexOf(e.field)})},y.manage_columns=function(){var e={admin_companies:{remove_columns:"admin"==c.role?["ExpiryDate","PayMode","NoOfCursors","IsAccountingFirm","UsersCount","Amount","NoOfCompanies"]:["ShortName","RegistrationNo"],hide_columns:null},bean_entities:{remove_columns:function(){if("admin"!==c.role.toLowerCase())return[];var e=[];i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("CustCurrency","VenCurrency");return e}(),hide_columns:["Type","CreditTerms","PaymentTerms","CustCreditLimit","VendorType","CustCurrency","VenCurrency","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_invoices:{remove_columns:v(),hide_columns:["Nature","CreditTermName","PONo","Repeating","DocDescription","ExCurrency","BaseAmount","ExchangeRate","BankClearingDate","NoSupportingDocument","CashBankAccount","BaseBal","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_cashsales:{remove_columns:v(),hide_columns:["ModeOfReceipt","ReceiptrefNo","PONo","BaseAmount","ExchangeRate","BankClearingDate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_debitnotes:{remove_columns:v(),hide_columns:["Nature","BaseTotal","BaseBal","ExchangeRate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_creditnotes:{remove_columns:v(),hide_columns:["Nature","BaseAmount","BaseBal","ExchangeRate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_bills:{remove_columns:h(),hide_columns:["CreditTermName","VendorType","Nature","DocDescription","BaseCurrency","BaseTotal","ExchangeRate","NoSupportingDocument","BaseBal","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_receipts:{remove_columns:D(),hide_columns:["ReceiptRefNo","DocCurrency","ReceiptApplicationAmmount","ExchangeRate","BankClearingDate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_doubtfuldebts:{remove_columns:v(),hide_columns:["Nature","BaseAmount","ExchangeRate","BankClearingDate","NoSupportingDocument","BaseBal","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_payrollbills:{remove_columns:h(),hide_columns:["Nature","DocDescription","BaseCurrency","BaseTotal","ExchangeRate","NoSupportingDocument","BaseBal","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_payments:{remove_columns:D(),hide_columns:["PaymentRefNo","DocDescription","PaymentApplicationCurrency","PaymentApplicationAmmount","ExchangeRate","NoSupportingDocument","BankClearingDate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_payrollpayments:{remove_columns:D(),hide_columns:["PaymentRefNo","DocDescription","PaymentApplicationCurrency","PaymentApplicationAmmount","ExchangeRate","NoSupportingDocument","BankClearingDate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_cashpayments:{remove_columns:s(),hide_columns:["WithdrawalRefNo","ModeOfWithdrawal","DocDescription","ExCurrency","BaseAmount","ExchangeRate","BankClearingDate","NoSupportingDocument","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_deposit:{remove_columns:s(),hide_columns:["WithdrawalRefNo","ModeOfWithdrawal","DocDescription","ExCurrency","BaseAmount","ExchangeRate","BankClearingDate","NoSupportingDocument","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_withdrawal:{remove_columns:s(),hide_columns:["WithdrawalRefNo","ModeOfWithdrawal","DocDescription","ExCurrency","BaseAmount","ExchangeRate","BankClearingDate","NoSupportingDocument","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_items:{remove_columns:function(){if("admin"!==c.role.toLowerCase())return[];var e=[];i.BeanCursor&&!i.BeanCursor.IsGSTActivate&&e.push("TaxCode");return e}(),hide_columns:["TaxCodes","AllowableDis","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_chartofaccounts:{remove_columns:function(){if("admin"!==c.role.toLowerCase())return[];var e=[];!i.BeanCursor||i.BeanCursor.IsMultiCurrencyActivate&&i.BeanCursor.IsRevaluationActivate||e.push("Revaluation");return e}(),hide_columns:["Class","Nature","DisAllowable","Revaluation","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_creditmemos:{remove_columns:function(){if("admin"!==c.role.toLowerCase())return[];var e=[];i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("BaseAmount","ExchangeRate","BaseBalance");l&&!l.MultiCompany&&e.push("ServiceCompanyName");return e}(),hide_columns:["Nature","BaseAmount","BaseBalance","ExchangeRate","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_banktransfers:{remove_columns:function(){if("admin"!==c.role.toLowerCase())return[];var e=[];i.BeanCursor&&!i.BeanCursor.IsMultiCurrencyActivate&&e.push("ExchangeRate");i.BeanCursor&&!i.BeanCursor.IsBankReconciliationActivate&&e.push("WthBankClearing","DepBankClearing");i.BeanCursor&&!i.BeanCursor.IsNoSupportingDocActivate&&e.push("NoSupportingDocument");return e}(),hide_columns:["ExchangeRate","TransferRefNo","ModeOfTransfer","WthBankClearing","DepBankClearing","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},bean_taxcodes:{hide_columns:["Description","UserCreated","CreatedDate","ModifiedDate","ModifiedBy","TaxCode"]},bean_clearings:{hide_columns:["ServiceCompanyName","ModifiedDate","ModifiedBy"]},bean_bankreconciliation:{remove_columns:v(),hide_columns:["ServiceCompanyName","UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]},workflow_clients:{hide_columns:["UserCreated","CreatedDate","ModifiedDate","ModifiedBy"]}};return e[m.current.data.permissionKey]?e[m.current.data.permissionKey]:null},y.load_additionalParams=function(e){var t="",a=-1===m.current.url.indexOf("?")?m.current.url:m.current.url.split("?")[0];if(p[e||a])for(var n in p[e||a])t=t+"&"+n+"="+p[e||a][n];return t},y.setDatePickerfilter=function(e){return angular.forEach(e,function(e){e.dataType&&"date"===e.dataType&&(e.filterable&&"object"==typeof e.filterable?e.filterable.ui=function(e){e.kendoDatePicker({format:c.dateFormat})}:e.filterable={ui:function(e){e.kendoDatePicker({format:c.dateFormat})}})}),e},y.checkDocumentDate=function(e,t,a,n,o,r){var i,l,u;e&&moment(e).format("YYYY/MM/DD"),u=u?moment(t).format("YYYY/MM/DD"):t,i=a?moment(a).format("YYYY/MM/DD"):a,l=n?moment(n).format("YYYY/MM/DD"):n;var s=moment(o).format("YYYY/MM/DD");if(u&&s<u)return"validateFYE";if(l&&i)if("cancelRevalution"===r){var d=moment(s,"YYYY/MM/DD").add(1,"days");if(d=moment(d).format("YYYY/MM/DD"),s<i||l<s||d<i||l<d)return"validatePassword"}else if(s<i||l<s)return"validatePassword";return!0},y.cancelRevalution=function(e){return d.saveEntity(n.revaluationV2RemoteServer+"savevoidrevaluation",e,"","",{PermissionName:"Void"})},y.getOpenPeriodDates=function(e,t){var a=n.revaluationRemoteServer+"revaluationfinancialmodel?&companyid="+c.companyId;return d.getEntities(a)},y.deleteChartOfAccount=function(e){return d.saveEntity(n.beanAuthenticationRemoteServer+"deletechartofaccount",e)},y.loadGrid=function(e){e=-1===e.indexOf("?")?e:e.split("?")[0];c.companyId&&"null"!==c.companyId?c.companyId:c.partnerId&&c.partnerId;return d.getEntities((n.gridmetadataRemoteServer?n.gridmetadataRemoteServer:n.userAccountRemoteServer)+"getgridmetadata?url="+e)},y.saveGridLayOut=function(e){return e.UserName=null,d.saveEntity((n.gridmetadataRemoteServer?n.gridmetadataRemoteServer:n.userAccountRemoteServer)+"savegridmetadata",e)},y.getGridOptions=function(e,t){var a;return e=e?e.replace("?",""):e,u(a="admin.companies"===m.current.name&&"Super User"===c.role?o.Company():(a=JSON.parse(t),y.load_columns(a)),e)},y.disableItems=function(e,t){return d.saveEntity(n.adminmasterRemoteServer+"EnableOrDisableNew",e,t)},y.isEditPermissionApplied=function(){return a.load_permissions({permissionKey:m.current.data.permissionKey})},y.sub_action_url=function(e,a,t,n){var o=r[e[t].module][e[t].screenName][t.toLowerCase()+"_"+e[t].screenName];return n?(angular.forEach(e[t].ActionParams,function(e,t){o=o+e.key+"=",e.IsTakeFromGrid&&(o+=a[e.DataField]),e.IsTakeFromConfig&&(o+=c[e.DataField]),!e.IsTakeFromGrid&&!e.IsTakeFromConfig&&(o+=e.Value),o+="&"}),o.substring(0,o.length-1)):o},y._kPagedGridOptions=function(e,t,a,n,o,r){return u(t,e,a,n,o,r)},y.load_columns=function(e){var t=y.manage_columns();if(t){e=t.remove_columns&&0<t.remove_columns.length?y.remove_columns(e,t.remove_columns):e;for(var a=t.hide_columns?t.hide_columns:[],n=0;n<e.length;n++)a&&-1<a.indexOf(e[n].field)&&(e[n].hidden=!0)}return e},y.loadGridDataViewUrl=function(e,t,a){var n,o,r,i,l="";if(t){for(var u in t=-1<t.indexOf(".")?t.split("."):[t]){n=n?n+"."+t[u]:t[u];var s=m.get(n).url;s&&(i=-1<s.indexOf("?")?"?":-1<s.indexOf(":")?":":i,s=-1<s.indexOf("?")?s.substr(0,s.indexOf("?")):-1<s.indexOf(":")?s.substr(0,s.indexOf(":")-1):s,l=l?l+s:s)}if(a)for(var d in a)"?"==i?r=r?r+"&"+d+"="+a[d]:"?"+d+"="+a[d]:":"==i&&(r=r?r+"/"+a[d]:"/"+a[d]);o=(e?app_configuration.app_config.module_linking[e.toLowerCase()]:app_configuration.app_config.current_module_link)+"/#"+l+r}return o},y.breadCrumbValue=function(e){if(m.current.data.breadcrumbDisplayProp){if("string"==typeof m.current.data.breadcrumbDisplayProp)return e[m.current.data.breadcrumbDisplayProp];var t="";for(var a in m.current.data.breadcrumbDisplayProp)t+=e[m.current.data.breadcrumbDisplayProp[a]]+" - ";return t.substring(0,t.length-1)}return e.Name||e.Code||e.ServiceCode||e.ServiceName},y.getDownloadFile=function(e){window.open(n.admincommonRemoteServer+"downloadfiles?files="+e,"_blank")},y.getDownloadId=function(e){var t={};t.ScreenId=e.Id,t.ScreenName=e.ScreenName,t.CursorName=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",t.TemplateName=t.ScreenName,t.CompanyId="",t.TemplateContent="";var a=n.commonTemplateRemoteServer+"DownloadTemplate";return d.saveEntity(a,t)},y}e.factory("masterGridDataContext",t).value("mastergridParams",{"/payroll":{employeeId:null,isActive:null},"/jobapplications":{},"/liabilities":{LeadsheetType:null},"/equity":{LeadsheetType:null},"/income":{LeadsheetType:null},"/expenses":{LeadsheetType:null},"/classifications":{ClassificationType:null},"/excemptionPartialTabs":{ExemptionType:null},"/excemptionFullTabs":{ExemptionType:null},"/normals":{RebatesType:null},"/consetion":{RebatesType:null},"/multiplierstabssetup":{MultipliersTabsSetup:null},"/reviewclaims":{userName:null,TabName:null},"/verifyclaims":{userName:null,TabName:null},"/approveclaims":{userName:null,TabName:null},"/myclaims":{userName:null,TabName:null},"/allclaims":{userName:null,TabName:null},"/rejectedclaims":{userName:null,TabName:null},"/cancelledclaims":{userName:null,TabName:null},"/leaveApplications":{leaveTypeId:null,employeeId:null,isFromESS:null,leavestatus:null,status:null},"/myleaveApplications":{leaveTypeId:null,employeeId:null,userName:null,isFromESS:null,leavestatus:null,status:null},"/runpayrolledit":{masterId:null,isNext:null,type:null,employeeIds:null},"/runpayroll":{id:null,month:null,year:null,istotal:null},"/runpayrolls":{year:null,month:null,state:null,searchBy:null},"/quotations":{recordType:" "},"/appraisals":{type:null,appraisalCycle:null,appraisalName:null,employeeId:null},"/myappraisals":{type:null,appraisalCycle:null,appraisalName:null,employeeId:null},"/leadQuotations":{leadId:null},"/myleadquotation":{leadId:null},"/myaccountquotation":{leadId:null},"/accountquotation":{leadId:null},"/payslip":{employeeId:null,year:null,month:null},"/sendappraisal":{type:null},"/clientcommunication":{invoiceid:null},"/templates":{modulemasterId:null,IsPartnerTemplate:null},"/template":{modulemasterId:null,IsPartnerTemplate:null},"/foreignexchanges":{functionalCurrency:null},"/opportunities":{recordType:null},"/myopportunities":{recordType:null},"/myleadopportunities":{type:null,leadId:null},"/myaccountopportunities":{type:null,leadId:null},"/accountopportunities":{type:null},"/myinvoices":{userName:null},"/nontradeincomesections":{type:null},"/furtherdeductions":{type:null},"/leadopportunities":{type:null,leadId:null},"/myLeads":{recordType:null},"/myAccounts":{recordType:null},"/Leads":{userName:null},"/Accounts":{recordType:null},"/myQuotations":{recordType:null},"/claims":{type:null,employeeId:null,period:null,id:null,CategoryName:null,employeeClaimid:null},"/assets":{EmployeeId:null},"/myAssets":{EmployeeId:null},"/payslips":{year:null,month:null,employeeId:null},"/benefits":{type:null,employeeId:null,period:null,id:null,CategoryName:null,employeeClaimid:null},"/tmallTab":{tabName:null},"/tmtentativeTab":{tabName:null},"/tmconfirmedTab":{tabName:null},"/tmcompletedTab":{tabName:null},"/tmcancelledTab":{tabName:null},"/QuotationQuoten":{quotationId:null},"/myQuotationQuoten":{quotationId:null},"/leadQuotationsQuoteGenerate":{quotationId:null},"/myleadquotationquotationgenerate":{quotationId:null},"/accountquotationQuoteGenerate":{quotationId:null},"/myaccountquotationquotationgenerate":{quotationId:null},"/opportunityQupteGenerate":{quotationId:null},"/myopportunityQuoteGeneration":{quotationId:null},"/opportunityQuoteGeneration":{quotationId:null},"/accountopportunityQuoteGenerate":{quotationId:null},"/myaccountopportunityQuoteGeneration":{quotationId:null},"/leadopportunityQuoteGeneration":{quotationId:null},"/QuotationopportunityQuoteGenerate":{quotationId:null},"/myleadquotationOpportunityQuoteGenerate":{quotationId:null},"/myaccountquotationOpportunityQuoteGenerate":{quotationId:null},"/accountquotationOpportunityQuoteGenerate":{quotationId:null},"/myQuotationopportunityQuoteGenerate":{quotationId:null},"/myopportunityQuoteGenerates":{quotationId:null},"/myleadopportunitiesQuoteGeneration":{quotationId:null},"/myaccountopportunitiesquotationgenerate":{quotationId:null},"/leadopportunitiesQuoteGeneration":{quotationId:null},"/accountopportunitiesQuoteGenerate":{quotationId:null},"/myleadopportunityQuoteGeneration":{quotationId:null}}),t.$inject=["commonService","serviceConfig","$moment","config","$state","gridCols","$cookies","subactionsContext","mastergridParams","users_permissions","modulesettings","companysettings","zStorageEnc"],e.filter("gridName",function(){return function(e){var t=e.substring(1,e.length);return t?t.charAt(0).toUpperCase()+e.substr(2):""}}),e.filter("formateDate",function(){return function(e){return kendo.toString(kendo.parseDate(e,"yyyy-MM-dd"),"dd/MM/yyyy")}})}();
!function(){"use strict";function r(){return{breadCrumbData:function(r){var t=r;return void zStorageEnc.setSessionItem("BreabcrumbName",t)}}}angular.module("appsworld").factory("breadCrumbsFactory",r),r.$inject=[]}();
!function(){"use strict";function e(e,t){return{client:{template:{delete_template:t.templateRemoteServer+"deletetemplate?",copy_template:t.templateRemoteServer+"duplicatetemplate?"},lead:{delete_lead:t.LeadRemoteLookupsServerVersion+"DeleteAccount?"}},bean:{receipt:{void_receipt:t.receiptRemoteServer+"savereceiptdocumentvoid"},revaluation:{void_revaluation:t.revaluationV2RemoteServer+"savevoidrevaluation"},chartofaccount:{delete_chartofAccount:t.beanAuthenticationRemoteServer+"deletechartofaccount"}},admin:{workprofile:{defaultworkprofile_workprofile:t.payrollRemoteServer+"getdefaultprofile?"}},hr:{jobapplication:{delete_jobapplication:t.recruitmentRemoteServer+"deletejobapplication?"}},tax:{ipcmultiplier:{delete_ipcmultiplier:t.taxMultiplierRemoteServer+"deleteipcmultipler?"},Exemption:{delete_Exemption:t.taxMultiplierRemoteServer+"deleteexemption?"},Rebates:{delete_Rebates:t.taxMultiplierRemoteServer+"deleterebates?"}},workflow:{invoice:{rejected_invoice:t.workflowInvoiceRemoteServer+"InvoiceSubmit?",approve_invoice:t.workflowInvoiceRemoteServer+"InvoiceSubmit?",void_invoice:t.workflowInvoiceRemoteServer+"InvoiceSubmit?",generateorsend_invoice:t.workflowInvoiceRemoteServer+"InvoiceSubmit?"}},Knowledge:{LiveResourceSetup:{delete_LiveResourceSetup:t.knowledeBlogServer+"deletefeed?"}}}}angular.module("masterGrids").factory("subactionsContext",e),e.$inject=["config","serviceConfig"]}();
!function(){"use strict";function e(s,r,c,l,e,t,n,d,i,o,u,a,m,f){var p=this;p.isShowLoader=!1,p.Add=function(){if("admin.wfconfigurations.incidentalclaim"==g.ActionURL||"popup"===g.ActionType)return void w("new");var e=S("add",null);s.savedPageOptions[r.current.data.permissionKey]=null,l.displayLabel=null,r.go(g.ActionURL,e)},p.Edit=function(){if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please Select one Record");if("admin.wfconfigurations.incidentalclaim"==g.ActionURL||"popup"===g.ActionType)return void w();A(),l.displayLabel=k(p.selection[0]),r.go(g.ActionURL,S("edit",p.selection[0]))},p.Disable=function(){if(p.selection.length<1)return void c.notify.warning("Please Select At Least One Record");for(var e=0;e<p.selection.length;e++)if(p.selection[e].IsSystem)return void c.notify.warning("Can not Inactive System Records.");if("admin_excemptionAndRebates"==r.current.data.permissionKey)return void c.notify.warning("Can not Inactive these records");function t(){var e;if(1===p.selection.length?e="Active"===p.selection[0].Status?"Confirm Inactive ?":"Confirm Active ?":1<p.selection.length&&(e="Confirm Active/Inactive ?"),u.BeanCursor&&("ChartOfAccount"==g.StreamName||"Item"==g.StreamName||"BeanEntity"==g.StreamName)){p.isLinked=!1;for(var t=0;t<=p.selection.length-1;t++)(p.selection[t].IsLinkedAccount||p.selection[t].IsExternalData)&&(p.isLinked=!0);if(p.isLinked){var n="BeanEntity"==g.StreamName?"Entity":g.StreamName,i="ChartOfAccount"===g.StreamName?"linked account":"System "+n;return c.alerts("You can't disable the "+i).error(),void(p.selection=[])}}if("TaxCode"===g.StreamName){p.isNATaxcode=!1;for(var t=0;t<=p.selection.length-1;t++)"NA"===p.selection[t].Code&&(p.isNATaxcode=!0);if(p.isNATaxcode)return c.alerts("You can't disable 'NA' taxcode").error(),void(p.selection=[])}var o="Do you really want to ";1===p.selection.length?"Active"===p.selection[0].Status?o+="Inactive ?":o+="Active ?":1<p.selection.length&&(o+="Active/Inactive ?");var a=[],r=[];angular.forEach(p.selection,function(e){a.push(e.Id),r.push(e.Status)}),c.confirmationDialog(e,o,"Ok","Cancel").then(function(e){if("ok"===e){var t={id:a,tableName:g.TableName,status:r,UserName:l.userFullName,CompanyId:null,IsFromMainGrid:"/claimsetups"==g.Url},n=s.disableItems(t,"Active/Inactive");n.then(function(e){c.notify.success("Saved Data"),h(),p.selection=[]}),n.error(function(e){c.alerts(e.Message||e).error(),p.selection=[]})}"cancel"===e&&(p.selection=[])})}if("Companies"===r.current.data.pageTitle){if("Active"===p.selection[0].Status&&"Super User"!=l.role)return n.confirmationDialog("Company Deactivation","Deactivating your company will Effect ongoing transactions of the company","Ok","Cancel").then(function(e){if("ok"===e)return t();"cancel"===e&&(p.selection=[])});if("Inactive"===p.selection[0].Status)return t();if("Active"===p.selection[0].Status&&"Super User"===l.role)return t()}else t()},p.clearFilters=function(){$("#masterGrid").data("kendoGrid").dataSource.filter([]),p.selection=[]},p.refresh=I,p.saveLayOut=function(){p.selection=[];var e=$("#masterGrid").data("kendoGrid").getOptions();e.dataSource.data=[],g.GridMetaData1=JSON.stringify(e),g.IsModified=!0,s.saveGridLayOut(g).then(function(){c.notify.success("Layout Saved"),y()})},p.resetLayOut=function(){o.clear_savelayout(r.current.url).then(function(e){c.notify.success("Layout reset done");var t=$("#masterGrid").data("kendoGrid").dataSource.filter();t&&$("#masterGrid").data("kendoGrid").dataSource.filter([]),y()})},p.getViewMode=function(n){if("admin.wfconfigurations.incidentalclaim"==g.ActionURL||"popup"===g.ActionType)return void w(n.Id);function t(){var t=S("view",n);t.isImport="/importworkflowemployees"===g.Url,"admin"===l.role?s.isEditPermissionApplied().then(function(e){t.isView="True"!=e.data.Metadata.Edit,A(),l.displayLabel=k(n),"/importemployees"==g.Url&&(t.isFromImport=!0),r.go(g.ActionURL,t)}):(t.isView=!1,A(),l.displayLabel=k(n),r.go(g.ActionURL,t))}"/importemployees"===g.Url||"/importworkflowemployees"===g.Url?("/importemployees"===g.Url?p.type="HR":p.type="Workflow",c.confirmationDialog("Confirmation","Are you sure you want to convert to "+p.type+" Employee ?","Ok","Cancel").then(function(e){"ok"==e&&t()})):t()},p.isAdmin="admin"==l.role,p.viewHistory=function(){if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please Select one Record");v.open("lg",g.StreamName,g.ViewModelName,p.selection[0].Id),p.selection=[]},p.getlink=function(e){if("Active"==e.Status){var t="{"+e.ApplicationLink+"}";t=t.replace("/\\/g","");var n=JSON.stringify({itemInfo:t,permissionInfo:p.checkPermission,configInfo:{companyName:l.companyName,companyId:l.companyId,userRole:l.role,userName:l.userName,state:"jobapplication",tenetId:e.TenantId}});return app_configuration.app_config.module_linking.unsl+"index.html#/request?requestString="+n}},p.changeText=function(e){"Active"===e.Status?c.notify.success("Copied Successfully"):c.notify.success(" You cannot Copy this link")},p.Preview=function(){if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please select  one Questionnaire");d.open({templateUrl:"competencies.html",controller:"previewController",controllerAs:"vm",backdrop:"static",size:"lg",resolve:{options:function(){return{questionnaireId:p.selection[0].Id}}}})},p.ConvertToEmployee=function(){if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please select  one record");o.load_tab_permissions("hr_em_employees").then(function(e){if(e.PersonalDetails.View&&e.PersonalDetails.Add){p.isShowLoader=!0;for(var t=0;t<p.selection.length;t++)if(null==p.selection[t].EmployeeId){var n=d.open({templateUrl:"convertoemployee.html",controller:"ConvertToEmployee",controllerAs:"vm",size:"md",backdrop:"static",resolve:{options:function(){return{id:p.selection[0].Id,convertEmpId:p.selection[0].EmployeeId}}}});n.result.then(function(e){p.isShowLoader="ok"==e,p.selection=[]})}else c.confirmationDialog("Confirmation","The Applicant was already created as a employee,Do you wanted us to take you to employee form","Ok","Cancel").then(function(e){"cancel"==e&&(p.selection=[]),"ok"==e&&r.go("hr.empmanagement.employees.employee",{Id:p.selection[0].EmployeeId,jobapplicationId:p.selection[0].Id})})}else c.notify.warning("You dont have permission to go to PersonalDetails Tab.Because PersonalDetails tab does not have View/Add Permission")})},p.ChangeTrainingStatus=function(){if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please select  one training");if("Completed"==p.selection[0].TrainingStatus)return c.notify.warning("This Training is already Completed"),void(p.selection=[]);if("Cancel"==p.selection[0].TrainingStatus)return c.notify.warning("This Training is already Canceled"),void(p.selection=[]);p.isShowLoader=!0,d.open({templateUrl:"ChangeTrainingStatus.html",controller:"ChangeTrainingStatus",controllerAs:"vm",size:"md",backdrop:"static",resolve:{options:function(){return{TraingID:p.selection[0].Id,tStatus:p.selection[0].TrainingStatus}}}}).result.then(function(e){p.selection=[],p.isShowLoader=!1,I()})},p.InvoiceStatus=function(e,t,n,i){if(0==p.selection.length||1<p.selection.length)return void c.notify.warning("Please select one checkbox");for(var o=0;o<p.selection.length;o++){var a=d.open({templateUrl:"status.html",controller:"statusInstance",controllerAs:"vm",size:"md",backdrop:"static",resolve:{options:function(){return{id:p.selection[0].Id,state:p.selection[0].InvoiceState,statChanged:p.selection[0].BalanceFee}}}});a.result.then(function(e){p.selection=[],I()})}};var g,v=e.$new();p.ExcelExport=function(){$("#masterGrid").data("kendoGrid").saveAsExcel()},t("historyController",{$scope:v}),p.title="",p.currentUrl=r.current.url,p.masterGridOptions=[],window.scrollTo(0,0),p.Email=function(){{if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please select  one record");if("Interim"==p.selection[0].DocSubType||"Final"==p.selection[0].DocSubType)return c.notify.warning("WF Invoice can not send mail"),void(p.selection=[]);var e={ScreenId:p.selection[0].Id,ScreenName:p.selection[0].ScreenName};c.sendmail(e).then(function(e){e&&c.notify.success("Email sent successfully"),p.selection=[]})}},p.Download=function(){{if(1<p.selection.length||p.selection.length<1)return void c.notify.warning("Please select  one record");if("Interim"==p.selection[0].DocSubType||"Final"==p.selection[0].DocSubType)return c.notify.warning("WF Invoice can not download"),void(p.selection=[]);var e=s.getDownloadId(p.selection[0]);e.success(function(e){var t=e;s.getDownloadFile(t),p.selection=[],c.notify.success("Downloaded Successfully")}),e.error(function(e){c.notify.warning(e.Message),p.selection=[]})}},p.selection=[];function y(){s.loadGrid(p.currentUrl).then(function(e){g=e.data,g.Options,p.title=g.Title,h()})}function h(){new Date;var t=f.getSessionItem("ModuleDetailId");if("admin.companies"===r.current.name&&"Super User"===l.role&&(g.IsExisting=!1),g.IsExisting){var e=JSON.parse(g.GridMetaData1);e.excel.fileName=r.current.data.pageTitle,e.excel.allPages=!0,s.savedPageOptions[r.current.data.permissionKey]&&(e.dataSource.page=s.savedPageOptions[r.current.data.permissionKey].page,e.dataSource.pageSize=s.savedPageOptions[r.current.data.permissionKey].pageSize),e.excelExport=function(e){c.loadExcelxportdata(e)},e.dataSource.transport={read:{url:g.APIMethod.split("?")[0],beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",f.encrypt({companyId:l.companyId,userName:l.userName,moduleDetailId:t||f.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}},parameterMap:function(e,t){var n=s.load_additionalParams();return""==n?JSON.stringify(e):JSON.stringify(e)+n}},$("#masterGrid").data("kendoGrid")&&$("#masterGrid").data("kendoGrid").setOptions(e)}else if($("#masterGrid").data("kendoGrid")){var n=s.getGridOptions(g.APIMethod,g.GridMetaData1);s.savedPageOptions[r.current.data.permissionKey]&&(n.dataSource.page=s.savedPageOptions[r.current.data.permissionKey].page,n.dataSource.pageSize=s.savedPageOptions[r.current.data.permissionKey].pageSize),$("#masterGrid").data("kendoGrid").setOptions(n)}p.selection=[]}function S(e,t){if(g.Params){var n=JSON.parse(g.Params),i={};return angular.forEach(n,function(e){i[e.key]=e.takeFromGrid?t?t[e.key]:"new":e.value}),i}return null}function I(){p.selection=[],h()}function k(e){if(r.current.data.breadcrumbDisplayProp){if("string"==typeof r.current.data.breadcrumbDisplayProp)return e[r.current.data.breadcrumbDisplayProp];var t="";for(var n in r.current.data.breadcrumbDisplayProp)t+=r.current.data.breadcrumbDisplayProp[n]+" - ";return t.substring(0,t.length-1)}return e.Name||e.Code||e.ServiceCode||e.ServiceName}function w(e){g.PopupOptions&&"string"==typeof g.PopupOptions&&(g.PopupOptions=JSON.parse(g.PopupOptions)),function(e,t,n,i){d.open({templateUrl:t,controller:n,controllerAs:"vm",size:e,resolve:{options:function(){return"new"==i?{size:e,id:i}:{size:e,id:0!=p.selection.length?p.selection[0].Id:i||null}}}}).result.then(function(){I(),$("#masterGrid").data("kendoGrid").dataSource.read()})}("md",g.PopupOptions.TemplateUrl||"incidentalclaims.html",g.PopupOptions.Controller||"incidentalclaimController",e)}function A(){var e=$("#masterGrid").data("kendoGrid").dataSource;s.savedPageOptions[r.current.data.permissionKey]=s.savedPageOptions[r.current.data.permissionKey]?s.savedPageOptions[r.current.data.permissionKey]:{},s.savedPageOptions[r.current.data.permissionKey].page=e.page(),s.savedPageOptions[r.current.data.permissionKey].pageSize=e.pageSize()}p.geturl=function(e,t,n){return s.loadGridDataViewUrl(n,e,t)},e.$on("actionHandler",function(e,t){-1!=["Add","Edit","Disable","getViewMode","refresh","clearFilters","saveLayOut","viewHistory","changeText","getlink","ConvertToEmployee","InvoiceStatus","ChangeTrainingStatus","Preview","resetLayOut","ExcelExport","GenereateBankForm","GenereateCPFForm","Email","Download"].indexOf(t)?p[t]():function(e){if(0===p.selection.length||1<p.selection.length)return c.notify.warning("Please select one record");"Void"===e&&"bean_revaluation"==r.current.data.permissionKey?c.confirmationDialog("Alert","It would affect reporting e.g. balance sheet, P&L, revaluation, tax reporting ! do you want to continue ?","Ok","Cancel").then(function(e){"ok"==e&&function(){var e=s.getOpenPeriodDates();e.then(function(e){var t=e.data.FinancialEndDate,n=e.data.FinancialPeriodLockEndDate,i=e.data.FinancialPeriodLockStartDate,o=e.data.FinancialStartDate,a=s.checkDocumentDate(o,t,i,n,p.selection[0].RevaluationDate,"cancelRevalution");if(!0!==a)switch(a){case"validateFYE":return c.confirmationDialog("Alert","transaction date is in closed financial period and cannot be posted.","Ok").then(function(){});case"validatePassword":c.alerts("Action ignored","Selected record can not be cancelled , Posted Date & Reversal Date should be in open period").error()}else!function(e){p.revalution={Id:p.selection[0].Id,PeriodLockPassword:e.periodLockPassword,CompanyId:null,ModuleDetailId:null};var t=s.cancelRevalution(p.revalution);t.then(function(){I()}),t.error(function(e){c.alerts("Action ignored",e.Message||e).error()})}({periodLockPassword:null})}),e.error(function(e){c.alerts("Action ignored",e.Message||e).error()})}()}):"Delete"===e&&"bean_chartofaccounts"==r.current.data.permissionKey?function(){if(u.BeanCursor&&("ChartOfAccount"==g.StreamName||"Item"==g.StreamName||"BeanEntity"==g.StreamName)){p.isLinked=!1;for(var e=0;e<=p.selection.length-1;e++)if((p.selection[e].IsLinkedAccount||p.selection[e].IsExternalData)&&(p.isLinked=!0),p.selection[e].IsSystem)return c.alerts("Can not delete System Records.").error(),p.selection=[];for(var e=0;e<=p.selection.length-1;e++)if(!1===p.selection[e].IsSystem){var t="BeanEntity"==g.StreamName?"Entity":g.StreamName,n="ChartOfAccount"===g.StreamName?"linked account":"System "+t;return c.alerts("You can't delete the "+n).error(),p.selection=[]}}c.confirmationDialog("Alert","Do you really want to Delete ?","Ok","Cancel").then(function(e){if("ok"==e){p.COADeleteObj={CoaId:p.selection[0].Id,CompanyId:p.selection[0].CompanyId};var t=s.deleteChartOfAccount(p.COADeleteObj);t.then(function(e){c.notify.success("Successfully deleted"),I()}),t.error(function(e){c.alerts("Action ignored",e.Message||e).error(),I()})}else I()})}():function(i,o){var a=null;g.Options&&(a=JSON.parse(g.Options));var e=a[i].IsAction,t=a[i].IsNavigationSwitch;function n(){var n={};return angular.forEach(a[i].Params,function(e,t){e.IsTakeFromGrid&&(n[e.key]=o[e.DataField]),e.IsTakeFromConfig&&(n[e.key]=l[e.DataField]),!e.IsTakeFromGrid&&!e.IsTakeFromConfig&&(n[e.key]=l[e.key])}),n}e?c.confirmationDialog(a[i].ActionTitle,a[i].ActionMessage,"Ok","Cancel").then(function(e){var t;"ok"===e&&("post"==a[i].serviceType?((t=c.saveEntity(s.sub_action_url(a,p.selection[0],i,!1),n())).then(function(){c.notify.success("Saved Data"),I()}),t.error(function(e){c.alerts("Action ignored",e.Message||e).error()})):((t=c.getEntities(s.sub_action_url(a,p.selection[0],i,!0))).then(function(){c.notify.success("Saved Data"),I()}),t.error(function(e){c.alerts("Action ignored",e.Message||e,g.StreamName).error()})))}):t&&r.go(a[i].ActionURL,n())}(e,p.selection[0])}(t)}),p.toggleSelection=function(e){var t=p.selection.indexOf(e);p.selectedRowStatus=e.Status,-1<t?p.selection.splice(t,1):p.selection.push(e)},kendo.ui.Grid.fn.options.columnMenuInit=function(e){e.container.find(".k-menu").data("kendoMenu").bind("activate",function(e){e.item.is(":last-child")&&e.item.find("span.k-dropdown.k-header").first().focus()})},y(),p.btnText="Copy Link"}angular.module("masterGrids").controller("masterGrid",e),e.$inject=["masterGridDataContext","$state","commonService","config","$scope","$controller","bootstrap.dialog","$uibModal","$stateParams","users_permissions","modulesettings","framework","breadCrumbsFactory","zStorageEnc"]}();
!function(){"use strict";function e(c,D,f,p,a,t,n,g,r,d,m,s,o){var i="views/notification/notify.html";return{getEntities:function(e,t,n,a){new Date;var r={PermissionName:"View"};if(a)for(var o in a)a.hasOwnProperty(o)&&(r[o]=a[o]);var i=m.getSessionItem("ModuleDetailId");return c.get(e,{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:i||m.getItem("ModuleDetailId"),type:t||null,Subtype:n||null,Values:r})}})},saveEntity:I,setGridOptions:function(e,t){var n=m.getSessionItem("ModuleDetailId");return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},dataSource:{type:"json",transport:{read:{url:e,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:n||m.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}}},pageSize:20},pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},filterable:!0,columnMenu:!0,sortable:!0,columns:t}},setAdvancedGridOptions:function(e,t,n){var a=m.getSessionItem("ModuleDetailId");return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},dataSource:{type:"json",transport:{read:{url:e,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:a||m.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}}},pageSize:20,filter:n},filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},sortable:!0,reorderable:!0,resizable:!0,columnMenu:!0,pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},columns:t}},setPagedGridOptions:function(e,t,n,a){var r=!0,o=m.getSessionItem("ModuleDetailId");return{excel:{fileName:a||"My Grid Excel",allPages:!0,filterable:!0},excelExport:function(e){u(e)},dataSource:{transport:{read:{url:e,contentType:"application/json",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:o||m.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}},parameterMap:function(e){var t,n=0,a=0,r="";for(var o in e){if("take"==o&&(n=e[o]),"skip"==o&&(a=e[o]),"sort"==o&&0!=e[o].length&&(t=e[o][0].field+" "+e[o][0].dir),"filter"==o&&null!=e[o]){for(var a in e[o].filters)"contains"==e[o].filters[a].operator&&(r=r+"substringof('"+e[o].filters[a].value+"',"+e[o].filters[a].field+") eq true and "),"eq"==e[o].filters[a].operator&&(e[o].filters[a].value="Date"===e[o].filters[a].field.substring(e[o].filters[a].field.length,e[o].filters[a].field.length-4)?moment(e[o].filters[a].value).format("YYYY-MM-DD00:00:00"):e[o].filters[a].value,r=r+e[o].filters[a].field+" eq '"+e[o].filters[a].value+"' and "),"startswith"!=e[o].filters[a].operator&&"endswith"!=e[o].filters[a].operator||(r=r+e[o].filters[a].operator+"("+e[o].filters[a].field+",'"+e[o].filters[a].value+"') and "),"neq"==e[o].filters[a].operator&&(r=r+e[o].filters[a].field+" ne '"+e[o].filters[a].value+"' and "),"doesnotcontain"==e[o].filters[a].operator&&(r=r+"substringof('"+e[o].filters[a].value+"',"+e[o].filters[a].field+") eq false and ");r=r.substring(0,r.length-4)}var i={$take:n,$skip:a,page:e.page,pageSize:e.pageSize,$orderby:t};""!=r&&(i.$filter=r)}return i}},requestStart:function(){r&&kendo.ui.progress($("[kendo-grid]"),!0)},requestEnd:function(){r&&(kendo.ui.progress($("[kendo-grid]"),!1),r=!1)},aggregate:n,schema:{data:"Items",total:"Count",model:{id:"Id",fields:l(t)}},pageSize:20,serverPaging:!0,height:"400px",serverFiltering:!0,serverSorting:!0},filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,sortable:!0,reorderable:!0,resizable:!0,pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},columns:t}},isRouteChangeConfirmRequired:!1,intialObject:[],newObject:[],datevalidations:function(e,t){return e=n(e,angular.uppercase(D.dateFormat)).format("DD/MM/YYYY"),t=n(t,angular.uppercase(D.dateFormat)).format("DD/MM/YYYY"),$.datepicker.parseDate("dd/mm/yy",e)>$.datepicker.parseDate("dd/mm/yy",t)},newdatecompare:function(e,t){return e=n(e,angular.uppercase(D.dateFormat)).format("DD/MM/YYYY"),t=n(t,angular.uppercase(D.dateFormat)).format("DD/MM/YYYY"),$.datepicker.parseDate("dd/mm/yy",e)<$.datepicker.parseDate("dd/mm/yy",t)},getCommunicationObject:function(e){var t=[];try{if('[{"":""}]'!=e&&""!=e&&null!=e)for(var n=JSON.parse(e),a=0;a<=n.length-1;a++)for(var r in n[a]){var o=r,i=n[a][r];t.push({type:o,value:i})}else t.push({key:"",value:""})}catch(e){}return t},getCommunicationjsonObject:function(e){var t=[];try{if('[{"":""}]'!=e&&""!=e&&null!=e)for(var n=JSON.parse(e),a=0;a<=n.length-1;a++)t.push({type:n[a].key,value:n[a].value});else t.push({key:"",value:""})}catch(e){}return t},validateFields:function(e){var t;$("#"+e).each(function(){t=$(this).find(":input")});for(var n=0;n<=t.length-1;n++)"file"!=t[n].type&&"checkbox"!=t[n].type&&"button"!=t[n].type&&t[n].dataset.validationtype&&"email"==t[n].dataset.validationtype&&/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(t[n].value)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},disableEntity:function(t,a,r,e,n,o,i,l,s){if(i){var u=[{Id:t[0],Status:r}];return h(u,a,D.companyId,l,s)}if(o)var d="Delete";else var d="Active"==r?"Inactive":"Active";return g.deleteDialog(e,d).then(function(e){if("ok"==e)return function(){var n=f.defer(),e=m.getSessionItem("ModuleDetailId");return c.get(p.beanAuthenticationRemoteServer+"EnableOrDisable",{params:{Id:t,TableName:a,Status:r,userName:D.userName},headers:{Authorization:"Bearer "+mgr.access_token},AuthInformation:m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:e||m.getItem("ModuleDetailId"),type:l||null,Subtype:subtype||null})}).success(function(e){n.resolve(e)}).error(function(e,t){n.reject(e)}),n.promise}()})},getPhoneString:function(e){var t,n="[",a=!1;angular.forEach(e,function(e){""==e.key&&""==e.value||(a=!0,n+='{"key":"'+e.key+'","value":"'+e.value+'"},')}),t=a?n.substring(0,n.length-1)+"]":"";return t},dateformate:function(e){return/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/.test(e)},getfocusout:function(e){var t=e,n=t.split("/")[0],a=t.split("/")[1],r=t.split("/")[2];if(1==n.length&&1==a.length&&2==r.length)return r<=25?"0"+n+"/0"+a+"/20"+r:"0"+n+"/0"+a+"/19"+r;if(2==n.length&&2==a.length&&4==r.length)return t;if(1==n.length&&2==a.length&&2==r.length)return r<=25?"0"+n+"/"+a+"/20"+r:"0"+n+"/"+a+"/19"+r;if(2==n.length&&2==a.length&&2==r.length)return r<=25?n+"/"+a+"/20"+r:n+"/"+a+"/19"+r;if(2==n.length&&1==a.length&&2==r.length)return r<=25?n+"/0"+a+"/20"+r:n+"/0"+a+"/19"+r;if(1==n.length&&2==a.length&&4==r.length)return"0"+n+"/"+a+"/"+r;if(1==n.length&&1==a.length&&4==r.length)return"0"+n+"/0"+a+"/"+r;return 2==n.length&&1==a.length&&4==r.length?n+"/0"+a+"/"+r:t},schemagride:function(e,t,n,a){return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},dataSource:{data:e,schema:{model:{fields:t,aggregate:n,pageSize:20},pageable:{refresh:!0,pageSizes:!0,buttonCount:5},sortable:!0,scrollable:!0,filterable:{extra:!1,operators:{string:{startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to"},number:{eq:"Is equal to"}}},columns:a}}}},datepattern:function(e){return/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[0-9]|1[0-2]))$/.test(e)},getfocusout1:function(e){var t=e,n=t.split("/")[0],a=t.split("/")[1];if(1==n.length&&1==a.length)return"0"+n+"/0"+a;if(2==n.length&&2==a.length)return t;if(1==n.length&&2==a.length)return"0"+n+"/"+a;return 2==n.length&&1==a.length?n+"/0"+a:t},getViewMode:function(e){for(var t=0;t<=e.length-1;t++)$("#"+e[t]+" input[type=text]").replaceWith(function(){return"<input class='k-textbox w100p' value='"+$(this).val()+"' disabled>"}),$("#"+e[t]+" input[type=url]").replaceWith(function(){return"<input class='k-textbox w100p' value='"+$(this).val()+"' disabled>"}),$("#"+e[t]+" input[type=email]").replaceWith(function(){return"<input class='k-textbox w100p' value='"+$(this).val()+"' disabled>"}),$("#"+e[t]+" input[type=number]").replaceWith(function(){return"<input class='k-textbox w100p' value='"+$(this).val()+"' disabled>"}),$("#"+e[t]+" input[type=checkbox]").replaceWith(function(){return $(this).attr("disabled",!0)}),$("#"+e[t]+" textarea").replaceWith(function(){return"<br/><input class='k-textbox w100p' value='"+$(this).val()+"' disabled>"}),$("#"+e[t]+"select [id=dptidentificationtype]").replaceWith(function(){return"<input class='k-textbox w100p' value='"+$(this).children("option").filter(":selected").text()+"' disabled>"})},onlyNumbers:function(e){var t={up:38,right:39,down:40,left:37,escape:27,backspace:8,tab:9,enter:13,del:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57};for(var n in t)if(t.hasOwnProperty(n)&&(e.charCode==t[n]||e.keyCode==t[n]))return;e.preventDefault()},onlyNumberswithoutdot:function(e){var t={up:38,right:39,down:40,left:37,escape:27,backspace:8,tab:9,enter:13,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57};for(var n in t)if(t.hasOwnProperty(n)&&(e.charCode==t[n]||e.keyCode==t[n]))return;e.preventDefault()},getAddrCommunicationString:function(e){var t,n="[",a=!1;angular.forEach(e,function(e){""==e.key.CodeValue&&""==e.value||(a=!0,n+='{"key":"'+e.key.CodeValue+'","value":"'+e.value+'"},')}),t=a?n.substring(0,n.length-1)+"]":"";return t},formatDate:function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();n.length<2&&(n="0"+n);a.length<2&&(a="0"+a);return[n,a,r].join("/")},incrementDateFormat:function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),o=t.getHours(),i=t.getMinutes(),l=t.getSeconds();1==a.toString().length&&(a="0"+a);1==r.toString().length&&(r="0"+r);1==o.toString().length&&(o="0"+o);1==i.toString().length&&(i="0"+i);1==l.toString().length&&(l="0"+l);return n+"-"+a+"-"+r+"T00:00:00"},setPagedMasterGridOptions:function(e,t){var n=m.getSessionItem("ModuleDetailId"),a=!0;return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},dataSource:{transport:{read:{url:e,contentType:"application/json",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:n||m.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}},parameterMap:function(e){var t,n=0,a=0,r="";for(var o in e){if("take"==o&&(n=e[o]),"skip"==o&&(a=e[o]),"sort"==o&&0!=e[o].length&&(t=e[o][0].field+" "+e[o][0].dir),"filter"==o&&null!=e[o]){for(var a in e[o].filters)"contains"==e[o].filters[a].operator&&(r=r+"substringof('"+e[o].filters[a].value+"',"+e[o].filters[a].field+") eq true and "),"eq"==e[o].filters[a].operator&&(r=r+e[o].filters[a].field+" eq '"+e[o].filters[a].value+"' and "),"startswith"!=e[o].filters[a].operator&&"endswith"!=e[o].filters[a].operator||(r=r+e[o].filters[a].operator+"("+e[o].filters[a].field+",'"+e[o].filters[a].value+"') and "),"neq"==e[o].filters[a].operator&&(r=r+e[o].filters[a].field+" ne '"+e[o].filters[a].value+"' and "),"doesnotcontain"==e[o].filters[a].operator&&(r=r+"substringof('"+e[o].filters[a].value+"',"+e[o].filters[a].field+") eq false and ");r=r.substring(0,r.length-4)}var i={$take:n,$skip:a,page:e.page,pageSize:e.pageSize,$orderby:t};""!=r&&(i.$filter=r)}return i}},requestStart:function(){a&&kendo.ui.progress($("[kendo-grid]"),!0)},requestEnd:function(){a&&(kendo.ui.progress($("[kendo-grid]"),!1),a=!1)},schema:{data:"Items",total:"Count",model:{id:"Id",fields:l(t)}},pageSize:20,serverPaging:!0,height:"400px",serverFiltering:!0,serverSorting:!0},filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,sortable:!0,pageable:{pageSizes:["All",15,20,50,100,150,200],refresh:!0,buttonCount:5},columns:t,scrolable:!0}},alerts:function(e,t,n){return{success:function(){a.swal({title:t||"Success !",text:e||"Data saved !",type:"success"})},warning:function(){a.swal({title:"Are you sure?",text:"do you really want to "+e||"proceed?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Ok",cancelButtonText:"No",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?a.swal(t||"Success","Action completed success fully","success"):a.swal("Cancelled","Action ignored :)","error")})},error:function(){a.swal(t||"Cancelled",e||"Action ignored :)","Lead"===n?"warning":"error")}}},notify:{success:function(e){t.closeAll(),t.config({position:"center"}),t({message:e,classes:"alert-success",templateUrl:i})},warning:function(e){t.closeAll(),t.config({position:"center"}),t({message:e,classes:"alert-warning",templateUrl:i})},info:function(e){t.closeAll(),t.config({position:"right"}),t({message:e,classes:"alert-info",templateUrl:"views/notification/notify-right.html"})}},removeLocalStorageItems:function(e){for(var t in window.localStorage)-1!=t.indexOf(e)&&window.localStorage.removeItem(t)},confirmationDialog:v,dirtyHandler:function(e){return v("Data Modified Alert","Please save the data before proceeding to "+e||"specified action","Ok")},disableMultipleItems:h,_modelFields:l,_kPagedGridOptions:function(e,t){var n=m.getSessionItem("ModuleDetailId");return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},columns:t,pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},sortable:!0,reorderable:!0,resizable:!0,filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,dataSource:{serverPaging:!0,serverFiltering:!0,serverSorting:!0,pageSize:20,schema:{data:"Data",total:"Total",model:{id:"Id",fields:l(t)}},batch:!1,transport:{read:{url:e,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:n||m.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}},parameterMap:function(e,t){return JSON.stringify(e)}}}}},_k2PagedGridOptions:function(e,t,n,a){var r=m.getSessionItem("ModuleDetailId"),o={PermissionName:"View"};if(a)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);return{excel:{fileName:d.current.data.pageTitle,allPages:!0,filterable:!0},excelExport:function(e){u(e)},columns:t,pageable:{pageSizes:["All",5,10,20,50,100],refresh:!0,buttonCount:5},sortable:!0,reorderable:!0,resizable:!0,filterable:{operators:{date:{gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},string:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",startswith:"Starts with",eq:"Is equal to",neq:"Is not equal to",doesnotcontain:"Does not contain",endswith:"Ends with"}}},columnMenu:!0,dataSource:{serverPaging:!0,serverFiltering:!0,serverSorting:!0,pageSize:20,schema:{data:"Data",total:"Total",model:{id:"Id",fields:l(t)}},batch:!1,transport:{read:{url:e,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",m.encrypt({companyId:D.companyId,userName:D.userName,moduleDetailId:r||m.getItem("ModuleDetailId"),Values:o}))}},parameterMap:function(e,t){return JSON.stringify(e)+"&"+n}}}}},profileStatusOptions:function(){return{change:function(e){e.value<50?this.progressWrapper.css({"background-color":"red","border-color":"red"}):50<e.value&&e.value<75?this.progressWrapper.css({"background-color":"#EE9F05","border-color":"#EE9F05"}):75<e.value&&this.progressWrapper.css({"background-color":"green","border-color":"green"})}}},set_module_detail_id:function(e,t){r.current_module(e)&&r.current_module(e).ModuleDetails.filter(function(e){e.Heading==t&&(m.removeItem("ModuleDetailId"),m.setItem("ModuleDetailId",e.Id),m.removeSessionItem("ModuleDetailId"),m.setSessionItem("ModuleDetailId",e.Id))})},to24Hours:function(e){if(e&&-1==e.indexOf(" ")&&2<e.split(":")[1].length){var t=-1==e.toLowerCase().indexOf("a")?e.toLowerCase().indexOf("p"):e.toLowerCase().indexOf("a");e=e.slice(0,t-1)+" "+e.slice(t,e.length)}{if(e.match(/\s(.*)$/)){var n=Number(e.match(/^(\d+)/)[1]),a=Number(e.match(/:(\d+)/)[1]),r=e.match(/\s(.*)$/)[1];"PM"==r&&n<12&&(n+=12),"AM"==r&&12==n&&(n-=12),"am"==r&&(n=n),"pm"==r&&(n+=12);var o=n.toString(),i=a.toString();return n<10&&(o="0"+o),a<10&&(i="0"+i),o+":"+i}return"00:00"}},set_menu_module_detail_id:function(e,t){r.current_module(e)&&r.current_module(e).ModuleDetails.filter(function(e){e.Heading==t&&(m.removeItem("MenuModuleDetailId"),m.setItem("MenuModuleDetailId",e.Id))})},sendmail:function(e,t){return g.sendmail(e,t)},getTimeDiff:function(e,t){var n=e.getTime();return(t.getTime()-n)/1e3},set_module_detail_id_onPermissionKey:function(e,t){r.current_module(e)&&r.current_module(e).ModuleDetails.filter(function(e){e.PermissionKey==t&&(m.removeItem("ModuleDetailId"),m.setItem("ModuleDetailId",e.Id),m.removeSessionItem("ModuleDetailId"),m.setSessionItem("ModuleDetailId",e.Id))})},convertToCSV:function(e,t,n){var a="object"!=typeof e?JSON.parse(e):e,r="";if(r+=t+"\r\n\n",n){var o="";for(var i in a[0])o+=i+",";o=o.slice(0,-1),r+=o+"\r\n"}for(var l=0;l<a.length;l++){var o="";for(var i in a[l])o+='"'+(a[l][i]?a[l][i]:"")+'",';o.slice(0,o.length-1),r+=o+"\r\n"}if(""==r)return void alert("Invalid data");var s="MyReport_";s+=t.replace(/ /g,"_");var u="data:text/csv;charset=utf-8,"+escape(r),d=document.createElement("a");d.href=u,d.style="visibility:hidden",d.download=s+".csv",document.body.appendChild(d),d.click(),document.body.removeChild(d)},sendNotification:function(e,t){var n=null;for(var a in t)"boolean"==typeof t[a]&&t[a]&&(n=a);var r={toList:{CompanyId:D.companyId,MessageContent:e,Users:t.listUsers},toUser:{CompanyId:D.companyId,MessageContent:e,Users:t.listUsers},toGroup:{GroupName:D.companyId,MessageContent:e}};o.invoke({toUser:"SendMessageToUser",toList:"SendToUsers",toGroup:"SendMessageToGroup"}[n],r[n])},loadExcelxportdata:u,PreviewTemp:function(e){return g.PreviewTemp(e)},DownloadTemp:function(e){return g.DownloadTemp(e)}};function h(e,n,t,a,r){var o;1===e.length?o="Active"===e[0].Status?"Confirm Inactive ?":"Confirm Active ?":1<e.length&&(o="Confirm Active/Inactive ?");var i="Do you really want to ";1===e.length?"Active"===e[0].Status?i+="Inactive ?":i+="Active ?":1<e.length&&(i+="Active/Inactive ?");var l=[],s=[],u=[];return angular.forEach(e,function(e){l.push(e.Id),s.push(e.Status),"hr.employeeclaimsentitlementdetail"==n.toLowerCase()&&u.push(e.ClaimItemId)}),v(o,i,"Ok","Cancel").then(function(e){if("ok"===e){var t={id:l,ClaimItemId:"hr.employeeclaimsentitlementdetail"==n.toLowerCase()?u:null,tableName:n,status:s,CompanyId:D.companyId,UserName:D.userFullName,IsFromMainGrid:"hr.employeeclaimsentitlementdetail"==n.toLowerCase()};return I(p.adminmasterRemoteServer+"EnableOrDisableNew",t,a,r)}d.go(d.current.name)})}function v(e,t,n,a){return g.confirmationDialog(e,t,n,a)}function I(e,t,n,a,r){new Date;"object"==typeof t&&(t.hasOwnProperty("ModuleDetailId")&&(t.ModuleDetailId=null),t.hasOwnProperty("CompanyId")&&(t.CompanyId=null));var o={PermissionName:"new"==s.Id||"new"==s.id?"Add":"new"!==s.Id&&"new"!==s.id?"Edit":""};if(r)for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);var l=m.getSessionItem("ModuleDetailId");return c.post(e,t,{headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:m.encrypt({companyId:-1!=e.indexOf("parentcompany1")?t.Id:D.companyId,userName:D.userName,moduleDetailId:l||m.getItem("ModuleDetailId"),type:n||null,Subtype:a||null,Values:o})}}).success(function(e){return e}).error(function(e,t){return{data:e,status:t}})}function l(e){var t={};return angular.forEach(e,function(e){e.field&&(t[e.field]={type:e.dataType||"string"})}),t}function u(e){for(var t,n,a=e.workbook.sheets[0],r=e.sender,o=r.dataSource.options.fields,i=r.dataSource.options.schema.model?r.dataSource.options.schema.model.fields:{},l=r.columns,s=[],u=[],d=[],c=0;c<l.length;c++)l[c].hidden||!l[c].field||l[c].template&&(-1<l[c].template.indexOf('type="checkbox"')||-1<l[c].template.indexOf("type='checkbox'"))||d.push(l[c]);for(var f=0;f<o.length;f++){var p=o[f].field,g=i[p];if(g&&"date"===g.type)for(c=0;c<d.length;c++)if(p===d[c].field){s.push(c);break}if(g&&"currency"===g.type)for(c=0;c<d.length;c++)if(p===d[c].field){u.push(c);break}}for(var m=1;m<a.rows.length;m++){for(var h=a.rows[m],v=0;v<s.length;v++){var I=s[v],b=h.cells[I].value,y=b?new Date(b.getFullYear(),b.getMonth(),b.getDate()):null;h.cells[I].value=y,h.cells[I].format=D.dateFormat,h.cells[I].hAlign="left"}for(v=0;v<u.length;v++){I=u[v];h.cells[I].format="#,##0.00;(#,##0.00)",h.cells[I].hAlign="right"}if("footer"==h.type)for(var w=0;w<h.cells.length;w++){var S=h.cells[w];S.value&&("number"==typeof S.value?(S.value=S.value,S.hAlign="right"):(t=S.value,n=void 0,n=angular.copy(t).toString(),isNaN(parseInt(-1<n.indexOf(",")?n.replace(/[(),]/g,""):n))&&""!=S.value&&(S.value=S.value.startsWith("<div")?$(S.value).text():S.value)," "!=S.value&&""!=S.value&&(-1<S.value.toString().indexOf("(")?(S.value=S.value.replace(/[()]/g,""),S.value=-1<S.value.toString().indexOf(",")?S.value.replace(/[,]/g,""):S.value,S.value=parseFloat(S.value),S.value=-Math.abs(S.value)):(-1<S.value.toString().indexOf(",")&&(S.value=S.value.replace(/[,]/g,"")),S.value=parseFloat(S.value)),S.hAlign="right")))}}}}angular.module("appsworld").factory("commonService",e),e.$inject=["$http","config","$q","serviceConfig","sweetAlert","notify","$moment","bootstrap.dialog","authService","$state","zStorageEnc","$stateParams","SignalRConn"]}();
!function(){"use strict";angular.module("angucomplete-alt",[]).directive("angucompleteAlt",["$q","$parse","$http","$sce","$timeout","$templateCache","$interpolate",function(B,e,V,_,M,t,o){var n="/angucomplete-alt/index.html";function s(a,e,t,n){var r,o,l,s,c,i,u=e.find("input"),d=3,g=null,p="autocomplete-required",h=null,f=null,m=e[0].querySelector(".angucomplete-dropdown"),v=!1,S=null;function w(e){S=null,a.hideResults(e),document.body.removeEventListener("click",w)}function x(e){return e.which?e.which:e.keyCode}function C(e){"function"==typeof a.selectedObject?a.selectedObject(e):a.selectedObject=e,b(!!e)}function R(t){return a.titleField.split(",").map(function(e){return y(t,e)}).join(" ")}function y(e,t){var n,r;if(t){n=t.split("."),r=e;for(var l=0;l<n.length;l++)r=r[n[l]]}else r=e;return r}function I(e,t){var n,r,l;if(l=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),e)return e.match&&e.replace||(e=e.toString()),n=(r=e.match(l))?e.replace(l,'<span class="'+a.matchClass+'">'+r[0]+"</span>"):e,_.trustAsHtml(n)}function b(e){a.notEmpty=e,h=a.searchStr,a.fieldRequired&&n&&n.$setValidity(p,e)}function D(e){!a.overrideSuggestions||a.selectedObject&&a.selectedObject.originalObject===a.searchStr||(e&&e.preventDefault(),M.cancel(g),j(),function(e){C({originalObject:e}),a.clearSelected&&(a.searchStr=null),E()}(a.searchStr))}function F(){return e[0].querySelectorAll(".angucomplete-row")[a.currentIndex]}function $(e){m.scrollTop=m.scrollTop+e}function O(){var e=a.results[a.currentIndex];a.matchClass?u.val(R(e.originalObject)):u.val(e.title)}function U(l){return function(e,t,n,r){t||n||r||(e=e.data),a.searching=!1,T(y(o(e),a.remoteUrlDataField),l)}}function q(e,t,n,r){t||n||r||(t=e.status),0!==t&&(a.remoteUrlErrorCallback?a.remoteUrlErrorCallback(e,t,n,r):console&&console.error&&console.error("http error"))}function j(){f&&f.resolve()}function H(e){var t={},n=a.remoteUrl+encodeURIComponent(e);a.remoteUrlRequestFormatter&&(t={params:a.remoteUrlRequestFormatter(e)},n=a.remoteUrl),a.remoteUrlRequestWithCredentials&&(t.withCredentials=!0),j(),f=B.defer(),t.timeout=f.promise,V.get(n,t).success(U(e)).error(q)}function k(e){j(),f=B.defer(),a.remoteApiHandler(e,f.promise).then(U(e)).catch(q)}function E(){a.showDropdown=!1,a.results=[],m&&(m.scrollTop=0)}function N(){a.showDropdown=s,a.currentIndex=a.focusFirst?0:-1,a.results=[]}function A(e){!e||e.length<d||(a.localData?a.$apply(function(){!function(e){var t,n,r,l,o=a.searchFields.split(","),s=[];for(t=0;t<a.localData.length;t++){for(n=!1,r=0;r<o.length;r++)l=y(a.localData[t],o[r])||"",n=n||0<=l.toString().toLowerCase().indexOf(e.toString().toLowerCase());n&&(s[s.length]=a.localData[t])}a.searching=!1,T(s,e)}(e)}):a.remoteApiHandler?k(e):H(e))}function T(e,t){var n,r,l,o,s,i;if(e&&0<e.length)for(a.results=[],n=0;n<e.length;n++)a.titleField&&""!==a.titleField&&(o=s=R(e[n])),r="",a.descriptionField&&(r=i=y(e[n],a.descriptionField)),l="",a.imageField&&(l=y(e[n],a.imageField)),a.matchClass&&(s=I(o,t),i=I(r,t)),a.results[a.results.length]={title:s,description:i,image:l,originalObject:e[n]};else a.results=[];a.autoMatch&&1===a.results.length&&function(e,t,n){if(!n)return!1;for(var r in t)if(t[r].toLowerCase()===n.toLowerCase())return a.selectResult(e),!0;return!1}(a.results[0],{title:o,desc:r||""},a.searchStr)?a.showDropdown=!1:0!==a.results.length||c?a.showDropdown=!0:a.showDropdown=!1}function L(){a.localData?T(a.localData,""):a.remoteApiHandler?k(""):H("")}e.on("mousedown",function(e){e.target.id?(S=e.target.id)===a.id+"_dropdown"&&document.body.addEventListener("click",w):S=e.target.className}),a.currentIndex=a.focusFirst?0:null,a.searching=!1,l=a.$watch("initialValue",function(e,t){e&&(l(),"object"==typeof e?(a.searchStr=R(e),C({originalObject:e})):"string"==typeof e&&0<e.length?a.searchStr=e:console&&console.error&&console.error("Tried to set initial value of angucomplete to",e,"which is an invalid value"),b(!0))}),a.$on("angucomplete-alt:clearInput",function(e,t){t&&t!==a.id||(a.searchStr=null,C(),b(!1),E())}),a.onFocusHandler=function(){a.focusIn&&a.focusIn(),0!==d||a.searchStr&&0!==a.searchStr.length||(a.currentIndex=a.focusFirst?0:a.currentIndex,a.showDropdown=!0,L())},a.hideResults=function(e){S&&(S===a.id+"_dropdown"||0<=S.indexOf("angucomplete"))?S=null:(r=M(function(){E(),a.$apply(function(){a.searchStr&&0<a.searchStr.length&&u.val(a.searchStr)})},200),j(),a.focusOut&&a.focusOut(),a.overrideSuggestions&&a.searchStr&&0<a.searchStr.length&&-1===a.currentIndex&&D())},a.resetHideResults=function(){r&&M.cancel(r)},a.hoverRow=function(e){a.currentIndex=e},a.selectResult=function(e){a.matchClass&&(e.title=R(e.originalObject),e.description=y(e.originalObject,a.descriptionField)),a.clearSelected?a.searchStr=null:a.searchStr=e.title,C(e),E()},a.inputChangeHandler=function(e){return e.length<d?E():0===e.length&&0===d&&(a.searching=!1,L()),a.inputChanged&&(e=a.inputChanged(e)),e},a.fieldRequiredClass&&""!==a.fieldRequiredClass&&(p=a.fieldRequiredClass),a.minlength&&""!==a.minlength&&(d=parseInt(a.minlength,10)),a.pause||(a.pause=500),a.clearSelected||(a.clearSelected=!1),a.overrideSuggestions||(a.overrideSuggestions=!1),a.fieldRequired&&n&&(a.initialValue?b(!0):b(!1)),a.inputType=t.type?t.type:"text",a.textSearching=t.textSearching?t.textSearching:"Searching...",a.textNoResults=t.textNoResults?t.textNoResults:"No results found",s="false"!==a.textSearching,c="false"!==a.textNoResults,a.maxlength=t.maxlength?t.maxlength:524288,u.on("keydown",function(e){var t=x(e),n=null,r=null;13===t&&a.results?(0<=a.currentIndex&&a.currentIndex<a.results.length?(e.preventDefault(),a.selectResult(a.results[a.currentIndex])):(D(e),E()),a.$apply()):40===t&&a.results?(e.preventDefault(),a.currentIndex+1<a.results.length&&a.showDropdown&&(a.$apply(function(){a.currentIndex++,O()}),v&&(n=F(),m.getBoundingClientRect().top+parseInt(getComputedStyle(m).maxHeight,10)<n.getBoundingClientRect().bottom&&$(function(e){var t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}(n))))):38===t&&a.results?(e.preventDefault(),1<=a.currentIndex?(a.$apply(function(){a.currentIndex--,O()}),v&&(r=F().getBoundingClientRect().top-(m.getBoundingClientRect().top+parseInt(getComputedStyle(m).paddingTop,10)))<0&&$(r-1)):0===a.currentIndex&&a.$apply(function(){a.currentIndex=-1,u.val(a.searchStr)})):9===t&&(a.results&&0<a.results.length&&a.showDropdown?-1===a.currentIndex&&a.overrideSuggestions?D():(-1===a.currentIndex&&(a.currentIndex=0),a.selectResult(a.results[a.currentIndex]),a.$digest()):a.searchStr&&0<a.searchStr.length&&D())}),u.on("keyup input",function(e){var t=x(e);if(37!==t&&39!==t)if(38===t||13===t)e.preventDefault();else if(40===t)e.preventDefault(),!a.showDropdown&&a.searchStr&&a.searchStr.length>=d&&(N(),a.searching=!0,A(a.searchStr));else if(27===t)E(),a.$apply(function(){u.val(a.searchStr)});else{if(0===d&&!a.searchStr)return;a.searchStr&&""!==a.searchStr?a.searchStr.length>=d&&(N(),g&&M.cancel(g),a.searching=!0,g=M(function(){A(a.searchStr)},a.pause)):a.showDropdown=!1,h&&h!==a.searchStr&&!a.clearSelected&&a.$apply(function(){C()})}}),i="remoteUrlResponseFormatter",o=function(e){return a[i]?a[i](e):e},a.$on("$destroy",function(){b(!0)}),M(function(){var e=getComputedStyle(m);v=e.maxHeight&&"auto"===e.overflowY})}return t.put(n,'<div class="angucomplete-holder" ng-class="{\'angucomplete-dropdown-visible\': showDropdown}">  <input id="{{id}}_value" name="{{inputName}}" ng-class="{\'angucomplete-input-not-empty\': notEmpty}" ng-model="searchStr" ng-disabled="disableInput" type="{{inputType}}" placeholder="{{placeholder}}" maxlength="{{maxlength}}" ng-focus="onFocusHandler()" class="k-textbox w100p {{inputClass}}" ng-focus="resetHideResults()" ng-blur="hideResults($event)" autocapitalize="off" autocorrect="off" autocomplete="off" ng-change="inputChangeHandler(searchStr)"/>  <div id="{{id}}_dropdown" class="angucomplete-dropdown angudd" ng-show="showDropdown">    <div class="angucomplete-searching" ng-show="searching" ng-bind="textSearching"></div>    <div class="angucomplete-searching" ng-show="!searching && (!results || results.length == 0)" ng-bind="textNoResults"></div>    <div class="angucomplete-row angusrch postal-border" ng-repeat="result in results" ng-click="selectResult(result)" ng-mouseenter="hoverRow($index)" ng-class="{\'angucomplete-selected-row\': $index == currentIndex}">      <div ng-if="imageField" class="angucomplete-image-holder">        <img ng-if="result.image && result.image != \'\'" ng-src="{{result.image}}" class="angucomplete-image"/>        <div ng-if="!result.image && result.image != \'\'" class="angucomplete-image-default"></div>      </div>      <div class="angucomplete-title" ng-if="matchClass" ng-bind-html="result.title"></div>      <div class="angucomplete-title" ng-if="!matchClass"><h3>{{ result.title }}</h3></div>      <div ng-if="matchClass && result.description && result.description != \'\'" class="angucomplete-description" ng-bind-html="result.description"></div>      <div ng-if="!matchClass && result.description && result.description != \'\'" class="angucomplete-description angudes">{{result.description}}</div>    </div>  </div></div>'),{restrict:"EA",require:"^?form",scope:{selectedObject:"=",disableInput:"=",initialValue:"=",localData:"=",remoteUrlRequestFormatter:"=",remoteUrlRequestWithCredentials:"@",remoteUrlResponseFormatter:"=",remoteUrlErrorCallback:"=",remoteApiHandler:"=",id:"@",type:"@",placeholder:"@",remoteUrl:"@",remoteUrlDataField:"@",titleField:"@",descriptionField:"@",imageField:"@",inputClass:"@",pause:"@",searchFields:"@",minlength:"@",matchClass:"@",clearSelected:"@",overrideSuggestions:"@",fieldRequired:"@",fieldRequiredClass:"@",inputChanged:"=",autoMatch:"@",focusOut:"&",focusIn:"&",inputName:"@",focusFirst:"@"},templateUrl:function(e,t){return t.templateUrl||n},compile:function(e,t){var n=o.startSymbol(),r=o.endSymbol();if("{{"!==n||"}}"!==r){var l=e.html().replace(/\{\{/g,n).replace(/\}\}/g,r);e.html(l)}return s}}}])}();
!function(){"use strict";function e(o,e,n,a,t,i,r,s,l,c){var u=this;u.companyName=o.companyName,u.logout=function(){l.removeCookie("company_details","/",m),l.removeCookie("moduleInfo","/",m),l.removeCookie("companyCursors","/",m),l.removeCookie("companyCursors","/",m),l.removeItem("ModuleDetailId"),l.removeSessionItem("ModuleDetailId"),l.removeItem("Dash_Id"),window.localStorage.clear(),mgr.redirectForLogout()},u.changeModule=function(e){switch(o.selectedCursor=e,l.removeSessionItem("ModuleDetailId"),l.removeItem("Dash_Id"),o.IndividualModuleDetails=!1,l.setCookie("moduleInfo",{name:o.selectedCursor.Name,id:o.selectedCursor.Id},"/",m),e.Name.replace(/ /g,"").toLowerCase()){case"hrcursor":window.location.replace(app_configuration.app_config.module_linking.hr+"#/hr");break;case"doccursor":window.location.replace(app_configuration.app_config.module_linking.doc);break;case"admincursor":window.location.replace(app_configuration.app_config.module_linking.admin);break;case"clientcursor":window.location.replace(app_configuration.app_config.module_linking.client);break;case"knowledgecursor":window.location.replace(app_configuration.app_config.module_linking.knowledge);break;case"taxcursor":window.location.replace(app_configuration.app_config.module_linking.tax);break;case"auditcursor":window.location.replace(app_configuration.app_config.module_linking.audit);break;case"workflowcursor":window.location.replace(app_configuration.app_config.module_linking.workflow);break;case"beancursor":window.location.replace(app_configuration.app_config.module_linking.bean+"#/bean");break;case"brcursor":window.location.replace(app_configuration.app_config.module_linking.br);break;case"drfincursor":window.location.replace(app_configuration.app_config.module_linking.drfin);break;default:window.location.replace(app_configuration.app_config.module_linking.core)}},u.checkRole=function(e){return o.role===e},u.userName=o.userFullName,o.baseUrl="http://"+window.location.host+window.location.pathname+"/"+app_configuration.app_config.current_module+"/_build/html/",u.userEmail=o.userFullName?o.userFullName:o.userName;var d=l.getCookie("company_details");u.profileImage=d?JSON.parse(d).userImage:"",u.userImage=o.userImage||u.profileImage||"images/profile.jpg",u.chooseCompany=function(){o.companyId=null,o.userFullName=null,o.selectedCursor=null,o.companyName=null,o.IssetupDone=null,i.auth_company.isAuthCompany=!1,l.removeCookie("company_details","/",m),l.removeCookie("moduleInfo","/",m),l.removeCookie("companyCursors","/",m),l.removeItem("ModuleDetailId"),l.removeSessionItem("ModuleDetailId"),l.removeItem("Dash_Id"),o.IndividualModuleDetails=!1,t.removeLocalStorageItems("PER"),o.isPartner?window.location.href=app_configuration.app_config.module_linking.partner:a.go("selectcompany")},u.activeAnalytics=!1,u.isMultiCompany=i.auth_company.isMultiCompany,u.moduleList=[];var m=window.location.host.split(":")[0];function p(){var e=i.get_company_modules();e&&0<e.length&&(u.activeAnalytics=0!=e.filter(function(e){return"Analytics"==e.Name&&"Active"==e.Status}).length,u.moduleList=e.filter(function(e){return e.IsMainCursor}))}n.$state=a,u.notificationCenter=function(){r.load_notifications(u.options,"Recent").then(function(e){u.resentnotifications=e.data})},u.backToSetup=function(){-1<app_configuration.app_config.current_module.indexOf("admin")?a.go(app_configuration.app_config.current_module+".intialsetup"):a.go("intialsetup")},u.getHelp=function(){if(o.module_details){var e=o.module_details.ModuleDetails.filter(function(e){return e.Id==l.getItem("MenuModuleDetailId")})[0];e=-1===a.current.name.indexOf("intialsetup")?e:o.module_details,window.open(o.baseUrl+e.HelpLink,"_blank")}},u.showBackTOSetup=function(){return"true"==l.getItem("IsSetupRoute")},u.isPartner=o.isPartner,u.headericonsload=function(e){return"isBot"==e?"true"==l.getItem("isBot"):1==l.getItem("isAnalytics")},u.onSearchClick=function(e){document.getElementById("iframe").setAttribute("src",u.chatUrl);var o="bot-search-popup";event.preventDefault();var n=$("#"+o),a=$("#"+o).width();n.toggleClass("open"),n.hasClass("open")?n.animate({right:"0px"}):n.animate({right:-a+"%"},250)},u.username=function(){return o.userFullName?o.userFullName:o.userName},u.cursorsortname=function(e){return e.split("-")[0]},u.moduleName=function(e){return e.split(" ")[0]},u.chatUrl="https://webchat.botframework.com/embed/PrecursorBot?s=VClkeCuVKic.cwA.gKM.0rlV-X_7xeROVPygQUG0FEtIuR1IxtVTdeQJr1iTUCo&username="+o.userName+"&userid="+o.companyId,u.botChatUrl="https://webchat.botframework.com/embed/PrecursorBot?s=VClkeCuVKic.cwA.gKM.0rlV-X_7xeROVPygQUG0FEtIuR1IxtVTdeQJr1iTUCo&username="+o.userName+"&userid="+o.companyId,document.getElementById("botsearch")&&document.getElementById("botsearch").setAttribute("src",u.botChatUrl),u.options={userName:o.userName,companyId:o.companyId},p(),r.load_notifications(u.options,"All").then(function(e){u.notifications=e.data,r.notification_count(u.options).then(function(e){u.count=e.data})}),"Super User"===o.role&&(u.superUserLinks=[{Name:"Companies",url:"admin.companies",title:"Companies"},{Name:"TaxCodes",url:"admin.taxcodes",title:"Tax Codes"},{Name:"CurrencyCodes",url:"admin.currencycodes",title:"Currency Codes"}]),u.load_analytics=function(){e.$broadcast("load_analytics")},n.$on("refresh_userImage",function(e,o){u.userImage=o.data.Medium}),n.$on("Count",function(e,o){r.notification_count(u.options).then(function(e){u.count=e.data})}),n.$on("company_modules_loaded",p),n.gotoSearch=function(e,o){13===(e.which?e.which:e.keyCode)&&a.go("admin.search",{searchText:o})}}function o(e,o,n,a){var t=a.defer();return{getModules:function(){return n.getEntities(o.admincommonRemoteServer+"modulemaster")},loadBookMarks:function(){return e.userName&&e.companyId?n.getEntities(o.admincommonRemoteServer+"GetPinDetails?ModuleName="+app_configuration.app_config.current_module):t.promise}}}function n(t,i){t.open=function(e,o,n,a){i.open({templateUrl:"historytemplate.html",controller:"historyControllerInstance",size:e,resolve:{items:function(){return t.items},options:function(){return{streemName:o,viewModel:n,id:a}}}}).result.then(function(e){t.selected=e},function(){})}}function a(e,o,i,n,a,r,t){r.streemName=i.streemName,r.isLoading=!0,r.historyModel=[],r.history_td_value=function(e,o){if("Communication"!==e)return e.toLowerCase().includes("date")?t(new Date(o)).format("DD/MM/YYYY"):o;if(o){var n="";angular.forEach(JSON.parse(o),function(e){n=n+e.key+":"+e.value+" "})}return n};var s=a.admincommonRemoteServer+"GetAllHistory?streamname="+i.streemName+"&id="+i.id+"&viewModel="+i.viewModel;o.getEntities(s).then(function(e){var o=e.data?e.data:[];r.isLoading=!1;var n=[];if(o&&0!=o.length){var a=o[0][i.viewModel];for(var t in a)"Id"!==t&&"object"!=typeof a[t]&&n.push(t)}r.theads=n,r.historyModel=o,r.modelName=i.viewModel}),r.ok=function(){n.close("ok")}}angular.module("appsworld").controller("headerController",e).factory("headerContext",o).controller("historyController",n).controller("historyControllerInstance",a).directive("bookmarkList",["headerContext","$state","config","zStorageEnc",function(a,t,i,r){return{restrict:"A",replace:!0,template:'<div uib-dropdown-menu class="hdropdown notification animated flipInX logoutmenu user-profile-drop dropdown-menu"><div class="header-toggle"><ul class="list-unstyled"><li ng-repeat="link in data" ng-if="data"><a  ui-sref="{{link.Url}}" ng-click="loadLink(link)" class="title letter_rtst ">{{link.Text}}</a></li><li ng-if="!data"><a class="title letter_rtst ">No Book Marks Found</a></li></ul></div></div>',link:function(o,e,n){o.data=null,"Super User"===i.role?o.data=[{Name:"Companies",Url:"admin.companies",Text:"Companies"},{Name:"TaxCodes",Url:"admin.taxcodes",Text:"Tax Codes"},{Name:"CurrencyCodes",Url:"admin.currencycodes",Text:"Currency Codes"}]:i.role&&i.companyId&&a.loadBookMarks().then(function(e){o.data=0===e.data.length?null:e.data}),o.$on("refreshBookMarks",function(){a.loadBookMarks().then(function(e){o.data=0===e.data.length?null:e.data})}),o.loadLink=function(e){r.setSessionItem("ModuleDetailId",e.ModuleDetailId),r.setItem("MenuModuleDetailId",e.ModuleDetailId),t.go(e.Url)}}}}]),e.$inject=["config","$rootScope","$scope","$state","commonService","authService","notificationService","framework","zStorageEnc","SignalRConn"],o.$inject=["config","serviceConfig","commonService","$q"],n.$inject=["$scope","$uibModal"],a.$inject=["config","commonService","options","$uibModalInstance","serviceConfig","$scope","$moment"]}(),function(){"use strict";angular.module("appsworld").controller("resetpasswordController",["$scope","$uibModal","$log",function(o,n,a){o.open=function(e){n.open({templateUrl:"resetpasswordcontent.html",controller:"resetpasswordControllerInstance",size:e,resolve:{items:function(){return o.items}}}).result.then(function(e){o.selected=e},function(){a.info("Modal dismissed at: "+new Date)})}}]).controller("resetpasswordControllerInstance",["$scope","$http","$q","$location","$uibModalInstance","$window","config","serviceConfig","formValidate","commonService",function(a,e,t,o,i,n,r,s,l,c){a.isValidationRequired=!1,a.validationMessages=[],a.currentPasswordFun=function(){var e=a.currentPassword.trim();return void(a.currentPassword=e)},a.newpasswordFun=function(){var e=a.newPassword.trim();return void(a.newPassword=e)},a.confirmPasswordFun=function(){var e=a.confirmPassword.trim();return void(a.confirmPassword=e)},a.ok=function(){var n=t.defer();a.isValidationRequired=!1;var e=l.validate("form");if(1==e.isValidationRequired)return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Invalid data,Please Verify.");if(!/.{6,}/.test(a.newPassword))return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Minlength must be 6");if(!/[A-Z]/.test(a.newPassword))return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Atlest One Upper Case is Mandatory");if(!/[a-z]/.test(a.newPassword))return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Atlest One Lower Case is Mandatory");if(!/\d/.test(a.newPassword))return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Atlest One Digit is Mandatory");if(!/[^a-zA-Z\d]/.test(a.newPassword))return a.isValidationRequired=!0,a.validationMessages=[],void a.validationMessages.push("Atlest One Special Charector is Mandatory");if(a.newPassword!=a.confirmPassword)return a.validationMessages=[],a.isValidationRequired=!0,void a.validationMessages.push("Passwords do not match!");if(a.newPassword==a.currentPassword)return a.validationMessages=[],a.isValidationRequired=!0,void a.validationMessages.push("Current & New passwords should not be same");var o={UserName:r.userName,CurrentPassword:a.currentPassword,NewPassword:a.newPassword};c.saveEntity(s.companyRemoteServer+"changepassword1",o).success(function(e){c.notify.success("Password Changed Successfully"),i.close("ok"),n.resolve(e)}).error(function(e,o){a.validationMessages=[],a.isValidationRequired=!0,a.validationMessages.push(e.Message),n.reject(e)})},a.cancel=function(){i.close("cancel")}}])}();
!function(){"use strict";function e(){var e=app_configuration.app_config.api_services.admin_api_service,r=app_configuration.app_config.api_services.bean_api_service,a=app_configuration.app_config.api_services.client_api_service,i=app_configuration.app_config.api_services.hr_api_service,o=app_configuration.app_config.api_services.workflow_api_service,t=app_configuration.app_config.api_services.audit_api_service,p=app_configuration.app_config.api_services.analytics_api_service,n=app_configuration.app_config.api_services.admin_api_service,m=app_configuration.app_config.api_services.br_api_service,c=app_configuration.app_config.api_services.tax_api_service,v=(app_configuration.app_config.api_services.doc_api_service,"api/AzureStorage/"),s="api/Base/",S="api/common/",l="api/master/",R="api/template/",d="api/auditclient/";return{azureStorageRemoteServer:e+v,adminbaseRemoteServer:e+s,admincommonRemoteServer:e+S,companyRemoteServer:e+"api/company/",adminmasterRemoteServer:e+l,userAccountRemoteServer:e+"api/user/",workWeekRemoteServer:e+"api/workweek/",elasticSearchRemoteServer:e+"api/ElasticSearch/",adminAccountRemoteServer:e+"api/Account/",departmentRemoteServer:e+"api/department/",adminTemplateRemoteServer:e+R,adminReportRemoteServer:e+"api/report/",adminDocRemoteServer:e+"api/document/",beanAuthenticationRemoteServer:r+"api/mastermodule/",bankreconciliationServer:r+"api/bank/",bankWithdrawalRemoteServer:r+"api/bankwithdrawal/",vendorBillRemoteServer:r+"api/bill/",cashsalesRemoteServer:r+"api/cashsales/",BeancommonRemoteServer:r+S,invoiceRemoteServer:r+"api/invoice/",debitnoteRemoteServer:r+"api/debitnote/",journalRemoteServer:r+"api/journal/",openingBalanceRemoteServer:r+"api/openingbalance/",paymentRemoteServer:r+"api/payment/",receiptRemoteServer:r+"api/receipt/",revaluationV2RemoteServer:r+"api/v2/revaluation/",bankTransferRemoteServer:r+"api/transfer/",creditmemoRemoteServer:r+"api/creditmemo/",glclearingRemoteServer:r+"api/clearing/",beanDashboardRemoteServer:p+"api/beandashboard/",commonTemplateRemoteServer:e+"api/commontemplate/",activityRemoteServer:a+"api/activity/",azureStorageclientRemoteServer:a+v,baseClientRemoteServer:a+s,campaignRemoteServer:a+"api/campaign/",LeadRemoteServer:a+"api/lead/",LeadRemoteLookupsServerVersion:a+"api/v2/leadlookup/",LeadContactRemoteServer:a+"api/v2/leadcontact/",opportunityRemoteServer:a+"api/opportunity",apiRemoteServer:a+"api/",templateRemoteServer:a+R,remainderRemoteServer:a+"api/reminder/",QuotationRemoteServer:a+"api/quotation/",clientMasterRemoteServer:a+l,clientcommonRemoteServer:a+S,clientdashboardRemoteServer:p+"api/ccdashboard/",HRbaseRemoteServer:i+s,HRcommonRemoteServer:i+S,employeeRemoteServer:i+"api/hr/",leaveManagementRemoteServer:i+"api/leavemng/",payrollRemoteServer:i+"api/payroll/",recruitmentRemoteServer:i+"api/recruitments/",claimsRemoteServer:i+"api/claimmng/",trainingsRemoteServer:i+"api/training/",appraisalRemoteServer:i+"api/appraisal/",hrdashbordRemoteServer:p+"api/hrdashboard/",auditTrailsRemoteServer:i+"api/common/",WFbaseRemoteServer:o+s,caseRemoteserver:o+"api/Case/",workflowclientRemoteServer:o+"api/workflowclient/",WFcommonRemoteServer:o+S,workflowInvoiceRemoteServer:o+"api/Invoice/",masterRemoteServer:o+l,timelogRemoteServer:o+"api/timelog/",generictemplateRemoteServer:e+R,workflowDashboardRemoteServer:p+"api/wfdashboard/",auditRemoteServer:t+"api/client/",auditClientRemoteServer:t+d,auditClientRemoteServerLocal:t+d,audittrialbalanceCursorRemoteServer:t+"api/trialbalance/",auditleadsheetCursorRemoteServer:t+"api/leadsheet/",auditcontrolCodeCursorRemoteServer:t+"api/controlcodes/",auditmaterialityCursorRemoteServer:t+"api/materiality/",auditworkprogramCursorRemoteServer:t+"api/workprogram/",auditgeneralLedgerCursorRemoteServer:t+"api/generalledger/",auditforeignExchangeCursorRemoteServer:t+"api/foreignexchange/",auditadjustmentsCursorRemoteServer:t+"api/adjustment/",auditcommonServicesCursorRemoteServer:t+"api/tickmark/",auditcommonServiceCursorRemoteServer:t+S,bladesRemoteServer:p+"api/blade/",nextboardRemoteServer:n+"api/nbadvance/",nboardcommonstorageserver:n+"api/azurestorage/",agmRemoteServer:m+"api/agm/",brtemplateRemoteServer:m+"api/template/",brDirectorsRemoteServer:m+"api/companyregistration/",taxClassificationRemoteServer:c+"api/classification/",taxMultiplierRemoteServer:c+"api/schedule/",docRemoteServer:e+"api/document/",reportsServer:app_configuration.app_config.api_services.reports_api_service,dashboardserver:app_configuration.app_config.api_services.dashboard_api_service,powerbiserver:app_configuration.app_config.api_services.powerbi_api_service}}angular.module("appsworld").factory("serviceConfig",e),e.$inject=[]}();
!function(){"use strict";function e(n,i,e,t,a,r,u,l,s){var d=this;function c(e){e&&(d.selectedModuleName=e.Name,d.moduleActions1=e.ModuleDetails,d.moduleActions=t.moduleLinks(e),n.moduleActionsObj=d.moduleActions)}d.selectedModuleName=null,d.checkRole=function(e){return n.role===e},d.setModuleDetailId=function(e){l.setItem("ModuleDetailId",e),l.setSessionItem("ModuleDetailId",e)},function(){var e=l.getCookie("moduleInfo");if(e){var o=JSON.parse(e);i.getEntities(r.admincommonRemoteServer+"modulemaster").then(function(e){var t=e.data.filter(function(e,t,a){return parseInt(e.Id)===parseInt(o.id)&&e.Name===o.name});c(t[0])})}else if(n.companyId&&app_configuration.app_config.current_module){var t=window.location.host.split(":")[0];i.getEntities(r.admincommonRemoteServer+"GetModuleMasterAndDetails?moduleName="+app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)).then(function(e){e.data&&(l.setCookie("moduleInfo",{name:e.data.Name,id:e.data.Id},"/",t),c(e.data))})}var a=angular.copy(app_configuration.app_config.current_module);if("admin"==app_configuration.app_config.current_module)switch(n.role){case"Super User":a="Super User";break;case"Super Admin":a="Super Admin";break;default:a=app_configuration.app_config.current_module}s.module_details(a).then(function(e){d.moduleDetails=s.group_module_details(e.data),n.IndividualModuleDetails=!0,n.module_details=e.data;var t=e.data.ModuleDetails;a=[];var a=t.filter(function(e){if(e.Url==(u.current.data.navigationpath?u.current.data.navigationpath:u.current.name))return e.GroupName});d.avtivatedGroupName=0<a.length?a[0].GroupName:"",e.data.ModuleDetails[0].Heading.toLocaleLowerCase()==app_configuration.app_config.current_module+" cursor".toLocaleLowerCase()&&l.setItem("Dash_Id",e.data.ModuleDetails[0].Id)})}(),e.$state=u,d.dashboard=function(e){u.go("client.dashboard.iframesource",{reportPath:e})},d.getClass=function(e){return u.includes(e)},d.isNav=function(){return"true"!=l.getItem("IsSetupRoute")},d.redirectto=function(){window.open(app_configuration.app_config.module_linking.support,"_blank")},d.activegroup=function(e){return(-1==e.Url.indexOf("(")?e.Url:e.Url.substr(0,e.Url.indexOf("(")))==(u.current.data.navigationpath?u.current.data.navigationpath:u.current.name)},d.setModuleDetailId=function(e,t,a){l.setItem("isBot",t),l.setItem("isAnalytics",a),l.setItem("ModuleDetailId",e),l.setSessionItem("ModuleDetailId",e),l.setItem("MenuModuleDetailId",e)}}function t(){return{moduleLinks:function(e){return function(e){var a=[],t=[];$.each(e.ModuleDetails,function(e,t){-1===$.inArray(t.GroupName,a)&&a.push(t.GroupName)});for(var o=0;o<=a.length-1;o++){t.push({GroupName:a[o],List:[],MasterUrl:null,CssSprite:null});for(var n=0;n<=e.ModuleDetails.length-1;n++)a[o]===e.ModuleDetails[n].GroupName&&(t[o].MasterUrl=t[o].MasterUrl?t[o].MasterUrl:e.ModuleDetails[n].MasterUrl,t[o].CssSprite=t[o].CssSprite?t[o].CssSprite:e.ModuleDetails[n].CssSprite,t[o].List.push(e.ModuleDetails[n]))}return t}(e)}}}angular.module("appsworld").controller("navigationController",e).factory("navigationContext",t),t.$inject=[],e.$inject=["config","commonService","$scope","navigationContext","$cookies","serviceConfig","$state","zStorageEnc","framework"]}();
!function(){"use strict";function e(e,t,r,n,a,d){return{getAddressGridOptions:function(e){return{dataSource:{type:"json",data:e,pageSize:20},sortable:!0,pageable:{refresh:!0,buttonsCount:5},filtarable:!0,columns:[{field:"AddType",title:"Address Type"},{field:"AddSectionType",title:"Address Section Type"},{title:"Address",template:""}]}},addressObject:function(e,d){return{Id:r.guid(),AddSectionType:"",AddType:"",AddTypeId:d,AddTypeIdInt:d,AddressBookId:"",Status:"Active",RecordStatus:"Added",AddressBook:t.addressBook()}},addressTypeLookUp:function(e,d){var t="client"==app_configuration.app_config.current_module?"Client Cursor":"workflow"==app_configuration.app_config.current_module?"Workflow Cursor":null;d=d||null;a.isPartner?a.partnerId:a.companyId;var o=n.admincommonRemoteServer+"addresslu?categorycode="+e+"&selectedAddType="+d+"&moduleName="+t;return r.getEntities(o)}}}angular.module("addressbook",[]).factory("addressBookDataContext",e),e.$inject=["$http","DefaultValues","commonService","serviceConfig","config","framework"]}();
!function(){"use strict";var d={addressObject:void 0,addressTotalObject:void 0};angular.module("addressbook").value("addrConfig",d)}();
angular.module("addressbook").directive("addressModule",["config",function(e){return{restrict:"E",templateUrl:"CustomDirectives/addressBook/addrbook.html",scope:{addressObjects:"=addressObjects",adType:"=adType",adId:"=adId",isView:"=",addressType:"=addressType"},require:"ngModel",link:function(e,t,d,s){e.$watch("addressObjects",function(){e.addressObjects||(e.addressObjects=[]),s.$setViewValue(e.addressObjects)})},controller:["$scope","addressBookDataContext","$rootScope","addrConfig","commonService","$uibModal",function(o,e,r,t,i,l){r.addtype=o.adType,r.addtypeid=o.adId,r.addressType=o.addressType,o.selection=[],o.toggleSelection=function(e){var t=o.selection.indexOf(e);o.selection&&(o.selection=[]),-1<t?o.selection.splice(t,1):(r.selectedAdd=e.AddSectionType,o.selection.push(e))},o.editAddress=function(){0===o.selection.length||1<o.selection.length?i.notify.warning("Please Select One Address"):o.open("md",o.addtype,o.addtypeid,"edit",o.addressObjects,o.selection[0])},o.deleteAddress=function(e){0===o.selection.length||1<o.selection.length?i.notify.warning("Please Select One Address"):i.confirmationDialog("Confirm Delete!","Do you really want to delete this address?","Ok","Cancel").then(function(e){"ok"===e?angular.forEach(o.addressObjects,function(e,t){e.Id===o.selection[0].Id&&("Added"==e.RecordStatus?o.addressObjects.splice(t,1):o.addressObjects[t].RecordStatus="Deleted")}):o.selection=[]})},o.$on("saveAddressObject",function(e,d){1<o.$$listenerCount["saveCancelLead Info"]&&(o.$$listenerCount["saveCancelLead Info"]=0),"new"===d.data.type?(o.addressObjects=o.addressObjects?o.addressObjects:[],o.addressObjects.push(d.data.object)):"edit"===d.data.type&&angular.forEach(o.addressObjects,function(e,t){e.Id===d.data.object.Id&&(o.addressObjects[t]=d.data.object)}),o.selection=[]}),r.$on("cancelAddressObject",function(){o.selection=[]}),o.open=function(e,t,d,s,n,a,c){n=n||[],"edit"===(r.type=s)&&(0===a.length||1<a.length)?i.notify.warning("Please Select One Address"):2<=n.filter(function(e){return"Deleted"!=e.RecordStatus}).length&&"new"===s?i.notify.warning("Unable to add more than Two Records!"):l.open({templateUrl:"myAddrBook.html",controller:"myModalAddrInstance",size:e,backdrop:"static",resolve:{items:function(){return o.items},options:{totalAddressObject:n,addressObject:a}}}).result.then(function(d){"new"===d.data.type?(o.addressObjects=o.addressObjects?o.addressObjects:[],o.addressObjects.push(d.data.object)):"edit"===d.data.type&&angular.forEach(o.addressObjects,function(e,t){e.Id===d.data.object.Id&&(o.addressObjects[t]=d.data.object,o.addressObjects[t].RecordStatus="Added"==o.addressObjects[t].RecordStatus?"Added":"Modified")}),o.addressObjects=angular.copy(o.addressObjects),o.selection=[]},function(){})},o.checkAddressbooklength=function(){if(o.addressObjects){if(0==o.addressObjects.length)return!0;var e=o.addressObjects.filter(function(e){return"Deleted"==e.RecordStatus});return o.addressObjects.length-e.length==0}}}]}}]);
var app=angular.module("addressbook");function myModalAddrInstance(e,s,t,o,d,a,r,c,n,i,l){var u,A;function b(){o.addressObject.AddressBook.PostalCode="",o.addressObject.AddressBook.Street="",o.addressObject.AddressBook.BlockHouseNo="",o.addressObject.AddressBook.BuildingEstate="",o.addressObject.AddressBook.State="",o.addressObject.AddressBook.Country="",o.addressObject.AddressBook.City="",o.addressObject.AddressBook.UnitNo=""}function B(e){o.addressObject.AddressBook.PostalCode=e.PostalCode,o.addressObject.AddressBook.Street=e.Street,o.addressObject.AddressBook.BlockHouseNo=e.BlockHouseNo,o.addressObject.AddressBook.BuildingEstate=e.BuildingEstate,o.addressObject.AddressBook.State=e.State,o.addressObject.AddressBook.Country=e.Country,o.addressObject.AddressBook.City=e.City,o.addressObject.AddressBook.UnitNo=e.UnitNo}function O(){null!=l.getItem("localAddr")&&l.removeItem("localAddr"),null!=l.getItem("foreignAddr")&&l.removeItem("foreignAddr")}o.addressTotalObject=e.totalAddressObject,o.selction=e.addressObject,function(){O(),"new"===s.type&&(s.selectedAdd=null);if(r.addressTypeLookUp(s.addressType,s.selectedAdd).then(function(e){o.addressTypeLU=e.data.Lookups,"new"===s.type&&e.data.DefaultValue&&(o.addressObject.AddSectionType=e.data.DefaultValue)}),"new"===s.type){var e=r.addressObject(s.addtype,s.addtypeid);e.AddressBook.IsLocal="localaddress",o.addressObject=e}else if("edit"===s.type){var d=angular.copy(o.selction);d.AddressBook.IsLocal=!0===d.AddressBook.IsLocal?"localaddress":"foreignaddress",o.addressObject=d}}(),s.$broadcast("IsAddressLoader"),o.elasticSearchApi=a.elasticSearchRemoteServer+"AutoCompletePostalCodes?indexName=postalcodes&indexField=PostalCode&noOfRecords=20&input=",o.Countries=c.countries(),o.countries={select:function(e){var d=this.dataItem(e.item.index());o.addressObject.AddressBook.Country=d.name},filter:"contains"},o.addressSectionChanged=function(e){if(function(e){u={PostalCode:"",BuildingEstate:"",BlockHouseNo:"",Country:"",State:"",City:"",Street:"",UnitNo:""},A={PostalCode:"",BuildingEstate:"",BlockHouseNo:"",Country:"",State:"",City:"",Street:"",UnitNo:""},"localaddress"===e&&(A.PostalCode=o.addressObject.AddressBook.PostalCode,A.BuildingEstate=o.addressObject.AddressBook.BuildingEstate,A.BlockHouseNo=o.addressObject.AddressBook.BlockHouseNo,A.Country=o.addressObject.AddressBook.Country,A.State=o.addressObject.AddressBook.State,A.City=o.addressObject.AddressBook.City,A.Street=o.addressObject.AddressBook.Street,A.UnitNo=o.addressObject.AddressBook.UnitNo),"foreignaddress"===e&&(u.PostalCode=o.addressObject.AddressBook.PostalCode,u.BuildingEstate=o.addressObject.AddressBook.BuildingEstate,u.BlockHouseNo=o.addressObject.AddressBook.BlockHouseNo,u.Country=o.addressObject.AddressBook.Country,u.State=o.addressObject.AddressBook.State,u.City=o.addressObject.AddressBook.City,u.Street=o.addressObject.AddressBook.Street,u.UnitNo=o.addressObject.AddressBook.UnitNo)}(e),"localaddress"===e)l.setItem("foreignAddr",JSON.stringify(A)),b(),JSON.parse(null!=l.getItem("localAddr"))?B(JSON.parse(l.getItem("localAddr"))):(o.addressObject.AddressBook.Country="Singapore",o.addressObject.AddressBook.State="Singapore",o.addressObject.AddressBook.City="Singapore");else if("foreignaddress"===e){l.setItem("localAddr",JSON.stringify(u)),b();var d=l.getItem("foreignAddr");d&&JSON.parse(null!=d)&&B(JSON.parse(d))}},o.selectedObject=function(e){if(e){var d=e.originalObject;o.ispostval=!1,o.addressObject.AddressBook.PostalCode=d.PostalCode,o.addressObject.AddressBook.BuildingEstate=d.BuildingName,o.addressObject.AddressBook.BlockHouseNo=d.BuildingNumber,o.addressObject.AddressBook.Country=d.Country,o.addressObject.AddressBook.State=d.State,o.addressObject.AddressBook.City=d.State,o.addressObject.AddressBook.Street=d.StreetName,o.isDisableRequired=!0}},o.postalCodeChanged=function(){o.isDisableRequired=!1,o.addressObject.AddressBook.PostalCode=document.getElementById("postalAutocmptl_value").value},o.save=function(){var e=n.validate("addrBook");if(o.servicecodeerror=!1,o.isRpostval=!1,"localaddress"===o.addressObject.AddressBook.IsLocal){var d=document.getElementById("postalAutocmptl_value").value;(isNaN(d)||6!=d.length&&""!=d)&&(o.isRpostval=!0)}if(!e.isValidationRequired&&!o.isRpostval){if(o.IsLocalDummy="localaddress"===o.addressObject.AddressBook.IsLocal,o.count=o.addressTotalObject.filter(function(e,d,s){return e.AddSectionType===o.addressObject.AddSectionType&&e.AddressBookId!=o.addressObject.AddressBookId&&"Deleted"!=e.RecordStatus}),1<=o.count.length)return o.validationMessages=[],o.validationMessages.push("Unable to save this Record!, Record already exist with same Address Type"),void(o.isValidationRequired=!0);o.addressObject.AddressBook.IsLocal="localaddress"===o.addressObject.AddressBook.IsLocal,o.addressObject.AddType=s.addtype,!0===isNaN(s.addtypeid)?o.addressObject.AddTypeId=s.addtypeid:o.addressObject.AddTypeIdInt=s.addtypeid,isNaN(s.addtypeid)?(o.addressObject.AddTypeIdInt=null,o.addressObject.AddTypeId=s.addtypeid):(o.addressObject.AddTypeIdInt=s.addtypeid,o.addressObject.AddTypeId=null),o.addressObject.AddressBookId=o.addressObject.AddressBook.Id,O(),o.addressTotalObject="",s.$broadcast("IsAddressLoaderClosed"),t.close({data:{type:s.type,object:o.addressObject}})}},o.cancel=function(){O(),s.$broadcast("cancelAddressObject"),t.dismiss("cancel"),o.addressTotalObject=""}}app.controller("addressModel",["$rootScope","$scope","$uibModal","config","addrConfig","commonService","zStorageEnc",function(c,n,i,e,d,l,s){n.open=function(e,d,s,t,o,a,r){(o=o||[],"edit"===(c.type=t)&&(0===a.length||1<a.length))?l.notify.warning("Please Select One Address"):2<=o.filter(function(e){return"Deleted"!=e.RecordStatus}).length&&"new"===t?l.notify.warning("Unable to add more than Two Records!"):i.open({templateUrl:"myAddrBook.html",controller:"myModalAddrInstance",size:e,backdrop:"static",resolve:{items:function(){return n.items}}}).result.then(function(e){n.selected=e},function(){})}}]),app.controller("myModalAddrInstance",["options","$rootScope","$uibModalInstance","$scope","config","serviceConfig","addressBookDataContext","DefaultValues","formValidate","addrConfig","zStorageEnc","notify",myModalAddrInstance]);
!function(){"use strict";angular.module("addressbook").directive("communication",[function(){return{restrict:"E",templateUrl:"CustomDirectives/addressBook/communication.html",scope:{jsonString:"=jsonString",isView:"=",limitCommunication:"=?",source:"=?"},require:"ngModel",link:function(e,n,o,t,i){e.$watch("jsonString",function(){var n,o,i=angular.copy(e.jsonString);i&&(n="'",o='"',i=i.replace(new RegExp(n,"g"),o)),i&&t.$setViewValue(function(n){var o,i="[",e=!1;angular.forEach(n,function(n){(""!=n.key&&null!=n.key&&"null"!=n.key&&"undefined"!=n.key&&null!=n.key||""!=n.value&&null!=n.value&&"null"!=n.value&&"undefined"!=n.value&&null!=n.value)&&(e=!0,i+='{"key":"'+n.key+'","value":"'+n.value+'"},')}),o=e?i.substring(0,i.length-1)+"]":"";return o}(JSON.parse(i)))})},controller:["$http","$scope","$rootScope","serviceConfig","config","commonService","formValidate","customValidations",function(n,t,e,o,i,a,u,c){t.$watch(function(){return t.jsonString},function(n){if(""===t.jsonString||void 0===t.jsonString||null===t.jsonString||'[{ "key": "", "value": "" }]'===t.jsonString||'["":""]'===t.jsonString)t.communication=[{key:"",value:""}];else{t.communication=[],t.communications=[],t.phones=[],t.jsonString&&(t.jsonString=function(n,o,i){return n.replace(new RegExp(o,"g"),i)}(t.jsonString,"'",'"'));var o=JSON.parse(t.jsonString);for(var i in o){var e=o[i];t.communication.push({key:e.key,value:e.value})}}m()}),t.$watch(function(){if(t.source){t.sourcefromlu=!0;var n=[];if(t.source.Lookups)for(var o=0;o<=t.source.Lookups.length-1;o++)n.push(t.source.Lookups[o]);t.phoneTypes=n}});var r=o.adminmasterRemoteServer+"ControlCodeCategory";if("null"===i.companyId||null===i.companyId||"undefined"===i.companyId||void 0===i.companyId?0:i.companyId,t.source){t.sourcefromlu=!0;var l=[];if(t.source.Lookups)for(var s=0;s<=t.source.Lookups.length-1;s++)l.push(t.source.Lookups[s]);t.phoneTypes=l}else t.sourcefromlu=!1,a.getEntities(r).success(function(n){for(var o=[],i=0;i<=n.ControlCodes.length-1;i++)"Active"==n.ControlCodes[i].Status&&o.push(n.ControlCodes[i]);return t.phoneTypes=o,n});function m(n,o){t.isContactCMVT=!1,t.cntCMMValidationText="";var i=/null|undefined|""|'null'|'undefined'/;angular.forEach(t.communication,function(n){!i.test(n.key)&&""!==n.key||""===n.value?i.test(n.key)&&""==n.key||""===n.value?i.test(n.key)||""==n.key||""!==n.value||(t.isContactCMVT=!0,t.cntCMMValidationText="Please Enter "+n.key):!0!==c.validateCommunicationType(n.key,n.value)&&(t.isContactCMVT=!0,t.cntCMMValidationText="Invalid "+n.key):(t.isContactCMVT=!0,t.cntCMMValidationText="Please select Communication Type")}),!0===t.isContactCMVT?e.isCommunicationValidationRequired=!0:e.isCommunicationValidationRequired=!1}function d(n){var o="[";return angular.forEach(n,function(n){o=o+'{"key":"'+n.key+'","value":"'+n.value+'"},'}),o.substring(0,o.length-1)+"]"}t.setComm=function(){t.jsonString=d(t.communication)},t.addCommunication=function(){t.limitCommunication?t.limitCommunication>t.communication.length?t.communication.push({key:"",value:""}):a.notify.warning("You cannot add more than "+t.limitCommunication+" communications"):t.communication.push({key:"",value:""})},t.deleteCommunication=function(n,o){if(1!==t.communication.length&&!t.isView){t.communication.splice(n,1),o=o||t.communication;for(var i=0;i<=o.length-1;i++)"null"==o[i].key&&""!=o[i].Value?m():"null"==o[i].key&&""!=o[i].key||""==o[i].Value?""!=o[i].key&&""!=o[i].Value?(t.isContactCMVT=!1,t.cntCMMValidationText=""):t.isContactCMVT=!0:(m(),t.jsonString=d(t.communication));e.isCommunicationValidationRequired=!1}},t.categoryChange=function(n,o){t.jsonString=d(t.communication),m(n,o)},t.categoryChangevalidation=function(n,o){t.setComm(),m(n,o)},e.getCommunication=function(){u.validate("communication").isValidationRequired?e.isCommunicationValidationRequired=!0:e.isCommunicationValidationRequired=!1,t.jsonString=a.getPhoneString(t.communication),t.comm=t.jsonString}}]}}])}();
!function(){"use strict";angular.module("appsworld").factory("uploadService",e);function e(o,n,a,u){return{features:[{featureId:0,featureName:"All Documents"},{featureId:1,featureName:"Recent Documents"},{featureId:2,featureName:"TrailBalance"},{featureId:3,featureName:"Planning"},{featureId:4,featureName:"WorkProgram"},{featureId:5,featureName:"Reporting"},{featureId:6,featureName:"Completion"},{featureId:7,featureName:"Approval"}],masterObj:function(e){var t=angular.copy(e);return t.Status="Active",t.CreatedDate=n(new Date).format("YYYY-MM-DDThh:mm"),t.UserCreated=o.userFullName,t},createdocrepo:function(e,t){var r=u.nextboardRemoteServer+"createdocrepodoitory";return a.getEntities(r)},docrepoDetail:function(){var e=u.nextboardRemoteServer+"createdocrepositorydetail";return a.getEntities(e)},saveDocrepo:function(e){var t=u.nextboardRemoteServer+"savedocrepository";return a.saveEntity(t,e)},getdoc:function(e){var t=u.nextboardRemoteServer+"createdocrepository";return a.saveEntity(t,e)},resultObj:function(e,t,r){var a=angular.copy(t);return a.RecordStatus="Added",a.Id=e.Id,a.FilePath=e.Large,a.Large=e.Large,a.Medium=e.Medium,a.Small=e.Small,a.FileName=r,a.CreatedDate=n(new Date).format("YYYY-MM-DDThh:mm"),a.UserCreated=o.userFullName,a.DocumentType=e.Large.split(".").pop(),a.Status="Active",a},sendDocrepo:function(e,t,r){var a=angular.copy(e);a.Id="000000000000000000000000",a.CompanyId=o.companyId,a.SubscriptionType=t,a.Status="Active","All Documents"==r?(a.Type="All",a.SubSubscriptionType=null):"Recent Documents"==r?(a.Type="Recent",a.SubSubscriptionType=null):(a.Type="Recent",a.SubSubscriptionType=r);return a}}}e.$inject=["config","$moment","commonService","serviceConfig"]}();
!function(){"use strict";angular.module("appsworld").directive("uploaddocDirective",[function(){return{restrict:"E",templateUrl:"CustomDirectives/uploadDocument/uploadDocument.html",scope:{uploadUrl:"=",documentsList:"=",permissions:"=",cursorType:"=",featureName:"=",featureId:"="},bindToController:!0,controller:"uploadDocCtrl",controllerAs:"vm"}}]).controller("uploadDocCtrl",e).controller("uploaddocCtrl",o);function e(e,o,t,i,a,n,c){var l=this;function s(o,t){l.featureName=o,l.featureId=t,i.createdocrepo().then(function(e){l.List=i.sendDocrepo(e.data,l.cursorType,o),l.fileDetails=l.List,d(l.List),document.getElementById(t)&&document.getElementById(t).focus()})}function d(t){i.getdoc(t).then(function(e){if(null!=t.SubSubscriptionType||"All"!=t.Type&&"Recent"!=t.Type)l.documentsList=i.masterObj(e.data[0]),l.list=l.documentsList.DocRepositoryDetails;else{l.allfiles=[];for(var o=0;o<e.data.length;o++)l.allfiles=l.allfiles.concat(e.data[o].DocRepositoryDetails);l.list=l.allfiles}})}l.getDocs=s,l.getFileExt=function(e){return e?l.fileExt.hasOwnProperty(e.toLowerCase())?l.fileExt[e.toLowerCase()]:"doc-icons default-icon":""},l.Features=i.features,l.fileExt={pdf:"doc-icons pdf-icon",xls:"doc-icons xls-icon",xlxs:"doc-icons xlxs-icon",txt:"doc-icons txt-icon",odt:"doc-icons odt-icon",ods:"doc-icons ods-icon",docx:"doc-icons docx-icon",doc:"doc-icons doc-icon",csv:"doc-icons csv-icon",gif:"doc-icons gif-icon",jpeg:"doc-icons jpeg-icon",png:"doc-icons png-icon",default:"doc-icons default-icon"},l.show=function(e){l.List.Type=e,d(l.List)},l.upload=function(){l.fileData=angular.copy(i.fileDetails),t.open({templateUrl:"uploadDocuments",size:"md",controller:"uploaddocCtrl",controllerAs:"vm",backdrop:"static",resolve:{options:function(){return l.fileDetails},url:function(){return l.uploadUrl}}}).result.then(function(e){"cancel"!=e&&s(l.documentsList.SubSubscriptionType)})}}function o(o,e,t,i,a,n){var c=this;c.uploadurl=i,c.validationMessage="",c.isValidationRequired=!1,c.Save=function(e){if(c.data={},!c.filename)return void(c.validationMessage="Please upload a File.");if(""==e.Description)return void(c.validationMessage="Invalid data!Please Verify Description.");e.MediaRepoId=c.object.Id,c.data=a.resultObj(c.result_filedata,e,c.filename),c.object.DocRepositoryDetails.push(c.data),a.saveDocrepo(c.object).then(function(e){o.close(e.data)})},c.object=angular.copy(e),c.Cancel=function(){o.close("cancel")},a.docrepoDetail().then(function(e){c.file=e.data}),c.uploadFile=function(o){if(o){var e=zStorageEnc.getSessionItem("ModuleDetailId");n.upload({url:c.uploadurl||t.nboardcommonstorageserver+"uploadfile",data:{file:o},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:zStorageEnc.encrypt({companyId:config.companyId,userName:config.userName,moduleDetailId:e||zStorageEnc.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){c.validationMessage="",c.onFileUploadSuccess({data:e.data,file:o})},function(e){c.validationMessage=null==e.data?"Invalid file!Please choose valid file.":e.data.Message})}},c.onFileUploadSuccess=function(e){c.result_filedata=angular.copy(e.data.result),c.filename=c.result_filedata.Large.replace(/^.*[\\\/]/,"")}}e.$inject=["Upload","serviceConfig","$uibModal","uploadService","$scope","commonService","config"],o.$inject=["$uibModalInstance","options","serviceConfig","url","uploadService","Upload"]}();
!function(){"use strict";angular.module("appsworld").factory("uploadfileService",e);function e(i,o,t,a){return{_docDetails:function(){var e=t.nextboardRemoteServer+"createdocrepositorydetail";return a.getEntities(e)},fileDetails:function(e,t,a){var r=angular.copy(e);return r.RecordStatus="Added",r.MongoFilesId=t.FileId,r.FilePath=t.FilePath,r.TabName=a,r.Type=a,r.FileName=t.FileName,r.DisplayFileName=t.FileName,r.Id=t.Id,r.ModuleName=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",r.MediaType=t.MediaType,r.UserCreated=i.userFullName,r.CreatedDate=o(new Date).format("YYYY-MM-DDThh:mm"),r.Status="Active",r},downloadTemplate:function(e){t.generictemplateRemoteServer},deleteFile:function(e,t){var a=e.indexOf(t);return t.RecordStatus="Deleted",e[a]=t,e}}}e.$inject=["config","$moment","serviceConfig","commonService"]}();
!function(){"use strict";angular.module("appsworld").directive("uploadfileDirective",[function(){return{restrict:"E",templateUrl:"CustomDirectives/uploadDocs/uploadDocs.html",scope:{uploadUrl:"=",files:"=",dateFormat:"=",isDisable:"=",screenName:"="},bindToController:!0,controller:"uploadfileCtrl",controllerAs:"vm"}}]).controller("uploadfileCtrl",e);function e(i,l,t,o,a){var c=this;c.download=function(e){null===e.Large?c.FilePath=i.generictemplateRemoteServer+"getmongodbfile?id="+e.MongoFilesId:c.FilePath=e.Large},c.deletefile=function(e){c.files=o.deleteFile(c.files,e)},c.validationMessage="",c.getFileExt=function(e){return e?c.fileExt.hasOwnProperty(e.toLowerCase())?c.fileExt[e.toLowerCase()]:"doc-icons default-icon":""},c.FilePath="",o._docDetails().then(function(e){c.doc_details=e.data}),c.fileExt={pdf:"doc-icons pdf-icon",xls:"doc-icons xls-icon",xlxs:"doc-icons xlxs-icon",txt:"doc-icons txt-icon",odt:"doc-icons odt-icon",ods:"doc-icons ods-icon",docx:"doc-icons docx-icon",doc:"doc-icons doc-icon",csv:"doc-icons csv-icon",gif:"doc-icons gif-icon",jpeg:"doc-icons jpeg-icon",png:"doc-icons png-icon",default:"doc-icons default-icon"},c.uploadFile=function(e){if(e!=[]&&e.length){var o=a.getSessionItem("ModuleDetailId");angular.forEach(e,function(e){c.doc=e,l.upload({url:c.uploadurl||i.azureStorageRemoteServer+"UploadFile1",data:{file:c.doc},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:a.encrypt({companyId:t.companyId,userName:t.userName,moduleDetailId:o||a.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){c.validationMessage="",c.onFileUploadSuccess({data:e.data[0],file:c.doc})},function(e){c.validationMessage=null==e.data?"Invalid file!Please choose valid file.":e.data.Message})})}},c.onFileUploadSuccess=function(e){c.validationMessage="",c.result_filedata=angular.copy(e.data),c.files.push(o.fileDetails(c.doc_details,c.result_filedata,c.screenName))}}e.$inject=["serviceConfig","Upload","config","uploadfileService","zStorageEnc"]}();
!function(){"use strict";function e(e,c,r,t){return{getPostalCodeData:function(){var e=c.elasticSearchRemoteServer+"AutoComplete?indexName=postalcodes&input=null&indexField=PostalCode&noOfRecords=100";return new kendo.data.DataSource({transport:{read:{dataType:"json",url:e,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+mgr.access_token),e.setRequestHeader("AuthInformation",zStorageEnc.encrypt({companyId:t.partnerId,userName:t.userName,moduleDetailId:localStorage.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}}}})},getContactAssociations:function(e,t){var n;{if(e&&"new"!=t)return n=c.LeadRemoteContactServerVersion+"GetAssociationsByContact?Id="+e+"&accid="+t,r.getEntities(n);if("new"===t&&e)return n=c.LeadRemoteContactServerVersion+"GetAssociationsByContactForNew?Id="+e+"&accid="+t,r.getEntities(n)}},getcontactAutoLookup:function(e,t,n,o){n="VendorContact"==n&&"CC"==t?"Vendor":"CC"==t?"Account":"BC"==t?"Entity":"Client";return o?c.admincommonRemoteServer+"contacts?accountId="+e+"&entitytype="+n+"&searchBy="+o:c.admincommonRemoteServer+"contacts?accountId="+e+"&entitytype="+n+"&searchBy="},getContactLookupObj:function(e,t,n,o){t="new"==t?"00000000-0000-0000-0000-000000000000":t,o=o||"00000000-0000-0000-0000-000000000000";var a=c.admincommonRemoteServer+"CreateContactDirective?relationId="+t+"&type="+e+"&contactMode="+n+"&contactId="+o;return r.getEntities(a)},getcontactdetailobj:function(e){var t=c.admincommonRemoteServer+"getcontactdetail?contactId="+e.ContactId;return r.getEntities(t)},contactCommunication:function(e){for(var t=[],n=[],o=0;o<e.length;o++)-1==t.indexOf(e[o].key)&&t.push(e[o].key);for(var a=0;a<t.length;a++)n.push({key:t[a],value:e.filter(function(e){return(e.type?e.type:e.key)==t[a]}).map(function(e){return e.value}).join(", ")});return n}}}angular.module("contactdirectiveapp",[]).factory("contactDirectiveFactory",e),e.$inject=["$http","serviceConfig","commonService","config"]}();
function contactcropImgCtrl(o,n,t){var e,a;n.Remarks=t,n.myImage="",n.myCroppedImage="",e=t.currentTarget.files[0],a=new FileReader,n.imageName=e.name,a.onload=function(e){n.$apply(function(t){t.myImage=e.target.result})},a.readAsDataURL(e),n.save=function(t,e){var a={url:t,name:n.imageName};o.close(a)},n.close=function(){o.dismiss()}}function personalContactEdit(t,e,o,n,i,a,c,l,s,d,r,u,m,C,p){o.contactLookupDataObj=e.lookups,o.idTypes=o.contactLookupDataObj.IdTypeLU,o.isContactView=e.isContactView,o.salutationdata=o.contactLookupDataObj.SalutationLU.Lookups,o.contactObj=angular.copy(e.data),o.addressType=angular.copy(e.adType),o.contactObj.Salutation=o.contactObj.Salutation?o.contactObj.Salutation:e.isEdit?null:o.contactLookupDataObj.SalutationLU.DefaultValue,o.communicationObj=o.contactLookupDataObj.AddressBookLU.Lookups,o.communicationLU=o.contactLookupDataObj.CommunicationLU,o.communicationLimit=6,o.countryNames=a.countries(),o.imgUrl="content/images/iconsnew/userprofile.png",o.isValidationRequired=!1,o.imgUrl=o.contactObj.Small?o.contactObj.Small:"content/images/iconsnew/userprofile.png",e.isContactView&&(o.isView=!0,C(function(){$("select").prop("disabled",!0),r.getViewMode(["personalcontactform"])},500)),o.upload=function(t,e){var a=p.getSessionItem("ModuleDetailId");d.upload({url:n.azureStorageRemoteServer+"UploadLogo",headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:p.encrypt({companyId:i.companyId,userName:i.userName,moduleDetailId:a||p.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})},data:{file:d.dataUrltoBlob(t,e)}}).then(function(t){o.myImage="",o.myCroppedImage="",function(t){o.isFileUploaded=!0,o.imgUrl=t.data.Small,o.mediaRepoId=t.data.Id,o.contactObj.PhotoId=o.mediaRepoId,o.contactObj.Small=o.imgUrl,o.contactObj.Original=o.imgUrl,o.contactObj.Medium=o.imgUrl,o.contactObj.Large=o.imgUrl,document.getElementById("img").innerHTML='<img src="'+o.imgUrl+'" alt="sa" />'}(t)})},o.dateplaceholder=i.dateFormat,o.dateFormat=i.dateFormat,o.openCDatePicker=function(t,e){t.preventDefault(),t.stopPropagation(),o.datePicker[e]=!0!==o.datePicker[e]},o.closeAll=function(){o.DateOpen=!1},o.datePicker={DateOpen:!1},o.datepickerOptions={format:i.dateFormat,class:"datepicker",showWeeks:"false"},o.formats=[i.dateFormat],o.format=o.formats[0],o.Countries=Countries,o.countries={select:function(t){var e=this.dataItem(t.item.index());o.contactObj.CountryOfResidence=e.name}};var f=function(t){"image/gif"==t.currentTarget.files[0].type||"image/jpeg"===t.currentTarget.files[0].type||"image/png"===t.currentTarget.files[0].type?s.open({templateUrl:"cropimg.html",controller:"contactcropImgCtrl",backdrop:"static",resolve:{options:function(){return t}}}).result.then(function(t){o.upload(t.url,t.name)}):r.notify.warning("file format should be in JPEG/PNG/GIF")},g=setInterval(function(){document.querySelectorAll("#personalfileInput")&&(angular.element(document.querySelectorAll("#personalfileInput")).on("change",f),clearInterval(g))},100);o.cancel=function(){t.dismiss("cancel")},o.saveContact=function(){return o.validationMessages=[],c.validate("personalcontactform").isValidationRequired||u.isCommunicationValidationRequired||u.isPostValRequired?(o.validationMessages.push({validationText:"Invalid data, please verify"}),void(o.isValidationRequired=!0)):o.contactObj.DOB>new Date?(o.validationMessages=[],o.isValidationRequired=!0,o.validationMessages.push({validationText:"Date of Birth should not allow future dates !"}),void window.scrollTo(0,0)):void t.close({contactObj:o.contactObj})}}angular.module("contactdirectiveapp").directive("zCreateContact",[function(){return{restrict:"E",scope:{contactObject:"=",addressTitle:"=",infoTitle:"=",infoName:"=",showContactAssociation:"=",isRemember:"=",isContactAutoLookUp:"=",isMultiDesignation:"=",isContactView:"=",isMatters:"=",isNotPrimory:"=",isShowBack:"=",isShowPrimary:"=",isEdit:"=",addressType:"=?",cursor:"=?"},templateUrl:"CustomDirectives/contactDirective/contactDirective.html",controller:["$rootScope","$scope","$timeout","$stateParams","$http","config","DefaultValues","serviceConfig","$state","contactDirectiveFactory","customValidations","$moment","commonService","formValidate","$uibModal","Upload","zStorageEnc",function(n,i,c,l,t,s,e,o,d,r,u,a,m,C,p,f,g){i.elasticSearchApi=o.elasticSearchRemoteServer+"AutoCompletePostalCodes?indexName=postalcodes&indexField=PostalCode&noOfRecords=20&input=",i.isView=!1,i.communicationLimit=6,i.adId=l.Id||l.id,i.validationMessages=[],i.isValidationRequired=!1,i.phones=[];var D="";i.isFieldsDisable=!1,i.imgUrl="content/images/iconsnew/userprofile.png",document.getElementById("img").innerHTML='<img src="'+i.imgUrl+'" alt="sa" />',i.isClicked=null,i.mode=i.isEdit?"Edit":"Add",i.Copy_communication_address=v,i.communications=[],$("#contactForm").on("keyup keypress",function(t){if(13===(t.keyCode||t.which))return t.preventDefault(),!1});function O(t){var e=this.dataItem(t.item.index());r.getcontactdetailobj(e).then(function(t){if(i.contactObj.ContactId=t.data.Id,i.contactObj.DOB=t.data.DOB?new Date(t.data.DOB.split("T")[0]):null,i.contactObj.Communication=t.data.Communication,i.contactObj.Addresses=t.data.Addresses,i.contactObj.PhotoId=t.data.PhotoId,i.contactObj.CountryOfResidence=t.data.CountryOfResidence,i.contactObj.FirstName=t.data.FirstName,i.contactObj.IdNo=t.data.IdNo,i.contactObj.IdType=t.data.IdType,i.contactObj.Salutation=t.data.Salutation,i.contactObj.IdType=parseInt(t.data.IdType),i.imgUrl=t.data.Small?t.data.Small:"content/images/iconsnew/userprofile.png",document.getElementById("img").innerHTML='<img src="'+i.imgUrl+'" alt="sa" />',i.contactObj.Large=t.data.Large,i.contactObj.Medium=t.data.Medium,i.contactObj.Small=t.data.Small,i.contactObj.Communication=t.data.Communication,i.contactObj.Addresses=t.data.Addresses,i.contactObj.IsLocal?i.isResLocal=!0:i.isResLocal=!1,"CC"==i.cursor&&"AccountContact"==i.addressType)return M(t.data.Id)},function(){})}function b(t,e){try{if(e.Id=t.Id,""==t.Salutation&&(t.Salutation=null),e.Salutation=null==t.Salutation?i.isEdit?null:i.contactLookupDataObj.SalutationLU.DefaultValue:t.Salutation,e.FirstName=t.FirstName,e.LastName=t.LastName,e.DOB=t.DOB,e.ContactDetailModel.Matters=t.ContactDetailModel.Matters,e.PhotoId=t.PhotoId,e.ContactDetailModel.UserCreated=t.ContactDetailModel.UserCreated,e.ContactDetailModel.CreatedDate=t.ContactDetailModel.CreatedDate,e.ContactDetailModel.ModifiedBy=t.ContactDetailModel.ModifiedBy,e.ContactDetailModel.ModifiedDate=t.ContactDetailModel.ModifiedDate,e.Communication=t.Communication,e.ContactDetailModel.Communication=t.ContactDetailModel.Communication,e.ContactDetailModel.Remarks=t.ContactDetailModel.Remarks,i.isContactView&&(i.isView=!0,c(function(){$("select").prop("disabled",!0),m.getViewMode(["contactForm"])},500)),""==t.ContactDetailModel.Designation&&(t.ContactDetailModel.Designation=null),e.ContactDetailModel.Designation=i.isEdit?t.ContactDetailModel.Designation:null==t.ContactDetailModel.Designation?i.contactLookupDataObj.DesignationLU.DefaultValue:t.ContactDetailModel.Designation,""!=e.ContactDetailModel.Matters&&null!=e.ContactDetailModel.Matters)for(var a=e.ContactDetailModel.Matters.split(";"),o=0;o<=a.length-1;o++)-1==i.selection.indexOf(a[o])&&i.selection.push(a[o]);else i.isContactAutoLookUp&&-1==i.selection.indexOf(i.contactLookupDataObj.MattersLU.DefaultValue)&&"AccountContact"==i.addressType&&i.selection.push(i.contactLookupDataObj.MattersLU.DefaultValue);if(i.matters?i.matters.length===i.selection.length&&(i.matterCheck=!0,$("#mattersCheck").attr("checked",!0)):i.matterCheck=!1,t.ContactDetailModel.Designation)if("object"==typeof t.ContactDetailModel.Designation){var n="";angular.forEach(t.ContactDetailModel.Designation,function(t){n=n+t+","}),e.ContactDetailModel.Designation=n.substring(0,n.length-1)}else"DIRECTOR"===t.ContactDetailModel.Designation&&(t.ContactDetailModel.Designation="Director"),"SECRETARY"===t.ContactDetailModel.Designation&&(t.ContactDetailModel.Designation="Secretary"),"string"==typeof t.ContactDetailModel.Designation&&i.isEdit&&"VendorContact"!=i.addressType&&(e.ContactDetailModel.Designation=-1!==t.ContactDetailModel.Designation.indexOf(",")?t.ContactDetailModel.Designation.split(","):t.ContactDetailModel.Designation);else t.ContactDetailModel.Designation=e.ContactDetailModel.Designation;e.AddressBookId=t.AddressBookId,e.ContactId=t.ContactId,e.ContactDetailModel.IsPrimaryContact=t.ContactDetailModel.IsPrimaryContact,e.ContactDetailModel.IsReminderReceipient=t.ContactDetailModel.IsReminderReceipient,e.CountryOfResidence=t.CountryOfResidence,e.AccountId=t.AccountId,e.IdType=Number(t.IdType),e.IdNo=t.IdNo,e.ContactDetailModel.Status=t.ContactDetailModel.Status,i.contactStatus="Active"!=t.ContactDetailModel.Status,e.Communication=t.Communication,e.ContactDetailModel.Communication=t.ContactDetailModel.Communication,e.Small=t.Small,e.Addresses=t.Addresses,e.ContactDetailModel.Addresses=t.ContactDetailModel.Addresses,"Invalid date"!=t.DOB&&null!=t.DOB||(t.DOB="");$("#demo1").val();e.DOB=t.DOB,e.ContactDetailModel.IsCopy=t.ContactDetailModel.IsCopy,t.Small?i.imgUrl=t.Small:i.imgUrl="content/images/iconsnew/userprofile.png",document.getElementById("img").innerHTML='<img src="'+i.imgUrl+'" alt="sa" />',document.getElementById("chkStatusAdd").checked=i.contactStatus}catch(t){}}function M(t){"app.client.vendor_addEdit.vendorcontacts"!=d.current.name&&i.showContactAssociation&&(l.Id||"new"!=l.id||"new"===l.id)&&r.getContactAssociations(t,l.Id||l.id).then(function(t){return i.contactAssociations=t.data,t})}function I(){var t=[],e=0,a=0;if(""==i.contactObj.Communication&&(i.contactObj.Communication=null),""!=i.contactObj.ContactDetailModel.Communication&&"]"!=i.contactObj.ContactDetailModel.Communication||(i.contactObj.ContactDetailModel.Communication=null),i.commDupObj=JSON.parse(i.contactObj.Communication),i.commDupObjofDetail=JSON.parse(i.contactObj.ContactDetailModel.Communication),null==i.commDupObj&&null==i.commDupObjofDetail)return i.isCommunicationReq=!0,!(i.contactCMMVText=y);if(i.commDupObj)for(var o=0;o<=i.commDupObj.length-1;o++)-1!=i.commDupObj[o].key.search("mail")&&(e++,t.push(i.contactObj.Communication[o]));if(i.commDupObjofDetail=null==i.commDupObjofDetail?[]:i.commDupObjofDetail,i.commDupObjofDetail)for(o=0;o<=i.commDupObjofDetail.length-1;o++)-1!=i.commDupObjofDetail[o].key.search("mail")&&(e++,t.push(i.contactObj.ContactDetailModel.Communication[o]));if(0<e)for(var n=0;n<=t.length-1;n++)""==t[n].value&&a++;return a!=e}function j(){var t=/null|undefined|""|'null'|'undefined'/;return""!=i.contactObj.ContactDetailModel.Communication&&null!=i.contactObj.ContactDetailModel.Communication&&!t.test(i.contactObj.ContactDetailModel.Communication)||""!=i.contactObj.Communication&&null!=i.contactObj.Communication&&!t.test(i.contactObj.Communication)}angular.element(document.querySelector("#fileInput")).on("change",function(t){"image/gif"==t.currentTarget.files[0].type||"image/jpeg"===t.currentTarget.files[0].type||"image/png"===t.currentTarget.files[0].type?p.open({templateUrl:"cropimg.html",controller:"contactcropImgCtrl",backdrop:"static",resolve:{options:function(){return t}}}).result.then(function(t){i.upload(t.url,t.name)}):m.notify.warning("file format should be in JPEG/PNG/GIF")}),i.contactObj=i.contactObj?i.contactObj:{Id:m.guid(),ContactId:m.guid(),Salutation:"",FirstName:"",LastName:"",DOB:null,Designation:"",IdType:null,IdNo:"",IsPrimaryContact:!0,IsReminderReceipient:!1,CountryOfResidence:"",Matters:null,ContactStatus:"",RecOrder:null,Status:"Active",CompanyId:s.companyId,PhotoId:null,IsAssociate:null,AccountId:null,ClientId:null,Communication:null,AddressBookId:m.guid(),SourceType:null,MediaType:null,Original:null,Small:null,Medium:null,Large:null,Version:null,UserCreated:null,CreatedDate:null,ModifiedBy:null,ModifiedDate:null,Remarks:null,ContactDetailModel:{Id:m.guid(),ContactId:m.guid(),IsAssociate:null,EntityId:null,Designation:null,Communication:null,Matters:null,IsPrimaryContact:null,IsReminderReceipient:null,IsCopy:!1,RecOrder:null,Status:"Active",Addresses:[]},Addresses:[]},i.dateOptions={format:"dd/MM/yyyy",parseFormats:"['yyyy-MM-ddTHH:mm:ss']"},i.matterCheck=!1,i.selection=[],i.isCommunicationReq=!1,i.toggleSelection=function(t){var e=i.selection.indexOf(t);-1<e?i.selection.splice(e,1):i.selection.push(t),i.matters.length!==i.selection.length&&(i.matterCheck=!1),i.matters.length===i.selection.length&&(i.matterCheck=!0)},i.isMattersChecked=function(){if(i.matters)return i.selection.length==i.matters.length},i.checkAllMatters=function(){i.matterCheck=document.getElementById("mattersCheck").checked,i.matterCheck?(i.selection=[],angular.forEach(i.matters,function(t){i.selection.push(t.Name)})):i.selection=[]},i.upload=function(t,e){var a=g.getSessionItem("ModuleDetailId");f.upload({url:o.azureStorageRemoteServer+"UploadLogo",headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:g.encrypt({companyId:s.companyId,userName:s.userName,moduleDetailId:a||g.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})},data:{file:f.dataUrltoBlob(t,e)}}).then(function(t){i.myImage="",i.myCroppedImage="",document.querySelector("#fileInput").value="",function(t){i.isFileUploaded=!0,i.imgUrl=t.data.Small,i.mediaRepoId=t.data.Id,i.contactObj.PhotoId=i.mediaRepoId,i.contactObj.Small=i.imgUrl,i.contactObj.Original=i.imgUrl,i.contactObj.Medium=i.imgUrl,i.contactObj.Large=i.imgUrl,document.getElementById("img").innerHTML='<img src="'+i.imgUrl+'" alt="sa" />'}(t)})},i.dateplaceholder=s.dateFormat,i.dateFormat=s.dateFormat,i.openCDatePicker=function(t,e){t.preventDefault(),t.stopPropagation(),i.datePicker[e]=!0!==i.datePicker[e]},i.closeAll=function(){i.DateOpen=!1},i.datePicker={DateOpen:!1},i.datepickerOptions={format:s.dateFormat,class:"datepicker",showWeeks:"false"},i.formats=[s.dateFormat],i.format=i.formats[0],i.dateOptions6={format:"dd-MMM",class:"datepicker"},i.formats6=["dd-MMM"],i.format6=i.formats6[0],i.selectedContactObject=function(t){i.iscntpostval=!1;var e=t.originalObject;i.contactObj.PostalCode=e.PostalCode,i.contactObj.BuildingEstate=e.BuildingName,i.contactObj.BlockHouseNo=e.BuildingNumber,i.contactObj.Country=e.Country,i.contactObj.State=e.State,i.contactObj.City=e.State,i.contactObj.Street=e.StreetName,i.isFieldsDisable=!0},i.isContactAutoLookUp&&(i.contactLookUp={filter:"contains",dataTextField:"FirstName",template:"<span class='k-state-default'><h4>#: data.FirstName #</h4><p><b> #: data.IdNo?'ID No:':'' #</b> #: data.IdNo=data.IdNo?data.IdNo:'' # </p></span>",height:330,select:O,minLength:3,dataSource:{type:"json",serverFiltering:!0,transport:{read:{contentType:"application/json",url:o.admincommonRemoteServer+"contacts?",beforeSend:function(t){t.setRequestHeader("Authorization","Bearer "+mgr.access_token),t.setRequestHeader("AuthInformation",g.encrypt({companyId:s.companyId,userName:s.userName,moduleDetailId:g.getItem("ModuleDetailId"),Values:{PermissionName:"View"}}))}},parameterMap:function(t,e){var a;if("read"==e)return a="VendorContact"==i.addressType&&"CC"==i.cursor?"Vendor":"CC"==i.cursor?"Account":"BC"==i.cursor?"Entity":"Client","accountId="+("new"==l.Id||"new"===l.id?"00000000-0000-0000-0000-000000000000":l.Id||l.id)+"&entitytype="+a+"&searchBy="+i.contactObj.FirstName}}}}),i.Countries=Countries,i.countries={select:function(t){var e=this.dataItem(t.item.index());i.contactObj.CountryOfResidence=e.name}},i.contactid=function(){i.contactAssociations=[]},i.backToTab=function(t){n.$broadcast("backClick",{isBack:!0})},i.$watch(function(){return i.contactObject},function(e,t){i.isValidationRequired=!1,i.isPhotoUploaded=!1,i.selection=[];var a=i.infoTitle.split(" ",1),o=e?e.Id:"00000000-0000-0000-0000-000000000000";r.getContactLookupObj(a,l.id||l.Id,i.isEdit?"Edit":"Add",o).success(function(t){i.salutationdata=[],i.matters=[],i.Designations=[],i.idTypes=[],i.communicationObj=[],i.contactLookupDataObj=t,i.salutationdata=i.contactLookupDataObj.SalutationLU.Lookups,i.communicationLU=i.contactLookupDataObj.CommunicationLU,i.contactObj.Salutation=i.isEdit?null:i.contactLookupDataObj.SalutationLU.DefaultValue,i.matters=i.contactLookupDataObj.MattersLU.Lookups,i.isContactAutoLookUp&&"AccountContact"==i.addressType&&i.selection.push(i.contactLookupDataObj.MattersLU.DefaultValue),i.contactObj.ContactDetailModel.Designation=i.contactLookupDataObj.DesignationLU.DefaultValue,i.Designations=i.contactLookupDataObj.DesignationLU.Lookups,i.idTypes=i.contactLookupDataObj.IdTypeLU,i.communicationObj=i.contactLookupDataObj.AddressBookLU.Lookups,i.contactObj.Salutation=i.isEdit?null:t.SalutationLU.DefaultValue,b(e,i.contactObj);try{"CC"==i.cursor&&"AccountContact"==i.addressType&&i.isEdit&&M(e.ContactId)}catch(t){}})}),i.iscntpostval=!1,i.checkRemainderRecip=function(){return i.contactObj.ContactDetailModel.IsReminderReceipient},i.countryNames=e.countries(),i.$on("saveNew",function(t,e){i.selection=[]});var y="Email Communication is required";function h(){i.validationMessages=[],i.isValidationRequired=!0,i.validationMessages.push({validationText:"Please complete the mandatory fields! "}),window.scrollTo(0,0)}function v(t){if(i.contactObj.ContactDetailModel.IsCopy){if(t&&i.isEdit&&0!=i.contactObj.ContactDetailModel.Addresses.length){for(var e=0;e<i.contactObj.ContactDetailModel.Addresses.length;e++)i.contactObj.ContactDetailModel.Addresses[e].RecordStatus="Deleted";i.contactObj.ContactDetailModel.Addresses=i.contactObj.ContactDetailModel.Addresses.concat(angular.copy(i.contactObj.Addresses))}else i.contactObj.ContactDetailModel.Addresses=angular.copy(i.contactObj.Addresses);for(e=0;e<i.contactObj.ContactDetailModel.Addresses.length;e++)i.contactObj.ContactDetailModel.Addresses[e].RecordStatus=t&&!i.contactObj.ContactDetailModel.Addresses[e].RecordStatus?"Added":i.contactObj.ContactDetailModel.Addresses[e].RecordStatus;i.contactObj.ContactDetailModel.Communication=angular.copy(i.contactObj.Communication)}}i.isContactCMVT=!1,i.cntCMTChange=function(t,e){i.isCommunicationReq=!1,function(e,t){i.isContactCMVT=!1,i.cntCMMValidationText="";var a=/null|undefined|""|'null'|'undefined'/;angular.forEach(i.contactObj.Communication,function(t){!a.test(e)&&""!==t.type||""===t.value?a.test(t.type)&&""==t.type||""===t.value?a.test(t.type)||""==t.type||""!==t.value||(i.isContactCMVT=!0,i.cntCMMValidationText="Please Enter "+t.type):!0!==u.validateCommunicationType(t.type,t.value)&&(i.isContactCMVT=!0,i.cntCMMValidationText="Invalid "+t.type):(i.isContactCMVT=!0,i.cntCMMValidationText="Please select CommunicationType")})}(t)},i.$on("getContactObj",function(){i.validate()}),i.validate=function(){i.isValidationRequired=!1,i.isCommunicationReq=!1,i.isPrimaryReq=!1,i.isRemaindereReq=!1,i.contactCMMVText="",i.validationMessages=[],i.typeMissing=[];var t,e=$("#chkRemainder").is(":checked");if(i.isNotPrimory||(t=$("#chkPrimary").is(":checked")),e&&t?I()||(i.isCommunicationReq=!0,i.contactCMMVText=y):(e?I()||(i.isCommunicationReq=!0,i.contactCMMVText=y):!t&&t||j()||(i.isCommunicationReq=!0,i.contactCMMVText="At least one Communication is required"),0<i.selection.length&&(-1!=i.selection.indexOf("Quotations")||-1!=i.selection.indexOf("Assignment Billing"))&&(I()||(i.isCommunicationReq=!0,i.contactCMMVText=y))),i.$on("primaryContactRequired",function(){i.isPrimaryReq=!0,h()}),i.$on("remainderRequired",function(){e?i.contactObj.ContactDetailModel.IsReminderReceipient=!0:(i.isRemaindereReq=!0,h())}),!(C.validate("contactForm").isValidationRequired||i.isCommunicationReq||i.isContactCMVT||i.isPrimaryReq||i.isRemaindereReq||i.iscntpostval))return function(t){if(i.contactStatus=document.getElementById("chkStatusAdd").checked,i.validationMessages=[],i.isValidationRequired=!1,i.contactStatus){if(i.contactObj.ContactDetailModel.Status="Inactive",i.isNotPrimory&&(i.contactObj.ContactDetailModel.IsPrimaryContact=!1),i.contactObj.ContactDetailModel.IsPrimaryContact)return i.validationMessages.push({validationText:"In-activating of primary contact should not allowed"}),i.isValidationRequired=!0,void window.scrollTo(0,0);if(i.contactObj.ContactDetailModel.IsReminderReceipient)return i.validationMessages.push({validationText:"In-activating of Reminder receipient contact should not allowed"}),i.isValidationRequired=!0,void window.scrollTo(0,0)}else i.contactObj.ContactDetailModel.Status="Active";var e=C.validate("contactForm");if(n.$broadcast("checkAddrBook"),e.isValidationRequired||n.isCommunicationValidationRequired||n.isPostValRequired)return i.validationMessages.push({validationText:" Please complete the mandatory fields! "}),void h();var a="";i.selection=_.uniq(i.selection);for(var o=0;o<=i.selection.length-1;o++)a=a+i.selection[o]+";";a=a.substring(0,a.length-1),i.contactObj.ContactDetailModel.Matters=a,i.isPhotoUploaded&&(i.contactObj.PhotoId=i.mediaRepoId);if(i.contactObj.DOB>new Date)return i.validationMessages=[],i.isValidationRequired=!0,i.validationMessages.push({validationText:"Date of Birth should not allow future dates !"}),void window.scrollTo(0,0);b(i.contactObj,i.contactObject),n.$broadcast("saveCancel"+i.infoTitle,{data:{status:"saveContact",state:t}}),n.$broadcast("refreshContactCards",{data:""}),"new"==D&&(i.isValidationRequired||(document.getElementById("Residence").value="",i.contactStatus=!1,$("#mattersCheck").attr("checked",!1),"client.leads.lead.contacts"!=d.current.name&&"client.vendors.vendor.vendorcontacts"!=d.current.name&&function(){var t=i.infoTitle.split(" ",1);r.getContactLookupObj(t,l.id||l.Id).success(function(t){return t})}(),i.isRemaindereReq||"CC"!=i.cursor||(i.contactObj={Id:m.guid(),ContactId:m.guid(),Salutation:"",FirstName:"",LastName:"",DOB:null,Designation:"",IdType:null,IdNo:"",IsPrimaryContact:!0,IsReminderReceipient:!1,CountryOfResidence:"",Matters:null,ContactStatus:"",RecOrder:null,Status:"Active",CompanyId:s.companyId,PhotoId:null,IsAssociate:null,AccountId:null,ClientId:null,Communication:null,AddressBookId:m.guid(),SourceType:null,MediaType:null,Original:null,Small:null,Medium:null,Large:null,Version:null,UserCreated:null,CreatedDate:null,ModifiedBy:null,ModifiedDate:null,Remarks:null,ContactDetailModel:{Id:m.guid(),ContactId:m.guid(),IsAssociate:null,EntityId:null,Designation:null,Communication:null,Matters:null,IsPrimaryContact:null,IsReminderReceipient:null,IsCopy:!1,RecOrder:null,Status:"Active",Addresses:[]},Addresses:[]})))}(D);h()},n.$on("ContactCommRequired",function(){j()||(i.isCommunicationReq=!0,i.isContactCMVT=!0,i.cntCMMValidationText="At least one Communication is required",h())}),i.$on("oneinactive",function(t,e){i.validationMessages.push({validationText:e.data}),i.isValidationRequired=!0,window.scrollTo(0,0)}),i.saveCnt=function(t){i.contactObject.isLoader=!0,D=t,i.isCommunicationReq=!1,i.isContactCMVT=!1,i.isValidationRequired=!1,window.scrollTo(0,0)},i.validationOptions={rules:{cntLPostalCode:function(t){return!i.isResLocal||(!t.is("[name=cntLPostalCode]")||(""==t.val()||6==t.val().length&&/^\d+$/.test(t.val())))},cntFPostalCode:function(t){return!!i.isResLocal||(!t.is("[name=cntFPostalCode]")||(""==t.val()||!(10<t.val().length||t.val().length<6)&&/^[a-z\d\-_\s]+$/i.test(t.val())))}},messages:{cntLPostalCode:"It must be 6 digit number",cntFPostalCode:"Should be Alphanumaric Between 6-10 Characters",cntIdentificationNumber:"Please enter alphanumerics only",Website:"Invalid Website"}},i.cancelContact=function(){C.hideMessages("contactForm"),i.contactObject=[],i.isValidationRequired=!1,i.isCommunicationReq=!1,i.selection=[],i.isRemaindereReq=!1,i.isPrimaryReq=!1,n.$broadcast("saveCancel"+i.infoTitle,{data:{status:"cancelContact",state:""}}),n.$broadcast("refreshContactCards",{data:""}),window.scrollTo(0,0),$("#mattersCheck").attr("checked",!1)},i.$watch(function(){return i.contactObj.Communication},function(){i.communications=[],v(),i.contactObj.Communication=i.contactObj.Communication&&""!=i.contactObj.Communication&&"]"!=i.contactObj.Communication?i.contactObj.Communication:null,i.contactObj.Communication&&(i.communications=JSON.parse(i.contactObj.Communication),i.communications=r.contactCommunication(i.communications))}),i.$watch(function(){return i.contactObj.Addresses},function(){v()}),i.openContactDetails=function(){p.open({templateUrl:"personalContactEdit.html",controller:"personalContactEdit",backdrop:"static",size:"lg",controllerAs:"vm",resolve:{contactdata:function(){return{data:i.contactObj,lookups:i.contactLookupDataObj,adType:i.addressType,isEdit:i.isEdit,isContactView:i.isContactView}}}}).result.then(function(t){t&&(i.contactObj=t.contactObj,i.imgUrl=i.contactObj.Small?i.contactObj.Small:i.imgUrl)})},i.communicationIcons=function(t){var e={Mobile:"tool-icons phone-fill-icon",Email:"tool-icons mail-fill-icon",Phone:"tool-icons landphone-fill-icon",Fax:"tool-icons fax-fill-icon",Website:"tool-icons world-fill-icon",Personal:"tool-icons blog-fill-icon",Work:"tool-icons work-fill-icon"};return e[t.key]?e[t.key]:""}}],link:function(t,e,a){}}}]).controller("contactcropImgCtrl",contactcropImgCtrl).controller("personalContactEdit",personalContactEdit),contactcropImgCtrl.$inject=["$uibModalInstance","$scope","options"],personalContactEdit.$inject=["$uibModalInstance","contactdata","$scope","serviceConfig","config","DefaultValues","formValidate","$document","$uibModal","Upload","commonService","$rootScope","$stateParams","$timeout","zStorageEnc"];
!function(){"use strict";function t(t,r,c,n){return{getAssociations:function(t){var n=r.LeadRemoteContactServerVersion+"GetAssociationsByContact?Id="+t+"&type=Account";return c.getEntities(n)},getleadAssociations:function(t,n){var e=r.LeadRemoteContactServerVersion+"GetAssociationsByContact?Id="+t+"&accid="+n;return c.getEntities(e)},savePingAssosiation:function(t){var n=r.LeadRemoteServer+"UpdateAssociations";return c.saveEntity(n,t)},getContactleadAssoValidations:function(t,n,e){var i=t,o=n;if(0!==i.length){for(var a=0;a<=i.length-1;a++)'{ "": "" }'!=i[a].Communication&&"]"!=i[a].Communication&&(i[a].Communications=c.getCommunicationjsonObject(i[a].Communication),i[a].Communications=s(i[a].Communications));for(a=0;a<=o.length-1;a++)if(o[a].ContactId==e){o[a].Assosiations=[];for(var r=0;r<=i.length-1;r++)o[a].Assosiations.push(i[r])}}return},getContactAssValidation:function(t,n,e){var i=t,o=n;if(0!==i.length){for(var a=0;a<=i.length-1;a++)'{ "": "" }'!=i[a].Communication&&"]"!=i[a].Communication&&(i[a].Communications=c.getCommunicationjsonObject(i[a].Communication),i[a].Communications=s(i[a].Communications));for(a=0;a<=o.length-1;a++)if(o[a].ContactId==e){o[a].Assosiations=[];for(var r=0;r<=i.length-1;r++)o[a].Assosiations.push(i[r])}}return},createContact:function(t,n,e,i,o){e=e||0,t=t||20,n=n||1,i=i||"",o=o||"";var a=r.admincommonRemoteServer+"GetContactDetailsNames?startwith="+i+"&$inlinecount=allpages&$orderby=FirstName&%24take="+t+"&%24skip="+e+"&page="+n+"&pageSize="+t+"&searchby="+o+"&cursorCode=CC&pageno="+n;return c.getEntities(a)},deleteContact:function(t,n,e){var i=r.admincommonRemoteServer+"DeleteContact?contactId="+t+"&accountId="+n+"&Type="+e;return c.getEntities(i)},cardCommunication:s};function s(t){var n=[],e=[];if(t){for(var i=0;i<t.length;i++)-1==n.indexOf(t[i].key||t[i].type)&&n.push(t[i].key||t[i].type);-1!=n.indexOf("Mobile")&&(n.splice(n.indexOf("Mobile"),1),n.unshift("Mobile")),-1!=n.indexOf("Email")&&(n.splice(n.indexOf("Email"),1),n.unshift("Email"));for(var o=0;o<n.length;o++)e.push({key:n[o],value:t.filter(function(t){return(t.type?t.type:t.key)==n[o]}).map(function(t){return t.value}).join(",")})}return e}}angular.module("ContactGridDirapp",[]).factory("contactGridFactory",t),t.$inject=["$http","serviceConfig","commonService","config"]}();
!function(){"use strict";function t(t){return{restrict:"E",scope:{contactgridobject:"=",contactActions:"=",contactInfo:"=",contactCount:"=",outsideContactid:"=?"},controllerAs:"vm",templateUrl:"CustomDirectives/contactGridDirective/newcards.html",controller:["$http","$scope","$rootScope","config","serviceConfig","contactGridFactory","commonService","$moment","$stateParams","$state","$uibModal",function(t,a,o,n,e,c,i,s,r,u,g){function d(){a.contactsSection1=[],a.contactsSection2=[];for(var t=0;t<=a.contactgridobject.length-1;t++)null===a.contactgridobject[t].Communication&&(a.contactgridobject[t].Communication="]"),a.contactgridobject[t].Communications=i.getCommunicationjsonObject(a.contactgridobject[t].Communication),a.contactgridobject[t].Communications=c.cardCommunication(a.contactgridobject[t].Communications),a.contactgridobject[t].ContactDetailModel.Communications=i.getCommunicationjsonObject(a.contactgridobject[t].ContactDetailModel.Communication),a.contactgridobject[t].ContactDetailModel.Communications=c.cardCommunication(a.contactgridobject[t].ContactDetailModel.Communications);var n;(a.contactgridobjectCount=a.contactCount,0<a.contactgridobjectCount&&a.pagealocation("association"),a.outsideContactid)&&(1==(n=a.contactgridobject.filter(function(t){return t.Id==a.outsideContactid})).length&&l(n[0]))}function l(t){$("body").hasClass("modal-open")&&($("body.modal-open").removeAttr("style"),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")),o.$broadcast("operateContact",{data:{status:"editContact",state:"view",contactdata:t}})}a.pagesizevalue="20",a.pagenumbering="1",a.pagenationshow="client.clientcurser.contacts"==u.current.name,a.viewContact=l,"string"==typeof a.contactgridobject?(a.skip=parseInt(a.pagenumbering-1)*parseInt(a.pagesizevalue),c.createContact(a.pagesizevalue,a.pagenumbering,a.skip,r.Letter,a.search).success(function(t){a.contactgridobject=t,a.contactgridobjectCount=0<t.Items.length?t.Items[0].Index:0})):a.contactgridobject,a.$watch(function(){return a.contactgridobject},function(t){a.contactgridobject&&d()}),a.$on("refreshContactCards",function(t,n){d()}),a.getContactMatters=function(t){},a.previous=function(){1<a.pagenumbering&&(a.pagenumbering=parseInt(a.pagenumbering)-1,a.pagenumber(1,null,"previous"))},a.endpage=function(){a.pagenumbering=a.pagenumbers,a.pagenumber(1)},a.startpage=function(){a.pagenumbering=1,a.pagenumber()},a.pagenumber=function(t,n,e){0<=n&&!e&&(a.pagenumbering=parseInt(n)),1!=t||e||a.pagealocation(),a.skip=parseInt(a.pagenumbering-1)*parseInt(a.pagesizevalue),0<t&&!e&&a.pagealocation(),c.createContact(a.pagesizevalue,a.pagenumbering,a.skip,r.Letter,a.search).success(function(t){a.contactgridobject=t.Items,a.contactgridobjectCount=0<t.Items.length?t.Items[0].Index:0,e||"onnumber"==e?("onnumber"!=e&&("next"==e?a.pagenumberobj.shift():-1==a.pagenumberobj.map(function(t){return t.Name}).indexOf(a.pagenumbering)&&a.pagenumberobj.unshift({Name:a.pagenumbering,Value:a.pagenumbering})),a.itemsStartingCount=parseInt(a.pagenumbering-1)*parseInt(a.pagesizevalue)+1,a.itemsEndingCount=parseInt(a.pagenumbering)*parseInt(a.pagesizevalue)>parseInt(a.contactgridobjectCount)?parseInt(a.contactgridobjectCount):parseInt(a.pagenumbering)*parseInt(a.pagesizevalue)):a.pagealocation()})},a.pagealocation=function(t){if("association"!=t||!a.pagenumberobj)if(a.pagenumberobj=[],a.pagenumbers=parseInt(a.contactgridobjectCount/a.pagesizevalue.indexOf(".")?parseInt(parseInt(a.contactgridobjectCount)/parseInt(a.pagesizevalue))+1:parseInt(parseInt(a.contactgridobjectCount)/parseInt(a.pagesizevalue))),a.itemsStartingCount=parseInt(a.pagenumbering-1)*parseInt(a.pagesizevalue)+1,a.itemsEndingCount=parseInt(a.pagenumbering)*parseInt(a.pagesizevalue)>parseInt(a.contactgridobjectCount)?parseInt(a.contactgridobjectCount):parseInt(a.pagenumbering)*parseInt(a.pagesizevalue),a.pagenumbering<=5)for(var n=0===a.pagenumbers?1:a.pagenumbers,e=1;e<=n;e++)a.pagenumberobj.push({Name:e,Value:e});else for(e=a.pagenumbering;a.pagenumbering+5>=e;e++)a.pagenumbers>=e&&a.pagenumberobj.push({Name:e,Value:e})},a.next=function(){a.pagenumbers>a.pagenumbering&&(a.pagenumbering=parseInt(a.pagenumbering)+1,a.pagenumber(null,null,"next"))},a.pagesize=function(t){a.pagesizevalue=t,a.pagenumbering=1,a.pagenumber()},a.getContactAssociations=function(n){a.contactActions.isshowassociations&&c.getAssociations(n).success(function(t){return a.contactAssociations=t,a.contactAssociations=c.getContactAssValidation(a.contactAssociations,a.contactgridobject,n),t})},a.getContactLeadAssociations=function(n,t){a.contactActions.isshowassociations&&c.getleadAssociations(n,t).success(function(t){return a.contactAssociations=t,a.contactAssociations=c.getContactleadAssoValidations(a.contactAssociations,a.contactgridobject,n),t})},a.deleteContact=function(e){if(o.$broadcast("operateContact",{data:{status:"deleteContact",state:"delete",contactdata:e}}),"client.leads.lead.contacts"==u.current.name?a.contactType="lead contact":"client.leads.account.accountcontacts"==u.current.name?a.contactType="account contacts":"client.vendors.vendor.vendorcontacts"==u.current.name?a.contactType="vendors contacts":a.contactType=u.current.data.pageTitle.toLowerCase(),0==a.contactActions.isshowprimarybtn){for(var t=0,n=0;n<a.contactgridobject.length;n++)"Active"==a.contactgridobject[n].ContactDetailModel.Status&&t++;if(1==t&&"Active"==e.ContactDetailModel.Status)return i.confirmationDialog("Alert!","Atleast one contact is in Active state so you can not delete it.","Ok")}return e.ContactDetailModel.IsPrimaryContact?i.confirmationDialog("Alert!","Primary Contact cannot be deleted.","Ok"):e.ContactDetailModel.IsReminderReceipient?i.confirmationDialog("Alert!","Reminder Recipient cannot be deleted.","Ok"):void i.confirmationDialog("Confirm Delete","Do you really want to delete this contact?","Ok","Cancel").then(function(t){if("ok"===t)return c.deleteContact(e.ContactId||e.Id,e.AccountId,a.contactType).then(function(t){angular.forEach(a.contactgridobject,function(t,n){(t.ContactId||t.Id)===(e.ContactId||e.Id)&&(a.contactgridobject.splice(n,1),d())})})})},a.editContact=function(t){o.$broadcast("operateContact",{data:{status:"editContact",state:"edit",contactdata:t}})},a.pingAssosiation=function(t,n){if(!t.IsPinned){c.savePingAssosiation(t).success(function(t){i.notify.success("Saved Data")});for(var e=0;e<=a.contactgridobject.length-1;e++)if(a.contactgridobject[e].ContactId===t.ContactId){a.contactgridobject[e].ContactDetailModel.CompanyName=t.AccountName,a.contactgridobject[e].ContactDetailModel.Designation=t.Designation,a.contactgridobject[e].ContactDetailModel.Communications=t.Communications,a.contactgridobject[e].ContactDetailModel.Communications=c.cardCommunication(a.contactgridobject[e].ContactDetailModel.Communications),a.contactgridobject[e].ContactDetailModel.Matters=t.Matters,a.contactgridobject[e].ContactDetailModel.Status=t.Status;for(var o=0;o<=a.contactgridobject[e].Assosiations.length-1;o++)a.contactgridobject[e].Assosiations[o].AccountName===t.AccountName?a.contactgridobject[e].Assosiations[o].IsPinned=!0:a.contactgridobject[e].Assosiations[o].IsPinned=!1}}},a.communicationIcons=function(t){var n={Mobile:"phone-icon tool-icons",Email:"email-icon tool-icons",Phone:"tool-icons landphone-line-icon",Fax:"tool-icons fax-line-icon",Website:"tool-icons world-line-icon",Personal:"tool-icons blog-line-icon",Work:"tool-icons work-line-icon"};return n[t.key]?n[t.key]:""}}],link:function(t,n,e){}}}angular.module("ContactGridDirapp").directive("zContactGrid",t),t.$inject=["$window"]}();
!function(){"use strict";angular.module("appsworld").directive("ngDropdownMultiselect",["$filter","$document","$compile","$parse",function(n,s,e,t){return{restrict:"AE",scope:{selectedModel:"=",options:"=",extraSettings:"=",events:"=",searchFilter:"=?",translationTexts:"=",groupBy:"@"},template:function(e,t){var n=!!t.checkboxes,l='<div class="multiselect-parent btn-group dropdown-multiselect w100p">';l+='<button type="button" class="dropdown-toggle mui-btn mui-btn-default" ng-class="settings.buttonClasses" ng-click="toggleDropdown()">{{getButtonText()}}&nbsp;<span class="caret"></span></button>',l+="<ul class=\"dropdown-menu dropdown-menu-form\" ng-style=\"{display: open ? 'block' : 'none', height : settings.scrollable ? settings.scrollableHeight : 'auto' }\" style=\"overflow-y: scroll;width:100%;top:42px;border-top:0px;\" >",l+='<li ng-hide="!settings.showCheckAll || settings.selectionLimit > 0"><a data-ng-click="selectAll1()"><span class={{imgcheck}}></span>  {{texts.checkAll}}</a></li>',l+='<li ng-hide="(!settings.showCheckAll || settings.selectionLimit > 0) && !settings.showUncheckAll" class="divider"></li>',l+='<li ng-show="settings.enableSearch"><div class="dropdown-header"><input type="text" class="form-control" style="width: 100%;" ng-model="searchFilter" placeholder="{{texts.searchPlaceholder}}" /></li>',l+='<li ng-show="settings.enableSearch" class="divider"></li>',!!t.groupBy?(l+='<li ng-repeat-start="option in orderedItems | filter: searchFilter" ng-show="getPropertyForObject(option, settings.groupBy) !== getPropertyForObject(orderedItems[$index - 1], settings.groupBy)" role="presentation" class="dropdown-header">{{ getGroupTitle(getPropertyForObject(option, settings.groupBy)) }}</li>',l+='<li ng-repeat-end role="presentation">'):l+='<li role="presentation" ng-repeat="option in options | filter: searchFilter">',l+='<a role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(option,settings.idProp))">',l+=n?'<div class="checkbox"><label><input class="checkboxInput regular-checkbox" type="checkbox" ng-click="checkboxClick($event, getPropertyForObject(option,settings.idProp))" ng-checked="isChecked(getPropertyForObject(option,settings.idProp))" /> {{getPropertyForObject(option, settings.displayProp)}}</label></div></a>':"<span data-ng-class=\"{'fa fa-check': isChecked(getPropertyForObject(option,settings.idProp))}\"></span> {{getPropertyForObject(option, settings.displayProp)}}</a>",l+="</li>",l+='<li class="divider" ng-show="settings.selectionLimit > 1"></li>',l+='<li role="presentation" ng-show="settings.selectionLimit > 1"><a role="menuitem">{{selectedModel.length}} {{texts.selectionOf}} {{settings.selectionLimit}} {{texts.selectionCount}}</a></li>',l+="</ul>",l+="</div>",e.html(l)},link:function(o,e,t){var l=e.children()[0];function i(e){var t={};return""===o.settings.externalIdProp?t[o.settings.idProp]=e:t[o.settings.externalIdProp]=e,t}function c(e){for(var t in e)delete e[t]}o.toggleDropdown=function(){o.open=!o.open},o.checkboxClick=function(e,t){o.setSelectedItem(t),e.stopImmediatePropagation()},o.externalEvents={onItemSelect:angular.noop,onItemDeselect:angular.noop,onSelectAll:angular.noop,onDeselectAll:angular.noop,onInitDone:angular.noop,onMaxSelectionReached:angular.noop},o.imgcheck="fa fa-check",o.settings={dynamicTitle:!0,scrollable:!1,scrollableHeight:"300px",closeOnBlur:!0,displayProp:"Name",idProp:"Id",externalIdProp:"Id",enableSearch:!1,selectionLimit:0,showCheckAll:!0,showUncheckAll:!0,closeOnSelect:!1,buttonClasses:"btn btn-default",closeOnDeselect:!1,groupBy:t.groupBy||void 0,groupByTextProvider:null,smartButtonMaxItems:0,smartButtonTextConverter:angular.noop},o.texts={checkAll:"Check All",uncheckAll:"Uncheck All",selectionCount:"checked",selectionOf:"/",searchPlaceholder:"Search...",buttonDefaultText:"Select",dynamicButtonTextSuffix:"Participant"},o.searchFilter=o.searchFilter||"",angular.isDefined(o.settings.groupBy)&&o.$watch("options",function(e){angular.isDefined(e)&&(o.orderedItems=n("orderBy")(e,o.settings.groupBy))}),angular.extend(o.settings,o.extraSettings||[]),angular.extend(o.externalEvents,o.events||[]),angular.extend(o.texts,o.translationTexts),o.singleSelection=1===o.settings.selectionLimit,o.singleSelection&&angular.isArray(o.selectedModel)&&0===o.selectedModel.length&&c(o.selectedModel),o.settings.closeOnBlur&&s.on("click",function(e){for(var t=e.target.parentElement,n=!1;angular.isDefined(t)&&null!==t&&!n;)_.contains(t.className.split(" "),"multiselect-parent")&&!n&&t===l&&(n=!0),t=t.parentElement;n||o.$apply(function(){o.open=!1})}),o.getGroupTitle=function(e){return null!==o.settings.groupByTextProvider?o.settings.groupByTextProvider(e):e},o.getButtonText=function(){if(o.settings.dynamicTitle&&(0<o.selectedModel.length||angular.isObject(o.selectedModel)&&0<_.keys(o.selectedModel).length)){if(0<o.settings.smartButtonMaxItems){var l=[];return angular.forEach(o.options,function(e){if(o.isChecked(o.getPropertyForObject(e,o.settings.idProp))){var t=o.getPropertyForObject(e,o.settings.displayProp),n=o.settings.smartButtonTextConverter(t,e);l.push(n||t)}}),o.selectedModel.length>o.settings.smartButtonMaxItems&&(l=l.slice(0,o.settings.smartButtonMaxItems)).push("..."),l.join(", ")}var e;return 0===(e=o.singleSelection?null!==o.selectedModel&&angular.isDefined(o.selectedModel[o.settings.idProp])?1:0:angular.isDefined(o.selectedModel)?o.selectedModel.length:0)?o.texts.buttonDefaultText:e+" "+o.texts.dynamicButtonTextSuffix}return o.texts.buttonDefaultText},o.getPropertyForObject=function(e,t){return angular.isDefined(e)&&e.hasOwnProperty(t)?e[t]:""},o.selectAll=function(){o.texts.checkAll="Uncheck All",o.deselectAll(!1),o.externalEvents.onSelectAll(),angular.forEach(o.options,function(e){o.setSelectedItem(e[o.settings.idProp],!0)})},o.selectAll1=function(e){"Check All"==o.texts.checkAll?(o.texts.checkAll="Uncheck All",o.imgcheck="fa fa-times",o.deselectAll(!1),o.externalEvents.onSelectAll(),angular.forEach(o.options,function(e){o.setSelectedItem(e[o.settings.idProp],!0)})):"Uncheck All"==o.texts.checkAll&&(o.texts.checkAll="Check All",o.imgcheck="fa fa-check",(e=e||!0)&&o.externalEvents.onDeselectAll(),o.singleSelection?c(o.selectedModel):o.selectedModel.splice(0,o.selectedModel.length))},o.deselectAll=function(e){(e=e||!0)&&o.externalEvents.onDeselectAll(),o.singleSelection?c(o.selectedModel):o.selectedModel.splice(0,o.selectedModel.length)},o.setSelectedItem=function(e,t){var n=i(e),l=null;if(l=""===o.settings.externalIdProp?_.find(o.options,n):n,o.singleSelection)return c(o.selectedModel),angular.extend(o.selectedModel,l),o.externalEvents.onItemSelect(l),void(o.settings.closeOnSelect&&(o.open=!1));t=t||!1;var s=-1!==_.findIndex(o.selectedModel,n);!t&&s?(o.selectedModel.splice(_.findIndex(o.selectedModel,n),1),o.externalEvents.onItemDeselect(n)):!s&&(0===o.settings.selectionLimit||o.selectedModel.length<o.settings.selectionLimit)&&(o.selectedModel.push(l),o.externalEvents.onItemSelect(l)),o.settings.closeOnSelect&&(o.open=!1)},o.isChecked=function(e){return o.singleSelection?null!==o.selectedModel&&angular.isDefined(o.selectedModel[o.settings.idProp])&&o.selectedModel[o.settings.idProp]===i(e)[o.settings.idProp]:-1!==_.findIndex(o.selectedModel,i(e))},o.externalEvents.onInitDone()}}}])}();
!function(){"use strict";var e=angular.module("appsworld");e.directive("zNumber",[function(){return{restrict:"A",link:function(e,a,t){a.on("keypress",function(e){var a=e.which?e.which:e.keyCode;return 48<=a&&a<=57})}}}]),e.directive("zCurrency",[function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=?",maxDecimalPlaces:"=?",maxPlaces:"=?",isEdit:"=?",valueChange:"=?",taxCode:"=?",isExchangerate:"=?"},link:function(r,i,e,o){function a(){if("NA"!=r.taxCode){var e=i[0].value;if(0<parseFloat(i[0].value.replace(/[$,]/g,""))){var a=parseFloat(Number(e.replace(/[^0-9\.]+/g,""))),t=parseFloat(a);!0===r.isExchangerate?i[0].value=t.toLocaleString("en-US",{minimumFractionDigits:6}):i[0].value=t.toLocaleString("en-US",{minimumFractionDigits:2}),o.$modelValue=t.toFixed(2),r.ngModel=t.toFixed(2)}else if(i[0].value&&0!=i[0].value&&0!=i[0].value){var n=parseFloat(Number(e.replace(/[^0-9\.]+/g,""))),l=parseFloat(n);i[0].value="("+Math.abs(l).toLocaleString("en-US",{minimumFractionDigits:2})+")",o.$modelValue=-l.toFixed(2),r.ngModel=-l.toFixed(2)}else;"$apply"!=r.$root.$$phase&&"$digest"!=r.$root.$$phase&&r.$apply()}else i[0].value=""}r.$watch(function(){return r.ngModel},function(e){r.valueChange&&a()}),r.isEdit&&r.$watch(e.ngModel,function(e){a()}),i.on("blur",function(){a()}),i.bind("focus",function(){i[0].value=angular.isUndefined(r.ngModel)?"":r.ngModel,r.valueChange=!1}),i.on("select",function(e){r.selectionStart=e.target.selectionStart,r.selectionEnd=e.target.selectionEnd});var n=r.maxPlaces?r.maxPlaces:15;i.on("keypress",function(e){var a,t=e.which?e.which:e.keyCode;if(!(48<=t&&t<=57||46==t||45==t))return 8==t||0==t;if(-1==i[0].value.lastIndexOf(".")&&parseInt(i[0].value.length)===parseInt(n)&&46!=e.keyCode)return!1;if(46==t&&-1!=i[0].value.lastIndexOf("."))return!1;if(!r.maxDecimalPlaces)return!(r.selectionStart="");if(-1!=i[0].value.lastIndexOf(".")&&(a=i[0].value.substring(i[0].value.lastIndexOf("."),i[0].value.length-1).length,Number(a===r.maxDecimalPlaces))){if(r.selectionStart&&parseInt(r.selectionStart)>i[0].value.lastIndexOf("."))return!(r.selectionStart="");if(!r.selectionStart&&(parseInt(e.currentTarget.selectionStart)>i[0].value.lastIndexOf(".")||parseInt(e.currentTarget.selectionStart)===parseInt(n)))return r.selectionStart="",!1}r.selectionStart=""})}}}]),e.directive("zcurrencyWithoutDecimal",[function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",maxPlaces:"=?",isEdit:"=?",valueChange:"=?"},link:function(r,i,e,o){function a(){var e=i[0].value;if(0<parseFloat(i[0].value.replace(/[$,]/g,""))){var a=parseFloat(Number(e.replace(/[^0-9\.]+/g,"")));a=Math.round(a);var t=parseFloat(a);i[0].value=t.toLocaleString("en-US"),o.$modelValue=t,r.ngModel=t}else if(i[0].value&&0!=i[0].value&&0!=i[0].value){var n=parseFloat(Number(e.replace(/[^0-9\.]+/g,""))),l=parseFloat(n);i[0].value="("+Math.abs(l).toLocaleString("en-US")+")",o.$modelValue=-l,r.ngModel=-l}else;"$apply"!=r.$root.$$phase&&"$digest"!=r.$root.$$phase&&r.$apply()}r.$watch(function(){return r.ngModel},function(e){r.valueChange&&a()}),r.isEdit&&r.$watch(e.ngModel,function(e){a()}),i.on("blur",function(){a()}),i.bind("focus",function(){i[0].value=r.ngModel,r.valueChange=!1});var t=r.maxPlaces?r.maxPlaces:15;i.on("keypress",function(e){return(48<=e.keyCode&&e.keyCode<=57||45==e.keyCode)&&((-1!=i[0].value.lastIndexOf(".")||parseInt(i[0].value.length)!==parseInt(t)||46==e.keyCode)&&(46!=e.keyCode&&void 0))})}}}]),e.directive("zDecimal",[function(){return{restrict:"A",scope:{maxDecimalPlaces:"=",maxPlaces:"="},link:function(i,o,e){var u=i.maxPlaces?i.maxPlaces:15;o.on("keypress",function(e){var a=e.which?e.which:e.keyCode;if(!(48<=a&&a<=57||46==a))return!1;if(-1==o[0].value.lastIndexOf(".")&&parseInt(o[0].value.length)===parseInt(u)&&46!=e.keyCode)return!1;if(46==a&&-1!=o[0].value.lastIndexOf("."))return!1;if(!i.maxDecimalPlaces)return!0;var t=parseInt(e.currentTarget.selectionStart),n=o[0].value.lastIndexOf(".");if(-1!=o[0].value.lastIndexOf(".")){var l=o[0].value.substring(o[0].value.lastIndexOf("."),o[0].value.length-1).length,r=o[0].value.substring(0,o[0].value.lastIndexOf(".")).length;return!(t<=n&&u<=r)&&!(n<t&&i.maxDecimalPlaces<=l)}})}}}]),e.directive("zMinusDecimal",[function(){return{restrict:"A",scope:{maxDecimalPlaces:"=",maxPlaces:"="},link:function(n,l,e){var r=n.maxPlaces?n.maxPlaces:15;l.on("keypress",function(e){var a,t=e.which?e.which:e.keyCode;return(48<=t&&t<=57||46==t||45==t)&&((-1!=l[0].value.lastIndexOf(".")||parseInt(l[0].value.length)!==parseInt(r)||46==e.keyCode)&&((46!=t||-1==l[0].value.lastIndexOf("."))&&(!n.maxDecimalPlaces||(-1!=l[0].value.lastIndexOf(".")?(a=l[0].value.substring(l[0].value.lastIndexOf("."),l[0].value.length-1).length,!Number(a===n.maxDecimalPlaces)||!(parseInt(e.currentTarget.selectionStart)>l[0].value.lastIndexOf(".")||parseInt(e.currentTarget.selectionStart)===parseInt(r))):void 0))))})}}}]),e.directive("zString",[function(){return{restrict:"A",link:function(e,a,t){}}}]),e.directive("zAlphaN",[function(){}]),e.directive("zPhone",[function(){}]),e.directive("zEmail",[function(){}]),e.directive("zDate",["$moment",function(o){return{restrict:"A",link:function(e,a,t){a.on("keypress",function(e){var a=e.which?e.which:e.keyCode;return 45<=a&&a<=57}),a.on("blur",function(e){var a=e.currentTarget.value,t=e.currentTarget.dataset.format;if(a){var n=o(a,t).format(t);if("DD/MM/YYYY"===t&&"Invalid date"!=n&&6<=n.length){var l,r=n.split("/"),i=r[2].substring(2,r[2].length);l=0==parseInt(r[2].substring(0,2))?(new Date).getFullYear().toString().substring(0,2)+i:r[2],e.currentTarget.value=o(r[0]+"/"+r[1]+"/"+l,t).format(t)}else e.currentTarget.value=n}})}}}]),e.directive("jvLogInfo",[function(){return{restrict:"E",template:'<div class="row" id="beanloginfo"><div class="showonclick"><a ng-click="vm.load_info()" style="color: #146eb4 !important;">Click to {{vm.isLogInfo?"hide":"show"}} info</a></div><br> <table ng-if="vm.isLogInfo" class="table table-stripped table-responsive"><thead><tr><th ng-repeat="thead in vm.info[0]">{{thead}}</th></tr></thead><tbody><tr ng-repeat="item in vm.info"> <td ng-repeat="td in vm.info[0]">{{item[td]}}</td> </tr></tbody></table></div>',controllerAs:"vm",controller:["commonService","serviceConfig","$scope",function(a,t,n){var l=this;l.load_info=function(){l.isLogInfo=!l.isLogInfo;var e=t.beanAuthenticationRemoteServer+"gethistory?CompanyId="+n.options.companyId+"&id="+n.options.id+"&type="+n.options.type;l.isLogInfo&&a.getEntities(n.options.url||e).then(function(e){l.info=e.data})},l.isLogInfo=!1}],scope:{options:"="},link:function(e,a,t){}}}]),e.directive("zTime",["formValidate",function(r){return{restrict:"A",require:"ngModel",link:function(e,n,a,l,t){n.on("keypress",function(e){var a=e.which?e.which:e.keyCode;return 48<=a&&a<=58}),n.on("blur",function(e){if(0!=n[0].value.length&&""!=n[0].value){if(1==n[0].value.length&&-1==n[0].value.indexOf(":"))n[0].value="0"+n[0].value+":00";else if(2==n[0].value.length&&-1==n[0].value.indexOf(":"))n[0].value=n[0].value+":00";else if(-1!=n[0].value.indexOf(":")){for(var a=n[0].value.split(":"),t=0;t<2;t++)a[t]=0==t?a[t]?Array(3-a[t].length).join("0")+a[t]:"00":a[t]?a[t]+Array(3-a[t].length).join("0"):"00";n[0].value=a.join(":")}if(l.$setViewValue(n[0].value.trim()),l.$modelValue.indexOf(":")!=l.$modelValue.lastIndexOf(":")||24<parseInt(l.$modelValue)&&""!=l.$modelValue||59<parseInt(l.$modelValue.split(":")[1])||24==parseInt(l.$modelValue.split(":")[0])&&0<parseInt(l.$modelValue.split(":")[1]))return r.removeInvalid(n[0].parentElement),void r.setValidationMessages(n[0].parentElement,"Invalid Time");r.removeInvalid(n[0].parentElement)}})}}}]),e.directive("zValue",[function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",maxPlaces:"=",isEdit:"=",valueChange:"=",maxDecimalPlaces:"="},link:function(n,l,e,r){function a(){var e=l[0].value;if(0<parseFloat(l[0].value.replace(/[$,]/g,""))){var a=parseFloat(Number(e.replace(/[^0-9\.]+/g,""))),t=parseFloat(a);l[0].value=t.toLocaleString("en-US",{minimumFractionDigits:n.maxDecimalPlaces}),r.$modelValue=t,n.ngModel=t}else!l[0].value||0==l[0].value||l[0].value;"$apply"!=n.$root.$$phase&&"$digest"!=n.$root.$$phase&&n.$apply()}n.$watch(function(){return n.ngModel},function(e){n.valueChange&&a()}),n.isEdit&&n.$watch(e.ngModel,function(e){a()}),l.on("blur",function(){a()}),l.bind("focus",function(){l[0].value=n.ngModel,n.valueChange=!1});var i=n.maxPlaces?n.maxPlaces:15;l.on("keypress",function(e){var a,t=e.which?e.which:e.keyCode;return(48<=t&&t<=57||46==t)&&((-1!=l[0].value.lastIndexOf(".")||parseInt(l[0].value.length)!==parseInt(i)||46==e.keyCode)&&((46!=t||-1==l[0].value.lastIndexOf("."))&&(!n.maxDecimalPlaces||(-1!=l[0].value.lastIndexOf(".")?(a=l[0].value.substring(l[0].value.lastIndexOf("."),l[0].value.length-1).length,!Number(a===n.maxDecimalPlaces)||!(parseInt(e.currentTarget.selectionStart)>l[0].value.lastIndexOf(".")||parseInt(e.currentTarget.selectionStart)===parseInt(i))):void 0))))})}}}]),e.directive("zNotMinus",[function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"=",maxDecimalPlaces:"=",valueChange:"=",maxPlaces:"=",isEdit:"="},link:function(n,l,e,r){function a(){var e=l[0].value;if(0<parseFloat(l[0].value.replace(/[$,]/g,""))){var a=parseFloat(Number(e.replace(/[^0-9\.]+/g,""))),t=parseFloat(a);l[0].value=t.toLocaleString("en-US",{minimumFractionDigits:n.maxDecimalPlaces}),r.$modelValue=t,n.ngModel=t}else!l[0].value||0==l[0].value||l[0].value;"$apply"!=n.$root.$$phase&&"$digest"!=n.$root.$$phase&&n.$apply()}n.$watch(function(){return n.ngModel},function(e){n.valueChange&&a()}),n.isEdit&&n.$watch(e.ngModel,function(e){a()}),l.on("blur",function(){a()}),l.bind("focus",function(){l[0].value=n.ngModel,n.valueChange=!1});var i=n.maxPlaces?n.maxPlaces:15;l.on("keypress",function(e){var a,t=e.which?e.which:e.keyCode;return(48<=t&&t<=57||46==t)&&((-1!=l[0].value.lastIndexOf(".")||parseInt(l[0].value.length)!==parseInt(i)||46==e.keyCode)&&((46!=t||-1==l[0].value.lastIndexOf("."))&&(!n.maxDecimalPlaces||(-1!=l[0].value.lastIndexOf(".")?(a=l[0].value.substring(l[0].value.lastIndexOf("."),l[0].value.length-1).length,!Number(a===n.maxDecimalPlaces)||!(parseInt(e.currentTarget.selectionStart)>l[0].value.lastIndexOf(".")||parseInt(e.currentTarget.selectionStart)===parseInt(i))):void 0))))})}}}])}();
!function(){"use strict";angular.module("ZValidations",[]).factory("customValidations",["$moment","config",function(n,u){var a={required:"%f is required",invalid:"Invalid %f",alpha:"Please enter alphabetics only",alphanumaric:"Alphanumerics only",decimal:"is Invalid",url:"is Invalid",website:"Website is Invalid",dateformate:"Please enter %f in DD/MM/YYYY format only",dateformatesmall:"Please enter %f in DD/MM format only",alphaWithSpaces:"Please enter alphabets only"},i={numericRegex:/^[0-9]+$/,integerRegex:/^\-?[0-9]+$/,decimalRegex:/^\-?[0-9]*\.?[0-9]+$/,emailRegex:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,15}(?:\.[a-z]{2})?)$/i,multiemailRegex:/^[\W]*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,15}[\W]*,{1}[\W]*)*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,15})[\W]*$/,ccmultiemailRegex:/^[\W]*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,15}[\W]*;{1}[\W]*)*([\w+\-.%]+@[\w\-.]+\.[A-Za-z]{2,15})[\W]*$/,alphaRegex:/^[a-z]+$/i,alphaNumericRegex:/^[a-z0-9]+$/i,alphaDashRegex:/^[a-z0-9_\-]+$/i,naturalRegex:/^[0-9]+$/i,naturalNoZeroRegex:/^[1-9][0-9]*$/i,ipRegex:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,base64Regex:/[^a-zA-Z0-9\/\+=]/i,numericDashRegex:/^[\d\-\s]+$/,urlRegex:/^((https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,}))?$/,dateRegex:/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/,dateRegexsmall:/(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[0-9]|1[0-2]))$/,alphabetsRegex:/^[a-zA-Z ]*$/};return{validateEmail:function(e){return!e||(1==i.emailRegex.test(e)||a.invalid.replace("%f","Email"))},validateMultiemail:function(e){return!e||(1==i.multiemailRegex.test(e)||a.invalid.replace("%f","Multiemail"))},validateMultiemailcc:function(e){return!e||(1==i.ccmultiemailRegex.test(e)||a.invalid.replace("%f","Multiemail"))},validateNumber:function(e){return!e||(1==i.numericRegex.test(e)||a.invalid.replace("%f","Number"))},validateAlpha:function(e){return!e||(1==i.alphaRegex.test(e)||a.alpha)},validateAlphaNumaric:function(e){return!e||(1==i.alphaNumericRegex.test(e)||a.alphanumaric)},valiadteDecimal:function(e){return!e||(1==i.decimalRegex.test(e)||a.decimal)},valiadteUrl:function(e){return!e||(1==i.urlRegex.test(e)||a.url)},validatePhoneNumber:function(e){return!e||(1==/^\d{1,200}$/.test(e.replace(/[\s()+\-\.]|ext/gi,""))||a.invalid.replace("%f"," Phone Number"))},validateLocalPostalCode:function(e){return!e||(1==i.numericRegex.test(e)?6==e.length||"must be 6 digits":"is Invalid")},validateForeignPostalCode:function(e){return!e||(1==i.alphaNumericRegex.test(e)&&1==(6<=e.length&&e.length<=10)||"Invalid Postal Code")},validateDate:function(e,t){if(e)return 1==i.dateRegex.test(e)||a.dateformate.replace("%f",t)},validateDate1:function(e,t){if(e)return 1==i.dateRegexsmall.test(e)||a.dateformatesmall.replace("%f",t)},validateRequire:function(e){return null!=(e=0==e.trim().length?"":e)&&""!=e&&null!=e==1||" is required"},validateCommunicationType:function(e,t){if(t){if(-1<(e=e.toLowerCase()).indexOf("phone")||-1<e.indexOf("fax")||-1<e.indexOf("mobile")||-1<e.indexOf("work"))return/^\d{1,200}$/.test(t.replace(/[\s()+\-\.]|ext/gi,""));if(-1<e.indexOf("email"))return i.emailRegex.test(t);if(-1<e.indexOf("Multiemail"))return i.multiemailRegex.test(t);if(-1<e.indexOf("ccMultiemail"))return i.ccmultiemailRegex.test(t);if(-1<e.indexOf("website"))return i.urlRegex.test(t)}return!0},validatePhone:function(e,t){return!e||(!1===isNaN(e)||t+" is Invalid")},dateFormateValidator:function(e,t){if(e){var a=angular.copy(e).toString(),i=0;for(var r in a)"0"==a[r]?i++:4!=i&&(i=0);return 1==n(e,t.toUpperCase(),!0).isValid()&&i<4||"Invalid Date"}return!0},compareWithNewDate:function(e){if(e){var t=(e=moment(e,u.dateFormat.toUpperCase()).format("DD/MM/YYYY")).split("/"),a=parseInt(t[0]),i=parseInt(t[1]),r=parseInt(t[2]),n=parseInt((new Date).getDate()),l=parseInt((new Date).getMonth())+1,o=parseInt((new Date).getFullYear());return o<r||r===o&&l<i||r===o&&i===l&&n<=a||"Must be greater than current "}return!0},validateAlphabets:function(e){return!e||(1==i.alphabetsRegex.test(e)||a.alphaWithSpaces)}}}]).factory("formValidate",["customValidations","$moment","commonService",function(c,p,v){var s=function(e,t,a,i,r){if("email"==e)return 1==c.validateEmail(t)||g(a)+" is Invalid";if("Multiemail"==e)return 1==c.validateMultiemail(t)||g(a)+" is Invalid";if("ccMultiemail"==e){var n;if(n=1==c.validateMultiemailcc(t)||g(a)+" use semicolon(;)",t&&1!=n){var l=-1<t.indexOf(";")?t.split(";"):[t];if(0<l.length&&-1==t.indexOf(","))for(var o in l)if(" is Invalid"==(n=1==c.validateEmail(l[o])||g(a)+" is Invalid"))return n}return n}if("decimal"==e)return c.valiadteDecimal(t);if("schedulerhours"==e){if(t){var u=-1!=t.indexOf(".")?t.split("."):t;return"object"!=typeof u?!(24<=parseInt(t))||"Invalid time":!(24<=parseInt(u[0])||59<parseInt(u[1]))||"Invalid time"}return!0}if("url"==e||"website"==e)return c.valiadteUrl(t);if("alpha"==e)return c.validateAlpha(t);if("alphanumaric"==e)return c.validateAlphaNumaric(t);if("number"==e)return c.validateNumber(t);if("required"==e)return null!=(t=0==t.trim().length?"":t)&&""!=t&&null!=t==1||g(a)+" is required";if("required1"==e)return null!=(t=0==t.trim().length?"":t)&&""!=t&&null!=t==1||g(a)+"";if("lpostalcode"==e&&"true"==i.dataset.validationrequired)return t=0==t.trim().length?"":t,c.validateLocalPostalCode(t);if("fpostalcode"==e&&"true"==i.dataset.validationrequired)return t=0==t.trim().length?"":t,c.validateForeignPostalCode(t);if("date"==e)return t=0==t.trim().length?"":t,c.dateFormateValidator(t,i.dataset.format);if("newdatecompare"===e)return t=0==t.trim().length?"":t,c.compareWithNewDate(t);if("mobile"===e||"phone"===e||"fax"===e||"work"===e||"personal"===e)return t=0==t.trim().length?"":t,c.validatePhone(t,a);if("lookup"===e){return t=t.trim(),r||i.dataset.lookupsource?!i.dataset.lookupsource||(0!=JSON.parse(i.dataset.lookupsource).filter(function(e){return t.toLowerCase()==(i.dataset.lookupprop?e[i.dataset.lookupprop]:e).toLowerCase().trim()}).length||"please select from lookup"):"From lookup only"}else{if("alphaWithSpaces"==e)return c.validateAlphabets(t);if("maxlength"==e)return(t=0==t.trim().length?"":t).length<=parseInt(i.dataset.maxvalue)||a+" length should be "+i.dataset.maxvalue+" characters";if("country"==e)return!(t=0==t.trim().length?"":t.trim())||(0!=Countries.filter(function(e){return e.name.toLowerCase()==t.toLowerCase()}).length||"select from lookup");if("time"==e){if(t=0==t.trim().length?"":t.trim())return!!p(t,"LT").isValid()||"Invalid time"}else{if("tm"==e)return"24:00"<(t=0==t.trim().length?"":t.trim())?"Invalid time":!t||(-1!=t.indexOf(".")||t.indexOf(":")!=t.lastIndexOf(":")||24<parseInt(t)||0==t.indexOf(":")?"Invalid time":(isNaN(t.split(":")[0])||t.split(":")[1])&&isNaN(t.split(":")[1])?"Invalid time":!(59<parseInt(t.split(":")[1]))||"Invalid time");if("monthdays"==e){if(t=t.trim())return!(parseFloat(t)>new Date(parseInt(i.dataset.month.split(";")[1]),parseInt(i.dataset.month.split(";")[0])+1,0).getDate())||"Invalid month days"}else if("AMTo"==e||"PMTo"==e){if(t){if("AMFrom"==e||"AMTo"==e){var s=document.getElementById("workweek_"+i.dataset.validationsection+"_AMFrom").value,d=document.getElementById("workweek_"+i.dataset.validationsection+"_AMTo").value;if(s&&d){var m=v.to24Hours(s).replace(":","."),f=v.to24Hours(d).replace(":",".");return parseFloat(m)<=parseFloat(f)||""}return!0}if("PMFrom"==e||"PMTo"==e){s=document.getElementById("workweek_"+i.dataset.validationsection+"_PMFrom").value,d=document.getElementById("workweek_"+i.dataset.validationsection+"_PMTo").value;if(s&&d){m=v.to24Hours(s).replace(":","."),f=v.to24Hours(d).replace(":",".");return parseFloat(m)<=parseFloat(f)||""}return!0}}return!0}}}return!0},g=function(e){for(var t,a=0;a<=e.length-1;a++){if(/[A-Z]/.test(e[a]))t=e.substring(0,a)+" "+e.substring(a,e.length)}return t?t.replace(t[0],t[0].toUpperCase()):e},d=function(e,t){return t=null==t?"":t,$(e).append('<span class="pull-right z-invalid">&nbsp;'+t+"</span>")},m=function(e){$(e).find("span.z-invalid").remove()};return{modifyFieldName:g,validateField:s,setValidationMessages:d,hideMessages:function(e){var t=[];$("#"+e).each(function(){t=$(this).find(":input")}),angular.forEach(t,function(e){$(e.parentElement).find("span.z-invalid").remove(),$(e).removeClass("error")})},removeInvalid:m,validate:function(e){var t,a=[],i=!1;$("#"+e).each(function(){t=$(this).find(":input")});for(var r=0;r<=t.length-1;r++)if("file"!=t[r].type&&"checkbox"!=t[r].type&&"button"!=t[r].type){var n=t[r].dataset.lookupvalue?t[r].dataset.lookupvalue:null;if(t[r].dataset.validationtype){m(t[r].parentElement),$(t[r]).removeClass("error");var l=t[r].dataset.validationtype.split(",");e:for(var o=0;o<=l.length-1;o++){$(t[r]).removeClass("error"),m(t[r].parentElement);var u=s(l[o],t[r].value,t[r].name,t[r],n);if(!0!==u){i=!0,$(t[r]).addClass("error"),a.push(t[r].id),d(t[r].parentElement,u);break e}}}}return{isValidationRequired:i,errorMessages:a}}}}])}();
!function(){"use strict";var a={dateFormat:["dd/MM/yyyy"],empObj:void 0};angular.module("appsworld").value("hrConfig",a)}();
!function(){"use strict";function e(n,r,c){return{saveData:function(e){null!=e.ModuleDetailId&&(e.ModuleDetailId=null);null!=e.CompanyId&&(e.CompanyId=null);var t=r.workWeekRemoteServer+"saveworkweeksetup";return n.saveEntity(t,e)},calculatingHours:function(e){var t,n,r,i,o=c.timeFormat,a=moment(e.AMFromTime,o),u=moment(e.AMToTime,o),l=moment.duration(u.diff(a)).asMinutes();l<0?l+=720:l=l;60<=l?(t=parseInt((l/60).toString().split(".")[0]),n=l-60*parseInt((l/60).toString().split(".")[0])):(t||(t=0),n||(n=0));l<60&&(n=l);var s=moment(e.PMFromTime,o),m=moment(e.PMToTime,o),g=moment.duration(m.diff(s)).asMinutes();g<0?g+=720:g=g;60<=g?(r=parseInt((g/60).toString().split(".")[0]),i=g-60*parseInt((g/60).toString().split(".")[0])):(r||(r=0),i||(i=0));g<60&&(i=g);var v=t+r,p=n+i;60<=p&&(v+=parseInt((p/60).toString().split(".")[0]),p-=60*parseInt((p/60).toString().split(".")[0]));isNaN(v)&&(v=0);isNaN(p)&&(p=0);"0"==p?p="00":p<10&&(p="0"+p);v<10&&(v="0"+v);return v+":"+p},totalHours:function(e){for(var t=0;t<=e.length-1;t++)0==e[t].IsWorkingDay&&(e[t].AMFromTime="00:00",e[t].AMToTime="00:00",e[t].PMFromTime="00:00",e[t].PMToTime="00:00",e[t].WorkingHours="00:00");if(0==e.length)return"00:00";for(var n=0,r=0,t=0;t<=e.length-1;t++)if(e[t].IsWorkingDay){var i=e[t].WorkingHours.split(":");n+=parseInt(i[0]),isNaN(n)&&(n=0),r+=parseInt(i[1]),isNaN(r)&&(r=0)}60<=r&&(n+=parseInt((r/60).toString().split(".")[0]),r-=60*parseInt((r/60).toString().split(".")[0]));"0"==r&&(r="00");return n+":"+r},getWeekData:function(e){null==e&&(e=null);var t=r.workWeekRemoteServer+"getemployeeworkweeksetup?employeeId="+e;return n.getEntities(t)}}}angular.module("workinghours",[]).factory("workinghoursFactory",e).directive("formatTime",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){t.on("change",function(){-1!=t[0].value.indexOf("M")&&" "!=t[0].value[t[0].value.trim().length-3]&&(t[0].value=t[0].value.substring(0,t[0].value.length-2)+" "+t[0].value.substring(t[0].value.length-2,t[0].value.length),r.$setViewValue(t[0].value.trim()))})}}}]),e.$inject=["commonService","serviceConfig","config"]}();
!function(){"use strict";function e(t,e,n,s,r,i,o,a,m,u,c,l){var k=this;k.title="workinghoursController",k.workingHours=function(e,r){e&&(k.workweek[r].WorkingHours=t.calculatingHours(e))},k.subTotal=function(e){if(e)return t.totalHours(e)};var d=r.Id;k.EmpStatus=r.Status,k.empName=o.EmployeeName,-1<e.current.name.indexOf("employeeselfservice")&&(k.EmpStatus=o.EmployeeStatus);var w=setInterval(function(){c&&!function(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return JSON.stringify(e)===JSON.stringify({})}(c)&&(clearInterval(w),r.Id=-1<e.current.name.indexOf("employeeselfservice")?c.EmployeeId:r.Id,d=r.Id,!c.EmployeeId&&-1<e.current.name.indexOf("employeeselfservice")?(k.errorMsg=!0,k.dataerror="You are not an Employee.Please contact Administrator",l.$$phase||l.$apply()):p())},5);function p(){k.employeeName=o.empObj,k.errorMsg=!1,k.dataerror="","hr.empmanagement.employees.employee.workinghours"===e.current.name?a.load_tab_permissions("hr_em_employees").then(function(e){k.isView="True"!=e.WorkingHours.Edit}):"hr.employeeselfservice.myprofile.workinghours"===e.current.name?a.load_user_permissions("hr_ess_myprofile").then(function(e){k.tabPermissions=e,k.isView=!k.tabPermissions.Edit}):"admin.mastersetup.workinghours"===e.current.name?a.load_user_permissions("admin_workinghours").then(function(e){k.tabPermissions=e,k.isView="True"!=k.tabPermissions.Edit}):"admin.hrsettings.workinghours"===e.current.name&&a.load_user_permissions("admin_hrworkinghours").then(function(e){k.tabPermissions=e,k.isView=!k.tabPermissions.Edit}),t.getWeekData(d).then(function(e){k.workWeeksetupObject=e.data;for(var r=0;r<=k.workWeeksetupObject.lstWorkWeekSetupModel.length-1;r++)k.workWeeksetupObject.lstWorkWeekSetupModel[r].EmployeeId=o.empObj?o.empObj.Id:null;k.workweek=e.data.lstWorkWeekSetupModel,k.attendance=e.data.IsAttendanceManager,k.checkbox=e.data.UsecompanyWorkProfile,!e.data.UsecompanyWorkProfile&&k.attendance&&(k.disabled=!0)})}k.checked=function(){k.checkbox=document.getElementById("chkbox").checked,1==k.checkbox&&(k.workWeeksetupObject.UsecompanyWorkProfile=!0,k.disabled=!1),0==k.checkbox&&k.attendance&&(k.disabled=!0,k.workWeeksetupObject.UsecompanyWorkProfile=!1)},k.cancel=function(){"hr.empmanagement.employee.workinghours"==e.current.name?e.go("hr.empmanagement.employees"):p()},k.save=function(){if(k.errorMsg=!1,k.dataerror="",s.validate("workWeek").isValidationRequired)return k.errorMsg=!0,k.dataerror="Invalid data, Please Verify !",void window.scrollTo(0,0);for(var e=0;e<k.workweek.length-1;e++){if(k.workweek[e].AMFromTime&&!k.workweek[e].AMToTime||!k.workweek[e].AMFromTime&&k.workweek[e].AMToTime||k.workweek[e].PMFromTime&&!k.workweek[e].PMToTime||!k.workweek[e].PMFromTime&&k.workweek[e].PMToTime)return k.errorMsg=!0,k.dataerror="Invalid data, Please Verify !",void window.scrollTo(0,0);var r=moment(k.workweek[e].AMToTime,"h:mma"),o=moment(k.workweek[e].PMFromTime,"h:mma");if("00:00"!=k.workweek[e].AMToTime&&"00:00"!=k.workweek[e].PMFromTime&&!r.isBefore(o))return k.errorMsg=!0,k.dataerror="PMFromTime Should not less than AMToTime",void window.scrollTo(0,0)}"00000000-0000-0000-0000-000000000000"===k.workWeeksetupObject.Id?(k.workWeeksetupObject.UserCreated=i.userFullName,k.workWeeksetupObject.CreatedDate=new Date):(k.workWeeksetupObject.ModifiedDate=new Date,k.workWeeksetupObject.ModifiedBy=i.userFullName),t.saveData(k.workWeeksetupObject).success(function(){n.notify.success("saved successfully"),p(),k.isValidationRequired=!1}).error(function(e){k.errorMsg=!0,k.dataerror=e.Message,window.scrollTo(0,0)})}}angular.module("workinghours").controller("workinghoursController",e),e.$inject=["workinghoursFactory","$state","commonService","formValidate","$stateParams","config","hrConfig","users_permissions","masterGridDataContext","$rootScope","companysettings","$scope"]}();
!function(){"use strict";angular.module("ZValidations").directive("formValidate",["customValidations","formValidate","$moment","config",function(d,u,m,e){return{restrict:"A",link:function(e,t,a){angular.forEach(t[0],function(l){l.dataset&&l.dataset.validationtype&&$("#"+l.id).bind("blur",function(){function e(e,t,a,i,r){if("email"==e)return 1==d.validateEmail(t)||u.modifyFieldName(a)+" is Invalid";if("Multiemail"==e)return 1==d.validateMultiemail(t)||u.modifyFieldName(a)+" is Invalid";if("ccMultiemail"==e){var l;if(l=1==d.validateMultiemailcc(t)||u.modifyFieldName(a)+" use semicolon(;)",t&&1!=l){var n=-1<t.indexOf(";")?t.split(";"):[t];if(0<n.length&&-1==t.indexOf(","))for(var o in n)if(" is Invalid"==(l=1==d.validateEmail(n[o])||u.modifyFieldName(a)+" is Invalid"))return l}return l}if("decimal"==e)return d.valiadteDecimal(t);if("url"==e||"website"==e.toLowerCase())return d.valiadteUrl(t);if("alpha"==e)return d.validateAlpha(t);if("alphanumaric"==e)return d.validateAlphaNumaric(t);if("number"==e)return d.validateNumber(t);if("required"==e)return null!=(t=0==t.trim().length?"":t)&&""!=t&&null!=t==1||u.modifyFieldName(a)+" is required";if("required1"==e)return null!=(t=0==t.trim().length?"":t)&&""!=t&&null!=t==1||u.modifyFieldName(a)+"";if("lpostalcode"==e&&"true"==i.dataset.validationrequired)return t=0==t.trim().length?"":t,d.validateLocalPostalCode(t);if("fpostalcode"==e&&"true"==i.dataset.validationrequired)return t=0==t.trim().length?"":t,d.validateForeignPostalCode(t);if("date"==e)return t=0==t.trim().length?"":t,d.dateFormateValidator(t,i.dataset.format);if("newdatecompare"===e)return t=0==t.trim().length?"":t,d.compareWithNewDate(t);if("lookup"===e)return!!r||"select from lookup";if("mobile"===e||"phone"===e||"fax"===e)return t=0==t.trim().length?"":t,d.validatePhone(t,a);if("maxlength"==e)return(t=0==t.trim().length?"":t).length<=parseInt(i.dataset.maxvalue)||a+" length should be "+i.dataset.maxvalue+" characters";if("country"==e)return!(t=0==t.trim().length?"":t.trim())||(0!=Countries.filter(function(e){return e.name.toLowerCase()==t.toLowerCase()}).length||"Select from lookup");if("time"==e){if(t=0==t.trim().length?"":t.trim())return!!m(t,"LT").isValid()||"Invalid time"}else if(!e||""==e)return!0}u.removeInvalid(l.parentElement);for(var t=l.dataset.validationtype.split(","),a=l.dataset.lookupvalue?l.dataset.lookupvalue:null,i=0;i<=t.length-1;i++){u.removeInvalid(l.parentElement);var r=e(t[i],l.value,l.name,l,a);if(1!=r){$(l).addClass("error"),u.setValidationMessages(l.parentElement,r);break}$(l).removeClass("error")}})})}}}])}();
!function(){"use strict";function e(n,o,a,c){return{searchResults:function(e){var r=c.current.name.includes("companies")&&"Super User"===n.role?"Company":"",t=a.elasticSearchRemoteServer+"GlobalSearch?startIndex=0&noOfRecords=20&companyId="+n.companyId+"&searchCriteria="+e+"&moduleName="+c.current.name.split(".")[0]+"&company="+r;return o.getEntities(t)},buildUrl:function(a){var i=c.get().filter(function(e,r,t){return e.name===a.URL});return{url:a.URL,params:function(){try{var e=i[0].url.split("?"),r=i[0].url.split("/:")}catch(e){return"link not found"}e=1<(e=e||r).length?e:r;for(var t={},n=1;n<=e.length-1;n++)"id"===e[n].toLowerCase()?t[e[n]]="Id":t[e[n]]=e[n];for(var o in t)"Id"===o||"id"===o?t[o]=a.Id:"isview"==t[o].toLowerCase()?t[o]=!0:"mode"==t[o].toLowerCase()?t[o]="view":"form"==t[o].toLowerCase()&&(t[o]=a.Type);return t}()}}}}angular.module("appsworld").factory("globalSearchContext",e),e.$inject=["config","commonService","serviceConfig","$state"]}();
!function(){"use strict";function e(a,e,s,t,r,o){var n=this;function c(e){n.isShowMessageBar=!0,n.message="Searching......",function(e){n.searchText=e,a.searchResults(e).then(function(e){n.searchResults=e.data,n.searchResults?n.isShowMessageBar=0===n.searchResults.length:n.isShowMessageBar=!1,n.message="No Results found"})}(e)}function l(e){var s=a.buildUrl(e);"link not found"!==s.params?r.go(s.url,s.params):o.alerts("No link found for selected result item","No link found").error()}n.searchResults=[],n.search=c,n.go_to_selected=n.go_to_selected,n.getUrl=l,n.isShowMessageBar=!0,n.message="Searching......",c(t.searchText)}angular.module("appsworld").controller("gSearchController",e),e.$inject=["globalSearchContext","config","$scope","$stateParams","$state","commonService"]}();
!function(){"use strict";function e(a,c,e,t){var s=e.defer();return{load_notifications:function(e,t,r,i){var n=i||null;{if(e.companyId){r=r||"All";var o=c.nextboardRemoteServer+"getnotofication?recordtype="+t+"&cursorName="+r+"&lastNotificationId="+n;return a.getEntities(o)}return s.promise}},load_activities:function(e,t,r,i){var n=i||null;{if(e.companyId){r=r||"All";var o=c.nextboardRemoteServer+"getactivities?recordtype="+t+"&cursorName="+r+"&lastNotificationId="+n;return a.getEntities(o)}return s.promise}},notification_count:function(e){var t=c.nextboardRemoteServer+"getisreadfalserecords";return a.getEntities(t)},delete_notification:function(e,t){var r;{if(0===e.length&&!t)return void a.notify.warning("Please select  Notification");if(0<e.length&&!t){r={Ids:[]};for(var i=0;i<=e.length-1;i++)r.Ids.push(e[i])}else e.length,(r={Ids:[]}).Ids.push(t)}var n=c.nextboardRemoteServer+"deletenotification";return a.saveEntity(n,r)},read_notification:function(e){var t=c.nextboardRemoteServer+"updatenotification?id="+e+"&isRead=true";return a.getEntities(t)},split_notification:function(e){var t={Sec1:[],Sec2:[]};for(var r in e)parseInt(r)%2==0?t.Sec1.push(e[r]):t.Sec2.push(e[r]);return t},curserLu:function(){var e=c.admincommonRemoteServer+"getmodulenames";return a.getEntities(e)},MarkasRead:function(e){return a.saveEntity(c.nextboardRemoteServer+"updatenotifications",e)},GetIds:function(e){for(var t={Ids:[]},r=0;r<e.length;r++)t.Ids.push(e[r]);return t},RemoveDuplicates:function(e){var t,r,i,n=[];for(r=0;r<e.length;r++){for(t=void 0,i=0;i<n.length;i++)if(e[r]===n[i]){t=!0;break}t||n.push(e[r])}return n},loadMoreActivities:function(e,t,r,i){r=r||"All";var i=i||c.nextboardRemoteServer+"getactivities1?$inlinecount=allpages&take=25&%24skip=0&page=1&pageSize=25&recordtype="+t+"&cursorName="+r;return a.getEntities(i)},loadMoreNotificaitons:function(e,t,r,i){r=r||"All";var i=i||c.nextboardRemoteServer+"getNotifications?$inlinecount=allpages&$take=25&%24skip=0&page=1&pageSize=25&recordtype="+t+"&cursorName="+r;return a.getEntities(i)},getActivitysData:function(e,t,r){var i=c.nextboardRemoteServer+"dashboardcommunicators?$inlinecount=allpages&$take=25&page=1&pageSize=25&cursorName="+e+"&communicatorType=All",n=r||i;return a.getEntities(n)},getNotificationsData:function(e,t,r){var i=c.nextboardRemoteServer+"dashboardnotofication?$inlinecount=allpages&$take=25&page=1&pageSize=25&cursorName="+e+"&recordType=All",n=t||i;return a.getEntities(n)},dashnotification_count:function(e){var t=c.nextboardRemoteServer+"getdashboardisreadfalserecords?cursorName="+e;return a.getEntities(t)}}}angular.module("notification.center",[]).factory("notificationService",e),e.$inject=["commonService","serviceConfig","$q","config"]}();
angular.module("notification.center").directive("notificationCenter",[function(){return{restrict:"E",templateUrl:"CustomDirectives/notificationcenter/notificationcenter.html",scope:{options:"="},bindToController:!0,controllerAs:"vm",controller:["$rootScope","$scope","notificationService","commonService","config",function(s,i,a,r,t){var f=this;function o(i,t){a.loadMoreNotificaitons(f.options,"All",i).then(function(i){if(0<f.NotificationList.length)for(var t in i.data.Items)f.isDelete||f.NotificationList.push(i.data[t].Items);else f.NotificationList=i.data.Items;f.NotificationsCount=i.data.Count,f.nextnotificationLink=i.data.NextPageLink,f.lodingNotification=!1})}function n(i,t){a.loadMoreActivities(f.options,"All",i).then(function(i){if(0<f.ActivitisList.length)for(var t in i.data.Items)f.isDelete||f.ActivitisList.push(i.data[t].Items);else f.ActivitisList=i.data.Items;f.ActivitisCount=i.data.Count,f.nextactivityLink=i.data.NextPageLink,f.lodingActivity=!1})}function l(){f.lodingNotification||(f.lodingNotification=!0,0<f.NotificationList.length?a.loadMoreNotificaitons(f.options,"All",f.cursorName,f.nextnotificationLink).then(function(i){f.NotificationList=f.NotificationList.concat(i.data.Items),f.nextnotificationLink=i.data.NextPageLink,f.lodingNotification=!1}):o(f.cursorName))}function u(){f.lodingActivity||(f.lodingActivity=!0),0<f.ActivitisList.length?a.loadMoreActivities(f.options,"All",f.cursorName,f.nextactivityLink).then(function(i){f.ActivitisList=f.ActivitisList.concat(i.data.Items),f.nextactivityLink=i.data.NextPageLink,f.lodingActivity=!1}):n(f.cursorName)}function d(i){return function(t){return 0==i.filter(function(i){return i==t.Id}).length}}function e(o,n){a.read_notification(o).then(function(i){if(s.$broadcast("Count"),f.isDelete=!0,n)for(var t=0;t<f.NotificationList.length;t++)f.NotificationList[t].Id==o&&(f.NotificationList[t].IsRead=!0);else for(t=0;t<f.ActivitisList.length;t++)f.ActivitisList[t].Id==o&&(f.ActivitisList[t].IsRead=!0)})}function v(){f.selection=[],f._notifications=[],f._activities=[],f.obj.notification=!1,f.obj.activity=!1}f.selection=[],f.selectedAll=[],f._notifications=[],f._activities=[],f.obj={},f.obj.notification=!1,f.obj.activity=!1,f.notificationCount=0,f.deleteNotification=function(e,c){0!==f.selection.length||e?r.confirmationDialog("Confirmation","Are you sure, you want to delete?","Ok","Cancel").then(function(i){"ok"===i&&a.delete_notification(f.selection,e).then(function(i){if(r.notify.success(i.data),s.$broadcast("Count"),f.isDelete=!0,e)if(c)for(var t=0;t<f.NotificationList.length;t++)f.NotificationList[t].Id==e&&f.NotificationList.splice(t,1);else for(t=0;t<f.ActivitisList.length;t++)f.ActivitisList[t].Id==e&&f.ActivitisList.splice(t,1);else{var o=angular.copy(f.NotificationList),n=angular.copy(f.ActivitisList);f.NotificationList=o.filter(d(f.selection)),f.ActivitisList=n.filter(d(f.selection)),f.NotificationList.length<15&&l(),f.ActivitisList.length<15&&u()}v()})}):r.notify.warning("Please select  Notification")},f.readNotification=e,f.readseletedNotifications=function(){f.selection.length?a.MarkasRead(a.GetIds(f.selection)).then(function(i){r.notify.success(i.data),f.isDelete=!0,v();for(var t=0;t<f.selection.length;t++)for(var o=0;o<f.NotificationList.length;o++)f.selection[t]==f.NotificationList[o].Id&&(f.NotificationList[o].IsRead=!0);for(var t=0;t<f.selection.length;t++)for(var o=0;o<f.ActivitisList.length;o++)f.selection[t]==f.ActivitisList[o].Id&&(f.ActivitisList[o].IsRead=!0);s.$broadcast("Count"),f.selection=[]}):r.notify.warning("No records selected.")},f.splitNotification=function(){},f.toggleSelection=function(i,t){var o=f.selection.indexOf(i);-1===o?(f.selection.push(i),t?(f._notifications.push(i),f._notifications=a.RemoveDuplicates(f._notifications),f._notifications.length==f.NotificationList.length?f.obj.notification=!0:f.obj.notification=!1):(f._activities.push(i),f._activities=a.RemoveDuplicates(f._activities),f._activities.length==f.ActivitisList.length?f.obj.activity=!0:f.obj.activity=!1)):(f.selection.splice(o,1),t?(f._notifications.splice(f._notifications.indexOf(i),1),f.obj.notification=!1):(f._activities.splice(f._activities.indexOf(i),1),f.obj.activity=!1))},f.toggleNotificationSelection=function(i,t,o){if(t)for(var n=0;n<i.length;n++)-1==f.selection.indexOf(i[n].Id)&&(f.selection.push(i[n].Id),o?f._notifications.push(i[n].Id):f._activities.push(i[n].Id));else for(var e=0;e<i.length;e++)f.selection.splice(f.selection.indexOf(i[e].Id),1),o?f._notifications=[]:f._activities=[]},f.loadMoreNotificaitons=l,f.loadMoreActivities=u,f.isShowLoadMore=function(i){return i?!(f.NotificationsCount<=f.NotificationList.length):!(f.ActivitisCount<=f.ActivitisList.length)},f.redirect=function(i){var t=app_configuration.app_config.module_linking[i.CursorUrl]+"/#/"+i.Url;if(f.parameters=JSON.parse(i.Parameter),f.parameters)for(var o in t=f.parameters?t+"?":"",f.parameters)t=t+o+"="+f.parameters[o]+"&";e(i.Id),window.location.href=t},f.cursorChange=function(){f.NotificationList=[],f.ActivitisList=[],o(f.cursorName),n(f.cursorName)},f.NotificationList=f.NotificationList?f.NotificationList:[],f.ActivitisList=f.ActivitisList?f.ActivitisList:[],s.$broadcast("Count"),a.curserLu().then(function(i){f.ErrorMsg="",f.cursorLu=i.data[0].Lookups,f.cursorName="All",o(f.cursorName),n(f.cursorName)},function(i){f.ErrorMsg="There is an error occured"})}]}}]);
angular.module("notification.center").directive("dashNotifications",[function(){return{restrict:"E",templateUrl:"CustomDirectives/notificationcenter/dashnotifications.html",scope:{cursorName:"="},bindToController:!0,controllerAs:"vm",controller:["$rootScope","$scope","notificationService","commonService","config",function(t,i,n,a,e){var o=this;function c(t){o.lodingnotification=!0;var i=i||"Notifications";t=o.notifmoduleName,n.getNotificationsData(t,o.notNxtpageLink,i).then(function(t){o.notificationdetails=t.data.Items,o.notNxtpageLink=t.data.NextPageLink,o.lodingnotification=!1}),n.dashnotification_count(t).then(function(t){o.count=t.data})}function r(t,i,a){o.loadActivity=!0,t=o.moduleName,o.type=i||"tasks",a=a||"",n.getActivitysData(t,o.type,a).then(function(t){o.activityDetais=t.data.Items,o.nextpageLink=t.data.NextPageLink,o.loadActivity=!1})}o.notificationtabs=function(t){o.notNxtpageLink="",c()},o.activitytabs=function(t){o.lastId="",o.type=t,r(o.moduleName,t,o.lastId)},o.nextPage=function(){var t;o.activityDetais&&(o.activityDetais.length<20||o.busy||(o.busy=!0,o.lastId!=o.activityDetais[o.activityDetais.length-1].Id&&(o.lastId=0<o.activityDetais.length?o.activityDetais[o.activityDetais.length-1].Id:"",t=o.moduleName,n.getActivitysData(t,o.type,o.nextpageLink).then(function(t){var i=t.data;for(var a in o.nextpageLink=t.data.NextPageLink,i)o.activityDetais.push(i[a]);o.busy=!1}))))},o.activityCursor=function(t){o.lastId="",r(t,"tasks",o.lastId)},o.moduleName=-1==o.cursorName.indexOf(" ")?o.cursorName:o.cursorName.split(" ")[0],o.notifmoduleName=o.cursorName,o.notificationCursor=function(t){o.lastId="",c(t)},o.redirect=function(t){var i=app_configuration.app_config.module_linking[t.CursorUrl]+"/#/"+t.Url;if(o.parameters=JSON.parse(t.Parameter),o.parameters)for(var a in i=o.parameters?i+"?":"",o.parameters)i=i+a+"="+o.parameters[a]+"&";(function(t,i){var a=o.notifmoduleName;n.read_notification(t).then(function(t){n.dashnotification_count(a).then(function(t){o.count=t.data})})})(t.Id),window.location.href=i},c(),r()}]}}]);
!function(){"use strict";angular.module("appsworld").factory("genericFilters",[function(){return{}}]),angular.module("appsworld").filter("clientZoneDateTimeFormat",["$filter","config",function(r,a){return function(t){if(null==t)return"";var n=r("date")(new Date(t),a.dateFormat),e=moment.utc(t).toDate();return n+" "+("hh:mm:ss"==a.timeFormat||"hh:mm"==a.timeFormat?r("date")(new Date(e),a.timeFormat+" a"):r("date")(new Date(e),a.timeFormat))}}]),angular.module("appsworld").filter("clientZoneDateFormat",["$filter","config",function(r,a){return function(t){if(null==t)return"";var n=r("date")(new Date(t),a.dateFormat),e=moment.utc(t).toDate();r("date")(new Date(e),"h:mm a");return n}}]),angular.module("appsworld").filter("clientZonedateTimeFormat",["config",function(r){return function(t){if(null==t)return"";var n=moment(t).format(r.dateFormat.toUpperCase()),e=moment(t).toDate();return n+" "+moment(e).format("h:mm a")}}]),angular.module("appsworld").filter("makePositive",["$filter","config",function(t,n){return function(t){return t<0&&(t="("+Math.abs(t).toFixed(2)+")"),t}}]),angular.module("appsworld").filter("makeDecimalFormat",[function(){return function(t){if(t||0===t){if(0<=t){t=(n=parseFloat(t)).toLocaleString("en-US",{minimumFractionDigits:2})}else{var n=parseFloat(t);t="("+Math.abs(n).toLocaleString("en-US",{minimumFractionDigits:2})+")"}return t}}}]),angular.module("appsworld").filter("makeDecimalFormatWithParams",[function(){return function(t,n){if(t||0===t){if(0<=t){t=(e=parseFloat(t)).toLocaleString("en-US",{minimumFractionDigits:n})}else{var e=parseFloat(t);t="("+Math.abs(e).toLocaleString("en-US",{minimumFractionDigits:n})+")"}return t}}}]),angular.module("appsworld").filter("makeDecimalFormatFE",[function(){return function(t){if(t){if(0<=t){t=(n=parseFloat(t)).toLocaleString("en-US",{minimumFractionDigits:6})}else{var n=parseFloat(t);t="("+Math.abs(n).toLocaleString("en-US",{minimumFractionDigits:6})+")"}return t}}}]),angular.module("appsworld").filter("commaSeperateWithMinusForLables",["$filter","config",function(t,n){return function(t){return t=t?t.toString():null,0<=parseInt(t,10)?t.replace(/\B(?=(\d{3})+(?!\d))/g,","):t?"("+(t=(t=t).slice(1,t.length)).replace(/\B(?=(\d{3})+(?!\d))/g,",")+")":t?t.toLocaleString("en-US"):null}}]),angular.module("appsworld").filter("makeNullDecimal",[function(){return function(t,n){var e;return"NA"==n||null==t||""===t?t="":0<t||0==t||"0.00"==t?t=(e=parseFloat(t)).toLocaleString("en-US",{minimumFractionDigits:2}):t<0?(e=parseFloat(t),t="("+Math.abs(e).toLocaleString("en-US",{minimumFractionDigits:2})+")"):void 0}}]),angular.module("appsworld").filter("formatDateAndTime",[function(){return function(t){var n=moment.utc(t).toDate(),e=moment().format(),r=(parseFloat("0"),moment(n).format("DD/MM/YYYY HH:mm")),a=moment(e).format("DD/MM/YYYY HH:mm"),o=r;if(moment(n).format("DD/MM/YYYY")!=moment(e).format("DD/MM/YYYY"))return moment(n).format("DD/MM/YYYY HH:mm");var i=moment(a,"DD/MM/YYYY HH:mm").diff(moment(o,"DD/MM/YYYY HH:mm")),m=moment.duration(i);if(0!=Math.floor(m.asHours()))return Math.floor(m.asHours())+" hours ago";i=moment(a,"DD/MM/YYYY HH:mm").diff(moment(o,"DD/MM/YYYY HH:mm")),m=moment.duration(i);return 0==Math.floor(m.asMinutes())?" few seconds ago ":Math.floor(m.asMinutes())+" minutes ago"}}]),angular.module("appsworld").filter("UTCtime",[function(){return function(t){var n=parseFloat("5.5");return moment.utc(t).add("hours",n).format("DD/MM/YYYY HH:mm")}}]),angular.module("appsworld").filter("limitTo40",[function(){return function(t){if(10<t.length){return t.substring(0,10)+"....."}return t}}]),angular.module("appsworld").filter("limitTo150",[function(){return function(t){if(150<t.length){return t.substring(0,150)+"....."}return t}}]),angular.module("appsworld").filter("communicationType",[function(){return function(t){var n,e=[];try{if(-1===t.Communication.indexOf("key")){if('[{"":""}]'!=t.Communication&&t.Communication!=[{undefined:""}]&&t.Communication!=[{key:"undefined",value:""}]){for(var r in JSON.parse(t.Communication))for(var r in r,n=JSON.parse(t.Communication)[r])Data.push({type:r,value:n[r]});return"undefined"==e[0].value||"undefined"==e[0].type||""==e[0].value?"":e[0].type+": "+e[0].value}}else if('[{"":""}]'!=t.Communication&&t.Communication!=[{undefined:""}]&&t.Communication!=[{key:"undefined",value:""}]){for(var r in JSON.parse(t.Communication))r,n=JSON.parse(t.Communication)[r],e.push({type:n.key,value:n.value});return"undefined"==e[0].value||"undefined"==e[0].type||""==e[0].value?"":e[0].type+": "+e[0].value}}catch(t){}return""}}]),angular.module("appsworld").filter("customsearch",[function(){return function(t,n){return n&&t?t.filter(function(t){return t.Name.toLowerCase().includes(n.toLowerCase())}):t}}])}();
!function(){"use strict";angular.module("gridColumns",[]).factory("gridCols",["config",function(t){return{ControlCodes:function(){return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem) > -1" ng-click="vm.toggleSelection(dataItem)"><label for=""></label></div>',width:"50px"},{field:"ControlCodeCategoryCode",template:'<a  ng-click="vm.getViewMode(dataItem.Id,dataItem.ModuleNamesUsing)">${ControlCodeCategoryCode}</a>',title:"Category",filterable:{cell:{operator:"contains"}}},{field:"ModuleNamesUsing",title:"ModuleNamesUsing"}]},Employee:function(){return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem) > -1" ng-click="vm.toggleSelection(dataItem.Id,dataItem.Status,dataItem.Name)"><label for=""></label></div>',width:"50px"},{field:"FirstName",title:"FirstName",width:"250px",template:'<a href="" ng-click="vm.getViewMode(dataItem)">${FirstName}</a>'},{field:"Username",title:"UserName",width:"250px"},{field:"CreatedDate",title:"Created Date",type:"date",format:"{0:"+t.dateFormat+"}",width:"200px"},{field:"Status",title:"Status",width:"200px"}]},Usercreation:function(){return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem.Id) > -1" ng-click="vm.toggleSelection(dataItem)"><label for=""></label></div>',width:"40px"},{field:"FirstName",template:'<a ui-sref="admin.mastersetup.user({Id: dataItem.Username,IsAdmin: dataItem.IsAdmin})" ng-click="vm.getViewMode(dataItem)">${FirstName}</a>',title:"Name",width:"200px",filterable:{cell:{operator:"contains"}}},{field:"Username",title:"Username/Email",width:"200px",filterable:{cell:{operator:"contains"}}},{field:"Status",title:"Status",width:"200px",filterable:{cell:{operator:"contains"}}}]},Addrole:function(){return[{template:'<div class="checkbox checkboxlable" ng-disabled="dataItem.IsSystem"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem.Id) > -1" ng-click="vm.toggleSelection(dataItem)" ><label for=""></label></div>',width:"20px"},{field:"Name",template:'<a ui-sref="admin.mastersetup.role({Id: dataItem.Id,moduleMasterId: dataItem.ModuleMasterId, IsSystem: dataItem.IsSystem})" ng-click="vm.getViewMode(dataItem)" ng-disabled="dataItem.IsSystem">${Name}</a>',title:"Name",width:"150px",filterable:{cell:{operator:"contains"}}},{field:"ModuleName",title:"ModuleName",width:"150px",filterable:{cell:{operator:"contains"}}},{field:"Status",title:"Status",width:"150px",filterable:{cell:{operator:"contains"}}},{field:"",title:"System",template:'<a ng-show="dataItem.IsSystem"><i tooltip-placement="top" tooltip="This is System Account" class="fa fa-lock"></i></a><a ng-hide="dataItem.IsSystem"></a>',width:"50px"}]},masterGrids:function(e){if(e)switch(e.toLowerCase()){case"idtype":return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem) > -1" ng-click="vm.toggleSelection(dataItem.Id,dataItem.Status)"><label for=""></label></div>',width:"30px"},{field:"Name",title:"Name",template:'<a href="" ng-click="vm.getViewMode(dataItem.Id)">${Name}</a>',filterable:{cell:{operator:"contains"}}},{field:"UserCreated",title:"User Created",width:"200px"},{field:"CreatedDate",title:"Date Of Creation",type:"date",format:"{0:"+t.dateFormat+"}",width:"200px"},{field:"Status",title:"Status",width:"200px"}];case"currencycode":return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem) > -1" ng-click="vm.toggleSelection(dataItem.Id,dataItem.Status)"><label for=""></label></div>',width:"30px"},{field:"Code",title:"Code",template:'<a href="" ng-click="vm.getViewMode(dataItem.Id)">${Code}</a>',filterable:{cell:{operator:"contains"}}},{field:"Name",title:"Name",width:"250px"},{field:"Status",title:"Status",width:"200px"},{field:"UserCreated",title:"Created By",width:"120px",hidden:!0},{field:"CreatedDate",title:"Created On",type:"date",template:"<lable>{{dataItem.CreatedDate | clientZoneDateFormat}}</lable>",width:"120px",hidden:!0},{field:"ModifiedBy",title:"Modified By",width:"127px",hidden:!0},{field:"ModifiedDate",title:"Modified On",type:"date",template:"<lable>{{dataItem.ModifiedDate | clientZoneDateFormat}}</lable>",width:"130px",hidden:!0}];case"bankmaster":return[{template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem) > -1" ng-click="vm.toggleSelection(dataItem.Id,dataItem.Status)"><label for=""></label></div>',width:"40px"},{field:"Name",title:"Name",template:'<a href="" ng-click="vm.getViewMode(dataItem.Id)">${Name}</a>',filterable:{cell:{operator:"contains"}}},{field:"ShortCode",title:"ShortCode"},{field:"Status",title:"Status"}]}}}}])}();
!function(){"use strict";angular.module("appsworld").run(["$rootScope","users_permissions","$state","config","$cookies","zStorageEnc",function(e,o,n,a,t,s){window.onbeforeunload=function(){s.removeItem("IsSetupRoute")};var u=s.getCookie("companyCursors");e.$on("$stateChangeStart",function(e,t){u||(u=s.getCookie("companyCursors")),t.data&&(t.data.permissionKey&&-1<t.data.permissionKey.indexOf("idtype"))&&(t.data.permissionKey=""),t.data.permissionKey&&"takefromurl"!=t.data.permissionKey&&o.load_user_permissions(t.data.permissionKey).then(function(e){if(e){if("True"!=e.View&&n.go(app_configuration.app_config.current_module+".access_denied"),u){var t=JSON.parse(u).filter(function(e){return e.ModuleName.toLowerCase()===app_configuration.app_config.current_module+" cursor"})[0];a.IssetupDone||(a.IssetupDone=!t||t.IsSetupDone),a.setupPercentage=a.IssetupDone?100:0}!a.companyId||a.IssetupDone||"true"==s.getItem("IsSetupRoute")||s.getItem("IsSetupRoute")||n.go("intialsetup")}}),t.data&&t.data.tabname&&t.data&&t.data.parentPremissionKey&&o.setTabModuleDetailId(t.data.parentPremissionKey,t.data.tabname),a.formDisplayLable=""}),e.$on("$stateChangeSuccess",function(e,t){if(u){var o=JSON.parse(u).filter(function(e){return e.ModuleName.toLowerCase()===app_configuration.app_config.current_module+" cursor"})[0];a.IssetupDone||(a.IssetupDone=!o||o.IsSetupDone),a.setupPercentage=a.IssetupDone?100:0}!a.companyId||a.IssetupDone||"true"==s.getItem("IsSetupRoute")||s.getItem("IsSetupRoute")||("intialsetup"!=t.name&&n.go("intialsetup"),t.name===s.getItem("SetupLink")&&s.removeItem("SetupLink"))})}])}();
!function(){"use strict";function e(a,s,i,p){var n=this;n.routeTo=o,n.isMandSetupCompleted=function(){return n.checklistdata?n.checklistdata.IssetupDone:i.IssetupDone},n.disableLink=function(e){if(n.checklistdata&&0!==e&&n.checklistdata.CursorDetails[e].IsMandatory)return n.checklistdata.CursorDetails[e-1].IsMandatory&&!n.checklistdata.CursorDetails[e-1].IsSetupDone;return!1},n.isGroupSetupDone=function(e){return e.filter(function(e){return e.IsSetupDone}).length==e.length},n.getCursorName=function(e){var t=app_configuration.app_config.current_module;return e.SetupCursor?-1<e.SetupCursor.toLowerCase().indexOf(t)?"":"("+e.SetupCursor+")":e.SetupCursor},n.routeToDashBoard=function(){s.go(app_configuration.app_config.current_module+".dashboard")},n.showHeader=function(){return s.current.name!=r+".intialsetup"},n.isContinueSetup=function(){return 100!=i.setupPercentage&&"Super User"!=i.role},n.setupPercentage=function(){return i.setupPercentage},n.showhide=function(){return-1<s.current.name.indexOf(".intialsetup")};var r=app_configuration.app_config.current_module;function o(e,t){var r=app_configuration.app_config.current_module;if(p.setItem("IsSetupRoute",!0),!e.SetupCursor||-1<e.SetupCursor.toLowerCase().indexOf(r)&&e.SetupCursor)if(p.setItem("ModuleDetailId",e.Id),p.setSessionItem("ModuleDetailId",e.Id),p.setItem("MenuModuleDetailId",e.Id),t&&a.check_list().then(function(e){i.setupPercentage=e.data.ProgressPercentage,i.IssetupDone=e.data.IssetupDone}),0<e.Url.indexOf("(")){var o=e.Url.split("("),n=o[1].split(")")[0].replace("{","").replace("}","").split(","),u={};n.forEach(function(e){var t=e.split(":");u[t[0]]=t[1],u[t[0]]=u[t[0]].replace(/"/g,"")}),s.go(o[0],u)}else s.go(e.Url);else p.removeItem("ModuleDetailId"),p.removeItem("MenuModuleDetailId"),p.setItem("SetupLink",JSON.stringify(e)),window.location.replace("hr"==e.SetupCursor.substring(0,e.SetupCursor.indexOf(" ")).toLowerCase()?app_configuration.app_config.module_linking[e.SetupCursor.substring(0,e.SetupCursor.indexOf(" ")).toLowerCase()]+"/#/hr":app_configuration.app_config.module_linking[e.SetupCursor.substring(0,e.SetupCursor.indexOf(" ")).toLowerCase()])}n.currentModule=app_configuration.app_config.current_module,function(){function e(){n.IssetupLoader=!0,a.check_list().then(function(e){if(i.setupPercentage=e.data.ProgressPercentage,i.IssetupDone=e.data.IssetupDone,n.checklistdata=e.data,n.groupDetails=function(e){var r=[],t=[];$.each(e.CursorDetails,function(e,t){-1===$.inArray(t.GroupName,r)&&r.push(t.GroupName)});for(var o=0;o<=r.length-1;o++){t.push({GroupName:r[o],List:[],MasterUrl:null,CssSprite:null});for(var n=0;n<=e.CursorDetails.length-1;n++)r[o]===e.CursorDetails[n].GroupName&&(t[o].MasterUrl=t[o].MasterUrl?t[o].MasterUrl:e.CursorDetails[n].MasterUrl,t[o].CssSprite=t[o].CssSprite?t[o].CssSprite:e.CursorDetails[n].CssSprite,t[o].List.push(e.CursorDetails[n]))}return t}(angular.copy(n.checklistdata)),n.checklistdata.IssetupDone&&100===n.checklistdata.ProgressPercentage){p.getItem("redirectURL")?-1<p.getItem("redirectURL").indexOf("intialsetup")?s.go(app_configuration.app_config.current_module+".dashboard"):window.location.href=p.getItem("redirectURL"):s.go(app_configuration.app_config.current_module+".dashboard"),p.removeItem("redirectURL");var t=p.getCookie("companyCursors");if(t){var r={domain:window.location.host.split(":")[0],path:"/"};for(var o in t=JSON.parse(t))t[o].ModuleName.toLowerCase()===app_configuration.app_config.current_module+" cursor"&&(t[o].IsSetupDone=e.data.IssetupDone);p.removeCookie("companyCursors",r.path,r.domain),p.setCookie("companyCursors",t,r.path,r.domain)}}n.IssetupLoader=!1})}"intialsetup"==s.current.name&&p.removeItem("IsSetupRoute");var t=p.getItem("SetupLink")?JSON.parse(p.getItem("SetupLink")):null;t?t.Url.split(".")[0]===r?(o(t,!0),p.removeItem("SetupLink"),p.removeItem("redirectURL")):(p.removeItem("SetupLink"),e()):e()}()}angular.module("appsworld").controller("checklistCtrl",e),e.$inject=["framework","$state","config","zStorageEnc"]}();
var Countries=[{name:"Afghanistan",code:"AF"},{name:"land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];
!function(){"use strict";function e(s,t,r,a,i,e){var l=i.admincommonRemoteServer,n=i.frmeworkV2Service?i.frmeworkV2Service:l,o=e.defer();return{company_settings:function(){return a.getEntities(n+"getcompanysetting").then(function(e){for(var a in e.data.Metadata)r[a]="True"==e.data.Metadata[a];for(var a in e.data)"object"!=typeof e.data[a]&&(r[a]=e.data[a]);for(var a in e.data.CompanyFeatures)r[a]="True"==e.data.CompanyFeatures[a];r.ConfigurationModel=e.data.ConfigurationModel;for(var i=0;i<=e.data.SettiongsModel.length-1;i++)for(var a in t[e.data.SettiongsModel[i].CursorName]=e.data.SettiongsModel[i].Metadata,t[e.data.SettiongsModel[i].CursorName])t[e.data.SettiongsModel[i].CursorName][a]="True"==t[e.data.SettiongsModel[i].CursorName][a]})},module_settings:function(){return},module_details:function(e){{if(s.companyId||"super user"==s.role||"Super User"==s.role){s.companyId&&s.companyId;return a.getEntities(i.admincommonRemoteServer+"GetModuleMasterAndDetails?moduleName="+e.toUpperCase()[0]+e.slice(1))}return o.promise}},module_links:function(e){var a=angular.copy(e.ModuleDetails);s.moduleActionsObj=u(angular.copy(e));for(var i='<div id="navigation"> <div ng-if="vm.moduleactionFlag" class="loadersmall"></div> <ul side-navigation class="nav sidemenu-wrapper" id="side-menu">',t=[],r=0;r<a.length;r++)a[r].GroupName&&-1==t.indexOf(a[r].GroupName)&&(a[r].IsGroupSubscribe||"admin"!=s.role)?(t.push(a[r].GroupName),i+=d(a[r],a)):a[r].GroupName||(i+=c(a[r]));return i+"</ul></div>"},is_loader:function(){return'<div id="navigation"><ul><li><div class="loadersmall"></div></li></ul></div>'},check_list:function(){return a.getEntities((i.initialsetupRemoteServer?i.initialsetupRemoteServer:i.admincommonRemoteServer)+"getcursorsettings?CursorName="+app_configuration.app_config.current_module)},group_module_details:u};function u(e){var a=[];for(var i in e.ModuleDetails)if(e.ModuleDetails[i].GroupName){var t=!1;for(var r in a)a[r].GroupName==e.ModuleDetails[i].GroupName&&(t=!0,a[r].MasterUrl=a[r].MasterUrl?a[r].MasterUrl:e.ModuleDetails[i].MasterUrl,a[r].CssSprite=a[r].CssSprite?a[r].CssSprite:e.ModuleDetails[i].CssSprite,a[r].List.push(e.ModuleDetails[i]));if(!t){var s={GroupName:e.ModuleDetails[i].GroupName,List:[],MasterUrl:e.ModuleDetails[i].MasterUrl,CssSprite:e.ModuleDetails[i].CssSprite};s.List.push(e.ModuleDetails[i]),a.push(s)}}else a.push(e.ModuleDetails[i]);return a}function d(a,e){var i={GroupName:a.GroupName,MasterUrl:a.MasterUrl,CssSprite:a.CssSprite,Url:a.Url,List:[]};i.List=e.filter(function(e){return e.GroupName==a.GroupName});for(var t='<li ng-class="{active:$state.includes('+i.MasterUrl+')}"><a ui-sref="'+i.MasterUrl+'" data-toggle="collapse" data-target="'+i.GroupName+'"><i class="'+i.CssSprite+'"></i><span class="nav-label">'+i.GroupName+'</span><span class="fa arrow"></span> </a><ul class="nav nav-second-level" id="'+i.GroupName+'">',r=0;r<i.List.length;r++)i.List[r].Url=i.List[r].Url.replace(/"/g,"'"),i.List[r].ParentId||(t=-1==i.List[r].Url.indexOf(".reports")?t+'<li ui-sref-active="active" ng-click="setModuleDetailId('+i.List[r].Id+","+i.List[r].IsBot+","+i.List[r].IsAnalytics+')"><a ui-sref="'+i.List[r].Url+'">'+i.List[r].Heading+"</a></li>":t+'<li ui-sref-active="active" ng-click="setModuleDetailId('+i.List[r].Id+","+i.List[r].IsBot+","+i.List[r].IsAnalytics+", '"+i.List[r].Url+'\')"><a ui-sref="'+i.List[r].Url+'">'+i.List[r].Heading+"</a></li>");return t+"</ul></li>"}function c(e){var a="";return e.Url=e.Url.replace(/"/g,"'"),e.ParentId||"support"==e.Heading.toLowerCase()||(a=-1==e.Url.indexOf(".reports")?a+'<li ui-sref-active="active" ng-click="setModuleDetailId('+e.Id+","+e.IsBot+","+e.IsAnalytics+')"><a ui-sref="'+e.Url+'"><i class="'+e.FontAwesome+'"></i><span>'+e.Heading+"</span></a></li>":a+'<li ui-sref-active="active" ng-click="setModuleDetailId('+e.Id+","+e.IsBot+","+e.IsAnalytics+",'"+e.Url+'\')"><a ui-sref="'+e.Url+'"><i class="'+e.FontAwesome+'"></i><span>'+e.Heading+"</span></a></li>"),e.ParentId||"support"!=e.Heading.toLowerCase()||(a=-1==e.Url.indexOf(".reports")?a+'<li ui-sref-active="active" ng-click="setModuleDetailId('+e.Id+","+e.IsBot+","+e.IsAnalytics+')"><a target="_blank" href="'+app_configuration.app_config.module_linking.support+'"><i class="fa fa-life-ring"></i><span>'+e.Heading+"</span></a></li>":a+'<li ui-sref-active="active" ng-click="setModuleDetailId('+e.Id+","+e.IsBot+","+e.IsAnalytics+",'"+e.Url+'\')"><a target="_blank" href="'+app_configuration.app_config.module_linking.support+'"><i class="fa fa-life-ring"></i><span>'+e.Heading+"</span></a></li>"),a}}angular.module("appsworld").value("modulesettings",{}).value("companysettings",{}).filter("breadcrumbFilter",["config",function(i){return function(e){if(e){if("string"==typeof e)var a=e;else a=e.ConfigVariable?"displayLabel"==e.ConfigVariable?i.formDisplayLable?i.formDisplayLable:i[e.ConfigVariable]?i[e.ConfigVariable]:e.Title:"displayLabel1"==e.ConfigVariable?i.formDisplayLable1?i.formDisplayLable1:i[e.ConfigVariable]?i[e.ConfigVariable]:e.Title:"displayLabel2"==e.ConfigVariable?i.formDisplayLable2?i.formDisplayLable2:i[e.ConfigVariable]?i[e.ConfigVariable]:e.Title:e.Title:e.Title;return a.substr(0,19)+(20<a.length?"...":"")}return""}}]).directive("defaultSelection",function(){return{restrict:"A",scope:{dataSource:"="},link:function(e,a,i){$(i)[0].$$element[0]}}}).factory("framework",e),e.$inject=["config","modulesettings","companysettings","commonService","serviceConfig","$q"]}();
!function(){"use strict";function e(e,t){return{restrict:"A",scope:{permissionKey:"=",delay:"=",tabName:"="},link:function(s,r,e){var n=s.tabName,o=null;function i(){t.load_tab_permissions(s.permissionKey).then(function(e){o=e[n],function(){function e(e){for(var n=$(r).find("#tab_"+e),i=0;i<n.length;i++)n[i].hidden=!0}function n(){o.Add||e("Add"),o.Edit||e("Edit"),o.Disable||e("Disable"),o.Delete||e("Delete")}var i=$(r).find(":input");if(o)if(o.View)if(o.Edit||o.Add)n();else{for(var t=0;t<i.length;t++)"submit"==i[t].type||"reset"==i[t].type||(i[t].disabled=!0);n()}else $(document).find("#"+s.tabName).hide(!0),$(r)[0].innerHTML="<h4 class='text-align'>You don't have sufficient permissions to view this content</h4>"}()})}s.delay?setTimeout(function(){i()},parseInt(s.delay)):i()}}}function n(e,r){return{restrict:"C",scope:{parentPermissionKey:"="},link:function(e,n,i){var t=null,s=[];e.$watch("parentPermissionKey",function(e){e&&function(e){r.load_tab_permissions(e).then(function(e){for(var n in t=e)t[n].View||s.push(n);setTimeout(function(){for(var e=0;e<s.length;e++)0<$(document).find("#"+s[e]).length&&$(document).find("#"+s[e]).hide(!0)},100)})}(e)})}}}angular.module("appsworld").directive("tabPermissions",e).directive("parentTabPer",n),e.$inject=["framework","users_permissions"],n.$inject=["framework","users_permissions"]}();
!function(){"use strict";function e(a){return{restrict:"E",template:'<div style="overflow:auto;" id="z-autocomplete"><input type="text" ng-model="value" class="form-control " ng-change="selectedValue=null"  ng-keyup="expandAria=true;selectedValue=null"/><ul id="zautoComplete" ng-show="expandAria" style="background-color: white;padding: 1px 12px 5px 13px;overflow-y: auto;max-height: 170px;"><li class="liauto" style="cursor:pointer;padding-top:7px;" ng-repeat="item in items|filter:value" ng-click="itemSelected(item)">{{load_li_value(item)}}</li></ul></div>',scope:{textField:"=",valueField:"=",selectedValue:"=",data:"=",selectedItem:"=",change:"&"},link:function(t,e,l){function i(){if(t.selectedValue){var e=t.items.filter(function(e){return"string"==typeof e?e==t.selectedValue:e[t.valueField]==t.selectedItem})[0];t.value="string"==typeof e?e:e[t.textField]}}t.expandAria=!1,t.items=[],t.load_li_value=function(e){return"object"==typeof e?e[t.textField]:e},"object"==typeof t.data?(t.items=t.data,i()):"string"==typeof t.data&&a.get(t.data).then(function(e){t.items=e.data,i()}),t.itemSelected=function(e){e&&(t.value="object"==typeof e?e[t.textField]:e,t.selectedValue="object"==typeof e?e[t.valueField]:e,t.selectedItem=e,t.change({selectedObject:e})),t.expandAria=!1},$(window).click(function(e){t.expandAria&&t.$apply(function(){t.expandAria=!1})}),$("#zautoComplete").click(function(e){e.stopPropagation()})}}}angular.module("zControls",[]).directive("zAutoComplete",e),e.$inject=["$http"]}();
!function(){"use strict";function e(i,l,d,s,u){return{restrict:"A",scope:{moduleName:"="},link:function(t,a,e){t.$state=l;var o=!1,n=angular.copy(t.moduleName);if("Admin"==t.moduleName)switch(s.role){case"Super User":n="Super User";break;case"Super Admin":n="Super Admin";break;default:n=t.moduleName}i.module_details(n).then(function(e){new Date,s.module_details=e.data,a.html(i.module_links(e.data)),d(a.contents())(t),o=!0,s.IndividualModuleDetails=!0,e.data.ModuleDetails[0]&&e.data.ModuleDetails[0].Heading.toLocaleLowerCase()==app_configuration.app_config.current_module+" cursor".toLocaleLowerCase()&&u.setItem("Dash_Id",e.data.ModuleDetails[0].Id)},function(e){a.html("<p>Something went wrong. Please try after some time</p>"),d(a.contents())(t)}),o||(a.html(i.is_loader()),d(a.contents())(t)),t.setModuleDetailId=function(e,t,a,o){l.current.name==o&&l.reload(o),u.setItem("ModuleDetailId",e),u.setItem("MenuModuleDetailId",e),u.setItem("isBot",t),u.setItem("isAnalytics",a),u.setSessionItem("ModuleDetailId",e)}}}}angular.module("appsworld").directive("navigationBar",e),e.$inject=["framework","$state","$compile","config","zStorageEnc"]}();
!function(){"use strict";function t(t,a,o){return{restrict:"E",templateUrl:"framework/gstReporting/gstreporting.html",scope:{showExRate:"=",showDateRanges:"=",disableExRate:"=",disableDateRanges:"=",gstReporting:"=",items:"=",cursor:"=?"},link:function(T,t,a){function o(t){function a(a){return t.filter(function(t){return t.ApplicableTaxCode==a})}for(var o=[],e=0;e<=t.length-1;e++)-1==o.indexOf(t[e].ApplicableTaxCode)&&o.push(t[e].ApplicableTaxCode);var n=[];for(e=0;e<=o.length-1;e++){for(var s={TaxCode:o[e],Amount:0,Tax:0,TaxAmount:0,Total:0},r=a(o[e]),l=0;l<=r.length-1;l++)r[l].InvoiceFee||(r[l].InvoiceFee=0),s.Amount=parseFloat(s.Amount)+parseFloat(r[l].InvoiceFee),s.Amount=parseFloat(Math.round(100*s.Amount)/100).toFixed(4),r[l].Tax||(r[l].Tax=0),s.TaxAmount=parseFloat(s.TaxAmount)+parseFloat(r[l].TaxAmount),s.TaxAmount=parseFloat(Math.round(1e3*s.TaxAmount)/1e3).toFixed(4),s.Tax=r[l].Tax;s.Amount=(parseFloat(s.Amount)*parseFloat(T.gstReporting.GSTExchangeRate?T.gstReporting.GSTExchangeRate:1)).toFixed(2),s.TaxAmount=parseFloat(Math.round(parseFloat(s.TaxAmount)*parseFloat(T.gstReporting.GSTExchangeRate?T.gstReporting.GSTExchangeRate:1)*1e3)/1e3).toFixed(4),s.Total=parseFloat(Math.round(1e3*(parseFloat(s.Amount)+parseFloat(s.TaxAmount)))/1e3).toFixed(4),n.push(s)}T.gstTotals={TotalAmount:0,TotalTaxAmount:0,GrandTotal:0,totaltax:0};for(var g=0;g<=n.length-1;g++)T.cursor&&"Workflow"==T.cursor?(T.gstTotals.TotalAmount=T.gstTotals.TotalAmount+parseFloat(parseFloat(Math.round(100*parseFloat(n[g].Amount))/100).toFixed(2)),n[g].Tax&&(T.gstTotals.totaltax=T.gstTotals.totaltax+parseFloat(parseFloat(Math.round(100*parseFloat(n[g].Tax))/100).toFixed(2))),T.gstTotals.TotalTaxAmount=T.gstTotals.TotalTaxAmount+parseFloat(parseFloat(Math.round(100*parseFloat(n[g].TaxAmount))/100).toFixed(2)),T.gstTotals.GrandTotal=T.gstTotals.GrandTotal+parseFloat(parseFloat(Math.round(100*parseFloat(n[g].Total))/100).toFixed(2))):(T.gstTotals.TotalAmount=T.gstTotals.TotalAmount+parseFloat(n[g].Amount),n[g].Tax&&(T.gstTotals.totaltax=T.gstTotals.totaltax+parseFloat(n[g].Tax)),T.gstTotals.TotalTaxAmount=T.gstTotals.TotalTaxAmount+parseFloat(n[g].TaxAmount),T.gstTotals.GrandTotal=T.gstTotals.GrandTotal+parseFloat(n[g].Total));return n}T.items=T.items?T.items:[],T.$on("refresh_gst_reporting",function(t,a){T.gstReportingSource=o(a)}),T.gstReportingSource=o(T.items),T.exRateChange=function(){T.gstReportingSource=o(T.items)},T.decimalsAdding=function(){T.gstReporting.GSTExchangeRate=T.gstReporting.GSTExchangeRate?parseFloat(T.gstReporting.GSTExchangeRate).toFixed(10):T.gstReporting.GSTExchangeRate}}}}function a(t,a,o){return{}}angular.module("appsworld").directive("gstReporting",t).factory("gstReportingContext",a),t.$inject=["gstReportingContext","companysettings","$http"],a.$inject=["commonService","serviceConfig","config"]}();
!function(){"use strict";angular.module("appsworld").directive("downloadFile",["serviceConfig",function(o){return{restrict:"A",scope:{fileId:"="},link:function(i,n,e){$(n).bind("click",function(){window.open(o.docnewServer+"getmongodbfile?id="+i.fileId,"_blank")})}}}])}();
!function(){"use strict";function n(){var n={isEmptyRow:function(t,n){var r=0;return angular.forEach(n,function(n){t[n.name]||r++}),r===n.length}};return n}angular.module("z.grids",[]).factory("zGridsContext",n),n.$inject=[]}();
!function(){"use strict";angular.module("z.grids").directive("zGrids",["zGridsContext",function(d){return{restrict:"E",templateUrl:"CustomDirectives/zGrids/zgrid.html",scope:{options:"=",data:"="},link:function(i,t,e){var n;i.selected_record=function(t){n=t},i.td_content=function(t,i){return t?i.type:"display"},i.row_td=function(t){return d.isEmptyRow(t,i.options.fields)?"editable_td":n==i.data.indexOf(t)?"editable_td":"display_td"}}}}])}();
!function(){"use strict";function e(){var e=this;e.say=function(e){alert(e)},e.gridOptions={isActionsRequired:!0,editableType:"inline",actions:[{name:"Add",icon:"add-icon tool-icons",method:"Add"},{name:"Edit",icon:"edit-icon tool-icons",method:"Edit"},{name:"Delete",icon:"delete-icon tool-icons",method:"Delete"}],fields:[{name:"Name",title:"Name",type:"text"},{name:"Age",title:"Age",type:"text"},{name:"Gender",title:"Gender",type:"select",data:[{name:"Male",code:"M"},{name:"Female",code:"F"}],valueField:"code",textField:"name"},{name:"Email",title:"Email",type:"text"}]},e.data=[{Name:"SubbaReddy",Gender:"M",Email:"subbareddy@ziraff.in",Age:24},{Name:"Anduri",Gender:"M",Email:"subbareddy@ziraff.in",Age:24},{Name:"Venkata",Gender:"M",Email:"subbareddy@ziraff.in",Age:24},{Name:null,Gender:null,Email:null,Age:null}]}angular.module("z.grids").controller("zgridDemoController",e),e.$inject=[]}();
!function(){function e(e){var r={sheduler_options:function(){return{date:new Date("2013/6/13"),startTime:new Date("2013/6/13 07:00 AM"),allDaySlot:!1,views:["day","week","month"],dataSource:{batch:!0,transport:{read:{url:"//demos.telerik.com/kendo-ui/service/tasks",dataType:"jsonp"},update:{url:"//demos.telerik.com/kendo-ui/service/tasks/update",dataType:"jsonp"},create:{url:"//demos.telerik.com/kendo-ui/service/tasks/create",dataType:"jsonp"},destroy:{url:"//demos.telerik.com/kendo-ui/service/tasks/destroy",dataType:"jsonp"},parameterMap:function(e,r){if("read"!==r&&e.models)return{models:kendo.stringify(e.models)}}},schema:{model:{id:"taskId",fields:{taskId:{from:"TaskID",type:"number"},title:{from:"Title",defaultValue:"No title",validation:{required:!0}},start:{type:"date",from:"Start"},end:{type:"date",from:"End"},startTimezone:{from:"StartTimezone"},endTimezone:{from:"EndTimezone"},description:{from:"Description"},recurrenceId:{from:"RecurrenceID"},recurrenceRule:{from:"RecurrenceRule"},recurrenceException:{from:"RecurrenceException"},ownerId:{from:"OwnerID",defaultValue:1},isAllDay:{type:"boolean",from:"IsAllDay"}}}},filter:{logic:"or",filters:[{field:"ownerId",operator:"eq",value:1},{field:"ownerId",operator:"eq",value:2}]}},resources:[{field:"ownerId",title:"Owner",dataSource:[{text:"Alex",value:1,color:"#f8a398"},{text:"Bob",value:2,color:"#51a0ed"},{text:"Charlie",value:3,color:"#56ca85"}]}]}}};return r}angular.module("appsworld").factory("shedulerContext",e),e.$inject=["$http"]}();
!function(){"use strict";function e(e){this.shedulerOptions={startTime:new Date,endTime:new Date,allDaySlot:!1,showWorkHours:!1}}angular.module("appsworld").controller("shedulerController",e),e.$inject=["shedulerContext"]}();
!function(){"use strict";function e(t,o,e,r){var a;return-1!=r.current.name.indexOf("client")?a="CC":-1!=r.current.name.indexOf("workflow")?a="WF":-1!=r.current.name.indexOf("bean")?a="BC":-1!=r.current.name.indexOf("hr")&&(a="HR"),{getTabs:function(e){var r=t.adminReportRemoteServer+"gettabnames?moduleName="+a+"&type="+e;return o.getEntities(r)},getReports:function(){var e=t.adminReportRemoteServer+"getreports?moduleName="+a+"&tabNames=";return o.getEntities(e)},ReportsByTab:function(e,r){{if("All Reports"==r||"All DashBoards"==r){var t=[],o=[],a=[{ReportVms:[],DashBoardVms:[]}];if(e){for(var n=0;n<=e.reportCategory.length-1;n++)if(-1==t.indexOf(e.reportCategory[n].Name)){t.push(e.reportCategory[n].Name);for(var s=0;s<=e.reportCategory[n].ReportVms.length-1;s++)a[0].ReportVms.push(e.reportCategory[n].ReportVms[s])}a.ReportVms=a[0].ReportVms;for(var m=0;m<=e.dashboardCategory.length-1;m++)if(-1==o.indexOf(e.dashboardCategory[m].Name)){o.push(e.dashboardCategory[m].Name);for(var i=0;i<=e.dashboardCategory[m].DashBoardVms.length-1;i++)a[0].DashBoardVms.push(e.dashboardCategory[m].DashBoardVms[i])}}return a.DashBoardVms=a[0].DashBoardVms,a}var d=[{ReportVms:[]},{DashBoardVms:[]}];return e.reportCategory.filter(function(e){-1!=e.TabNames.indexOf(r)&&(d.ReportVms=e.ReportVms.filter(function(e){return e}))}),e.dashboardCategory.filter(function(e){-1!=e.TabNames.indexOf(r)&&(d.DashBoardVms=e.DashBoardVms.filter(function(e){return e}))}),d}},getReportById:function(e,r){return o.getEntities(t.adminReportRemoteServer+"getserverreport?reportId="+e+"&type="+r)},ReportsBySingleTab:function(e){for(var r=[{ReportVms:[]}],t=0;t<=e.length-1;t++)0==e[t].ReportVms.length?delete e[t]:r[0].ReportVms=e[t].ReportVms;return r}}}angular.module("reports",[]).factory("reportsContext",e),e.$inject=["serviceConfig","commonService","config","$state"]}();
!function(){"use strict";function t(o,t,e,n,s,r){var a,p=this;function i(t){for(var e=0;e<p.tabs.length;e++)p.tabObj[p.tabs[e]]=e===t}p.gotoiframe=function(t,r){var a;p.reportName==t.Name?p.reportName=t.Name+" ":p.reportName=t.Name;document.getElementsByTagName("reportbtn")[0].innerHTML='&nbsp;<button type="btn" id="reportview" ng-if="newVal.reportButton" class="report-btn btn btn-primary pull-right"><i class="back-icon"></i>Back</button>',o.getReportById(t.Id,r).then(function(t){if(p.data=t.data,"Report"===r)p.isReport=!0,a=s.dashboardserver+"report?ReportName="+t.data.ReportName+"&ReportPath="+t.data.ReportPath+"&CompanyId="+n.companyId,document.getElementById("report").setAttribute("src",a);else if(p.isReport=!0,"PowerBI"===p.data.PathType){p.powerBiClass=p.data.PathType,a=s.powerbiserver+p.data.ReportPath+"/"+p.data.ReportName+" ?rs:Embed=true&filter=Query1/TenantId eq %27"+n.TenantId+"%27";var e=new XMLHttpRequest;e.open("GET",a,!0,"smartcursors","Precursor@456"),e.send(),document.getElementById("report").setAttribute("src",a)}else a=s.reportsServer+p.data.ReportName+"?"+p.data.ReportName.replace(/\s+/g,"")+".@TenantId="+n.TenantId+"&rs:Embed=true"})},p.reportsTabClick=function(t,e){p.tabActivation=t,i(e),p.reports=o.ReportsByTab(p.totalReports,t)},p.getimgurl=function(t){return t},p.tabObj={},p.isReport=!1,p.type="client.dashboards"===e.current.name?"DashBoard":"Report",o.getTabs(p.type).then(function(t){p.tabs=t.data,o.getReports("").then(function(t){p.totalReports=t.data,p.tabActivation=p.tabs[0],i(0),p.reports=o.ReportsByTab(t.data,a||p.tabs[0])})}),r.$on("reportbtn",function(t,e){document.getElementsByTagName("reportbtn")[0].innerHTML=null,document.getElementsByTagName("screentitle")[0].innerHTML=null,p.isReport=!p.isReport})}angular.module("reports").controller("reportsController",t),t.$inject=["reportsContext","formValidate","$state","config","serviceConfig","$scope"]}();
!function(){"use strict";function t(i,o,a){return{load_data:function(t){return i.getEntities(t)},date_pickers:function(t){for(var e={},n=t.filter(function(t){return"date"==t.type}),r=0;r<=n.length-1;r++)e[n[r].name]=!1;return e},save_item:function(t,e,n){for(var r in t)e[r]=t[r];e.Status=o.Id||"new"==o.id?"Active":e.Status,e.CompanyId=a.companyId,o.Id||"new"==o.id?(e.CreatedDate=new Date,e.UserCreated=a.userFullName):(e.ModifiedDate=new Date,e.ModifiedBy=a.userFullName);return i.saveEntity(n,e)},isExisitingItem:function(t,r){var i={isExist:!1,idx:null};return t.filter(function(t,e,n){t.Id==r.Id&&(i.isExist=!0,i.idx=e)}),i},set_save_defaults:function(t,e){if(t)for(var n=0;n<=t.length-1;n++)for(var r in e)t[n][r]=e[r];return t},set_ds:function(t,e,n){for(var r=0;r<e.length;r++)e[r].name==t&&(e[r].options.ds=n);return e}}}angular.module("autoform",[]).factory("autoformDataContext",t).directive("toString",[function(){return{restrict:"A",require:"ngModel",scope:{ngModel:"="},link:function(e,t,n,r){"number"==typeof r.$modelValue&&e.$watch(function(){return e.ngModel},function(t){t&&(e.ngModel=e.ngModel.toString())})}}}]),t.$inject=["commonService","$stateParams","config"]}();
!function(){"use strict";function autoform($window,autoformDataContext,formValidate,$state,config,commonService,$templateCache,$stateParams,companysettings,modulesettings){var directive={link:link,templateUrl:"autoform/autoform.html",scope:{options:"=",ddlchange:"&",popSave:"&",popCancel:"&",cancel:"&",data:"=",validate:"=",validateFields:"&",inputChange:"&",clickEventHandlers:"&"},restrict:"E"};return directive;function link(scope,element,attrs){function activate(){scope.options?"string"==typeof scope.options.lookups?autoformDataContext.load_data(scope.options.lookups).then(function(e){scope.look_up_source=e.data,set_dataitem()}):(scope.look_up_source=scope.options.lookups,set_dataitem()):setTimeout(function(){activate()},100)}function set_date_fields(e){for(var t=scope.options.fields.filter(function(e){return"date"==e.type}),o=0;o<t.length;o++)e[t[o].name]=e[t[o].name]?new Date(e[t[o].name]):null;if("Receipt"===e.DocType||"Payment"===e.DocType)for(var a=0;a<=e.DocumentDetailModels.length-1;a++)e.DocumentDetailModels[a].DocType&&e.DocumentDetailModels[a].OffsetDocument&&e.DocumentDetailModels[a].DocumentDate&&e.DocumentDetailModels[a].DocNo||(e.DocumentDetailModels[a].DocType=null,e.DocumentDetailModels[a].OffsetDocument=null,e.DocumentDetailModels[a].DocumentDate=null,e.DocumentDetailModels[a].DocNo=null);return e}function set_dataitem(){"string"==typeof scope.options.dataItem?autoformDataContext.load_data(scope.options.dataItem).then(function(e){scope.dataItem=set_date_fields(e.data),scope.data=scope.dataItem,scope.options.isdetail&&(scope.options.detailOptions.dataSource=e.data[scope.options.detailsource],$stateParams.isMBMF=scope.dataItem.IsMBMF)}):(scope.dataItem=scope.options.dataItem?set_date_fields(scope.options.dataItem):{},scope.data=scope.dataItem)}scope.validationMessages=[],scope.dataItem={},activate(),scope.clickEvent=function(e,t){scope.clickEventHandlers({type:e,data:t})},scope.load_template=function(e){return e.template?($templateCache.put("myDynamicTemplate_input_"+e.name,e.template),"myDynamicTemplate_input_"+e.name):e.type},scope.input_change=function(e,t){scope.inputChange({fieldname:e,value:t})},scope.load_class=function(e){switch(scope.options.displaycolumns){case 1:return e.Class?e.Class:"col-md-12 col-sm-12 col-xs-12";case 2:return e.Class?e.Class:"col-md-6 col-sm-6 col-xs-12";case 3:return e.Class?e.Class:"col-md-4 col-sm-6 col-xs-12";case 4:default:return e.Class?e.Class:"col-md-3 col-sm-6 col-xs-12"}},scope.load_inputcontrol_class=function(e){return e.clases?e.clases:""},scope.save_item=function(){if(scope.validationMessages=[],formValidate.validate(scope.options.formname).isValidationRequired)scope.validationMessages.push({Message:"Invalid data please verify!"});else{if(scope.validate&&0!=scope.validateFields().messages.length)return void(scope.validationMessages=scope.validateFields().messages);if("server"==scope.options.savetype){scope.options.isdetail&&(scope.dataItem[scope.options.detailsource]=autoformDataContext.set_save_defaults(scope.options.detailOptions.dataSource,scope.options.detailOptions.saveDefaults)),scope.dataItem.EffectiveFrom&&(scope.dataItem.EffectiveFrom=commonService.incrementDateFormat(scope.dataItem.EffectiveFrom));var e=autoformDataContext.save_item(scope.options.saveDefaults,scope.dataItem,scope.options.saveUrl);e.then(function(){commonService.notify.success("Saved data"),scope.options.ispopup?scope.popSave({dataItem:scope.dataItem}):scope.options.state&&$state.go(scope.options.state)}),e.error(function(e){scope.data.EffectiveFrom=scope.data.EffectiveFrom?new Date(scope.data.EffectiveFrom):null,scope.validationMessages.push({Message:e.Message})})}else"local"==scope.options.savetype&&scope.options.ispopup&&scope.popSave({dataItem:scope.dataItem})}},scope.cancel_item=function(){scope.cancel(),scope.options.ispopup?scope.popCancel():scope.options.state&&$state.go(scope.options.state)},scope.hide_field=function(item,dataItem,griditem){return"OpeningBalnceBaseDebit"===item.hidden&&(item.hidden=!companysettings.MultiCurrency),"OpeningBalnceBaseCredit"===item.hidden&&(item.hidden=!companysettings.MultiCurrency),"SegmentCategory"===item.hidden&&(item.hidden=!modulesettings.BeanCursor.IsSegmentActivate),"SegmentCategory"===item.hidden&&(item.hidden=!modulesettings.BeanCursor.IsSegmentActivate),!eval(item.hidden)},scope.ddl_change=function(e){scope.ddlchange({item:e,selected_value:scope.dataItem[e.name]})},scope.load_ddl_source=function(item){return scope.look_up_source?"."==item.options.ds?scope.look_up_source:""==item.options.ds?[]:"object"==typeof item.options.ds?item.options.ds:eval("scope.look_up_source."+item.options.ds)?eval("scope.look_up_source."+item.options.ds):[]:item.options.ds&&""!=item.options.ds?item.options.ds:[]},scope.load_grid_td=function(e){return e.td_template?($templateCache.put("myDynamicTemplate_"+e.name,e.td_template),"myDynamicTemplate_"+e.name):"td_display"},scope.load_input_label_dp=function(e){return e.template?($templateCache.put("myDynamicTemplate_label_"+e.name,e.template),"myDynamicTemplate_label_"+e.name):"input_label_dp"},scope.dateFormat=config.dateFormat,scope.datePickers=autoformDataContext.date_pickers(scope.options.fields),scope.dateOptions={format:config.dateFormat,class:"datepicker",showWeeks:!1},scope.openDatePicker=function(e,t){e.preventDefault(),e.stopPropagation(),scope.datePickers[t]=1!=scope.datePickers[t]}}}angular.module("autoform").directive("autoform",autoform).directive("autoformdate",[function(){return{restrict:"A",require:"ngModel",scope:{},link:function(e,t,o,a){a.$modelValue=a.$modelValue?new Date($modelValue):null,e.ngModel=a.$modelValue}}}]),autoform.$inject=["$window","autoformDataContext","formValidate","$state","config","commonService","$templateCache","$stateParams","companysettings","modulesettings"]}();
!function(){"use strict";function t(e,t,o){var i=this;t.options.dataItem="Add"==t.type?{}:t.options.dataItem,i.formOptions=t.options,i.save=function(t){e.close(t)},i.cancel=function(){e.dismiss()},i.ddlchange=function(t,e){},i.validate=function(){return{messages:[]}}}function e(a,l,s,c){return{restrict:"E",templateUrl:"autoform/detailfrom.html",scope:{detailitem:"=",options:"="},link:function(n,t,e){function o(t){s.open({templateUrl:"autoform/popup.html",controller:n.options.controller||"detailFormController",controllerAs:"vm",size:"lg",resolve:{options:function(){return{options:n.options,type:t}}}}).result.then(function(t){i(t)})}function i(t){if(n.options.dataSource=n.options.dataSource?n.options.dataSource:[],"server"==n.options.savetype);else{var e=l.isExisitingItem(n.options.dataSource,t);e.isExist?(e.isExist&&"Added"==t.RecordStatus||(t.RecordStatus="Modified"),n.options.dataSource[e.idx]=t):(t.RecordStatus="Added",n.options.dataSource.push(t)),"popup"!=n.options.actiontype&&(n.show_detail=!1),a.notify.success("Saved data"),n.detailselection=[]}}n.show_detail=!1,n.detailselection=[],n.add_detail=function(){"popup"==n.options.actiontype?o("Add"):n.show_detail=!0},n.edit_detail=function(){0==n.detailselection.length||1<n.detailselection.length?a.notify.warning("Please select one record"):(n.options.dataItem=n.detailselection[0],"popup"==n.options.actiontype?o("Edit"):n.show_detail=!0)},n.delete_detail=function(){0==n.detailselection.length||1<n.detailselection.length?a.notify.warning("Please select one record"):a.confirmationDialog("Confirm Delete ?","Are you sure do you really want to Delete ?","Ok","Cancel").then(function(t){if("ok"==t){var e=n.options.dataSource.indexOf(n.detailselection[0]);"Added"!=n.options.dataSource[e].RecordStatus?n.options.dataSource[e].RecordStatus="Deleted":n.options.dataSource.splice(e,1),n.detailselection=[]}})},n.disable_detail=function(){if(0==n.detailselection.length||1<n.detailselection.length)a.notify.warning("Please select one record");else{var e=n.options.dataSource.indexOf(n.detailselection[0]),t="Active"==n.options.dataSource[e].Status?"Inactive":"Active",o="Confirm "+t+" ?",i="Are you sure do you really want to "+t+" ?";a.confirmationDialog(o,i,"Ok","Cancel").then(function(t){"ok"==t&&(n.options.dataSource[e].Status="Active"==n.options.dataSource[e].Status?"Inactive":"Active",n.detailselection=[])})}},n.load_td_template=function(t){return t.td_template?(c.put("myDynamicTemplate_grid_"+t.name,t.td_template),"myDynamicTemplate_grid_"+t.name):"basic_td_dplay"},n.save=i,n.cancel=function(){n.show_detail=!1},n.detailitem=n.detailitem?n.detailitem:{},n.toggleDetailSelection=function(t){var e=n.detailselection.indexOf(t);-1<e?n.detailselection.splice(e,1):n.detailselection.push(t)}}}}angular.module("autoform").directive("detailForm",e).controller("detailFormController",t),t.$inject=["$uibModalInstance","options","$scope"],e.$inject=["commonService","autoformDataContext","$uibModal","$templateCache"]}();
!function(){"use strict";function e(e,a,n){var r="new"==a.Id?"00000000-0000-0000-0000-000000000000":a.Id;return{campaign:{saveUrl:e.clientCursorClientRemoteServerapi+"/SaveCampaign",lookups:e.clientCursorClientRemoteServerapi+"/GetCampaign?companyId="+n.companyId+"&campaignId="+r,saveDefaults:{}}}}angular.module("appsworld").factory("formurlsContext",e),e.$inject=["serviceConfig","$stateParams","config"]}();
!function(){"use strict";function t(t,e,a,r){var s=this;t.getEntities(e.current.data.jsonpath+".json").success(function(t){t.saveUrl=r[e.current.data.file].saveUrl,t.lookups=r[e.current.data.file].lookups,t.saveDefaults=r[e.current.data.file].saveDefaults,s.options=t})}angular.module("appsworld").controller("masterformController",t),t.$inject=["commonService","$state","$stateParams","formurlsContext"]}();
!function(){"use strict";function o(o){this.title="dashboardController"}angular.module("appsworld").controller("dashboardController",o),o.$inject=["$location"]}();
!function(){"use strict";function e(o,a,e,n){var r;return{getlookups:function(e){var t=o.masterRemoteServer+"lookupcall?employeeId="+e;return a.getEntities(t)},createEmployeeDetails:function(e){e="new"==e?a.guid():e,r=e;var t=o.masterRemoteServer+"CreateEmployee?employeeId="+e;return a.getEntities(t)},getEmployment:function(){var e=o.masterRemoteServer+"lookupdepartmentLevels";return a.getEntities(e)},createEmployment:function(e){if("new"==e){e=a.guid();a.guid()}var t=o.masterRemoteServer+"createemployment?employeeId="+e;return a.getEntities(t)},saveEmployeeDetails:function(e,t,i){var r=angular.copy(e);r.EmploymentStartDate=r.EmploymentStartDate?moment(r.EmploymentStartDate).format("YYYY-MM-DDT00:00:00"):null,angular.forEach(r.EmployeeDepartmentModel?r.EmployeeDepartmentModel:[],function(e,t){r.EmployeeDepartmentModel[t].EffectiveFrom=r.EmployeeDepartmentModel[t].EffectiveFrom?moment(r.EmployeeDepartmentModel[t].EffectiveFrom).format("YYYY-MM-DDT00:00:00"):null,r.EmployeeDepartmentModel[t].EndDate=r.EmployeeDepartmentModel[t].EndDate?moment(r.EmployeeDepartmentModel[t].EndDate).format("YYYY-MM-DDT00:00:00"):null}),r.UserName=null;var n=o.masterRemoteServer+"SaveEmployee";return a.saveEntity(n,r,t,i,{UserName:e.UserName})},saveEmployment:function(i){angular.forEach(i||[],function(e,t){i[t].EffectiveFrom=i[t].EffectiveFrom?moment(i[t].EffectiveFrom).format("YYYY-MM-DDT00:00:00"):null,i[t].EndDate=i[t].EndDate?moment(i[t].EndDate).format("YYYY-MM-DDT00:00:00"):null});var e=o.masterRemoteServer+"saveemployment";return a.saveEntity(e,i)},getServiceGroup:function(e){var t=o.masterRemoteServer+"servicegrouplookup?employeeId="+e;return a.getEntities(t)},createServiceGroup:function(e){var t=o.masterRemoteServer+"createservicegroup?employeeId="+e;return a.getEntities(t)},saveServiceGroup:function(e){var t=o.masterRemoteServer+"saveservicegroup";return a.saveEntity(t,e)},prev_tabs:function(e){return{employeeDetalis:!0!==e,employment:!0===e,serviceGroups:!1}},departmentGridOptions:function(e,t,i,r,n,o){return{formName:"Department",fields:[{Name:"CompanyId",title:"Company Name",lblDisplay:"CompanyName",inputControl:"select",inputControlOptions:{isDisabled:o,isVisible:!0,data:e,valueProperty:"Id",textProperty:"Name"},isEditable:!1,Class:"mand",validationtype:"required"},{Name:"DepartmentId",title:"Department",lblDisplay:"DepartmentName",inputControl:"select",inputControlOptions:{isDisabled:o,isVisible:!0,data:t,valueProperty:"Id",textProperty:"Name"},isEditable:!1,Class:"mand",validationtype:"required"},{Name:"DepartmentDesignationId",title:"Designation",lblDisplay:"DesignationName",inputControl:"select",inputControlOptions:{isDisabled:o,isVisible:!0,data:i,valueProperty:"Id",textProperty:"Name"},isEditable:!1,Class:"mand",condition:{checkingField:"DepartmentId",dataFieldId:"DepartmentId"},isConditionCheck:!0,validationtype:"required"},{Name:"LevelRank",title:"Level",inputControl:"select",inputControlOptions:{isDisabled:o,isVisible:!0,data:r,textProperty:"Code",valueProperty:"Name",directive:!0},isEditable:!1,Class:"zeg150p",condition:{checkingField:"DepartmentDesignationId",dataFieldId:"DepartmentDesignationId"},isConditionCheck:!1},{Name:"EffectiveFrom",title:"Effective From",inputControl:"datepicker",inputControlOptions:{isDisabled:o,isVisible:!0,isOpen:"effectOpen"},isEditable:!1,Class:"mand",validationtype:"required",template:"<label>{{row.EffectiveFrom|date:'dd/MM/yyyy'}}</label>"},{Name:"ChargeOutRate",title:"Charge-out Rate (Per hour)(SGD)",inputControl:"number",Maxlength:5,inputControlOptions:{isDisabled:o,isVisible:!0,valueProperty:"Name"},isEditable:!1,Class:"zeg200p",condition:{checkingField:"LevelRank",dataFieldId:"LevelRank"}},{Name:"EndDate",title:"End Date",inputControl:"datepicker",inputControlOptions:{isDisabled:o,isVisible:!0,isOpen:"endOpen"},isEditable:!1,Class:"zeg200p",template:"<label>{{row.EndDate|date:'dd/MM/yyyy'}}</label>"},{Name:"Comments",title:"Comments",inputControl:"text",Maxlength:30,inputControlOptions:{isDisabled:o,isVisible:!0},isEditable:!1,Class:"zeg200p"}]}},serviceGroupGridOptions:function(e,t){return{formName:"servicegroup",fields:[{Name:"IsDefault",title:"Default Member For Service Group",lblDisplay:"IsDefault",inputControl:"checkbox",inputControlOptions:{isDisabled:t,isVisible:!0},isEditable:!1},{Name:"ServiceGroupId",title:"Select Service Groups",lblDisplay:"ServiceGroupName",inputControl:"select",inputControlOptions:{isDisabled:t,isVisible:!0,data:e,valueProperty:"Id",textProperty:"Code"},isEditable:!1}]}},getserviceGroupObj:function(){return 0,{Id:"00000000-0000-0000-0000-000000000000",ServiceGroupId:"",ServiceGroupName:"",IsDefault:"",Status:"Active",RecordStatus:"Added"}},getEmploymentGroupObj:function(){return 0,{Id:"00000000-0000-0000-0000-000000000000",CompanyName:"",DepartmentName:"",DesignationName:"",EffectiveFrom:"",EndDate:"",Comments:"",Status:"Active",RecordStatus:"Added",IsEmploymentLocked:""}},check_servicegroups:function(e){var t=[],r=!1;if(e){for(var i=0;i<=e.length-1;i++)e[i].ServiceGroupId&&"Deleted"!=e[i].RecordStatus&&t.push(e[i].ServiceGroupId);t.filter(function(e,t,i){i.indexOf(e)!=t&&(r=!0)})}return r},loadDesignations:function(t,e){if(e){var i=e.filter(function(e){return t==e.Id});return i&&0!=i.length&&i[0].Designations?i[0].Designations:[]}},loadLevels:function(t,e){if(e){var i=e.filter(function(e){return t==e.Id});return i&&0!=i.length&&i[0].LevelRatesLookUp?i[0].LevelRatesLookUp:[]}},chargeOutRange:function(e,t){for(var i=0;i<=e.length-1;i++)if(t===e[i].Code)return e[i].Name},check_endDate:function(e){var t=[],r=!1;if(e){for(var i=0;i<=e.length-1;i++)""===e[i].EndDate&&(e[i].EndDate=null),e[i].EndDate||"Deleted"===e[i].RecordStatus||t.push(e[i].EndDate);t.filter(function(e,t,i){i.indexOf(e)!=t&&(r=!0)})}return r},getChargeoutRate:function(e,t,i){e=n(e).format("YYYY-MM-DD");var r=o.masterRemoteServer+"getChargeOutRate?effectiveFrom="+e+"&designationId="+(t||"00000000-0000-0000-0000-000000000000")+"&level="+(i||"00000000-0000-0000-0000-000000000000");return a.getEntities(r)},validateEmployee:function(e,t){var i=o.masterRemoteServer+"validateemployee?employeeId="+r+"&employeeName="+t;return a.getEntities(i,null,null,{userName:e})},UpdateModuleId:function(e,t){for(var i=0;i<=e.length-1;i++)e[i].ModuleDetailId=t;return e}}}angular.module("employeeprofile",[]).factory("employeeprofileFactory",e),e.$inject=["serviceConfig","commonService","config","$moment"]}();
!function(){"use strict";function e(a,l,t,r,n,m,e,p,s,i,o,d,u,c,y){var f=this;s.format=l.dateFormat,f.isView="true"===e.IsView,f.isEdit="new"!=e.Id,f.isImport="true"===e.isImport,f.tabclick=!1,f.adId=e.Id,f.empId="new"==e.Id?null:e.Id,f.imgUrl="images/userprofile.png",f.tabs=a.prev_tabs(f.isImport),f._prevTab=a.prev_tabs(f.isImport),f.tabClickHandler=b,f.saveNextEmployeeDetails=function(){if(f.validationMessages=[],f.isValidationRequired=!1,n.validate("EmployeeDetailsForm").isValidationRequired||r.isCommunicationValidationRequired)return window.scrollTo(0,0),f.tabs.employeeDetalis=!0,f.isValidationRequired=!0,void f.validationMessages.push({validationText:"Invalid data, Please Verify !"});if(E())return f.tabs.employeeDetalis=!0,f.LookUp=!0,void window.scrollTo(0,0);var e=a.validateEmployee(f.employeeprofileobj.UserName,f.employeeprofileobj.EmployeeName);e.then(function(e){f.tabclick=!1,b("employment")}),e.error(function(e){f.isValidationRequired=!0,f.validationMessages.push({validationText:e.Message})})},f.saveEmployeeDetails=function(){f.validationMessages=[],f.isValidationRequired=!1;var e=n.validate("EmployeeDetailsForm");if(f.employeeprofileobj.EmploymentStartDate=angular.copy(f.employeestartdate),e.isValidationRequired||r.isCommunicationValidationRequired||r.isPostValRequired)f.validationMessages.push({validationText:"Invalid data, Please Verify !"}),f.isValidationRequired=!0,window.scrollTo(0,0);else{if(f.isFileUploaded?f.employeeprofileobj.PhotoId=f.mediaRepoId:f.employeeprofileobj.PhotoId=f.employeeprofileobj.PhotoId,f.isEdit&&(f.employeeprofileobj.ModifiedDate=new Date,f.employeeprofileobj.ModifiedBy=l.userFullName),E())return f.tabs.employeeDetalis=!0,f.LookUp=!0,void window.scrollTo(0,0);f.isEdit?(f.employeeprofileobj.ModifiedDate=new Date,f.employeeprofileobj.ModifiedBy=l.userFullName):(f.employeeprofileobj.UserCreated=l.userFullName,f.employeeprofileobj.CreatedDate=new Date),a.saveEmployeeDetails(f.employeeprofileobj,f.dupemployeeprofileobj.PhotoId!=f.employeeprofileobj.PhotoId?m.current.data.pageTitle.split("/")[0]:null,f.dupemployeeprofileobj.PhotoId!=f.employeeprofileobj.PhotoId?"Photo":null).success(function(e){if(p.notify.success("Saved data  Successfully"),f.isEdit){if(p.set_module_detail_id("Admin","Employee Profile"),l.userName===f.employeeprofileobj.UserName){var o=y.getCookie("company_details");(o=JSON.parse(o)).userImage=f.imgUrl;var i={};i.Medium=e.Small?e.Small:"images/profile.jpg",r.$broadcast("refresh_userImage",{data:i});var t=window.location.host.split(":")[0];y.setCookie("company_details",o,"/",t)}m.go("admin.wfconfigurations.employeeprofiles")}else f.tabs.employment=!0,f.isDisable=!1,b("employment")}).error(function(e){f.validationMessages.push({validationText:e.Message}),f.isValidationRequired=!0,window.scrollTo(0,0)})}},f.saveEmployment=function(){if(f.validationMessages1=[],!0===n.validate("EmploymentForm").isValidationRequired){for(var e=0;e<=f.employment.length-1;e++)f.employment[e].CompanyName&&f.employment[e].DepartmentDesignationId&&f.employment[e].DepartmentId&&f.employment[e].EffectiveFrom?f.employment[e].isRequired=!1:f.employment[e].isRequired=!0;return void I("Invalid data, Please Verify !")}if(f.deletedEmploymentObj=[],f.deletedEmploymentObj=f.employment.filter(function(e){return"Deleted"===e.RecordStatus}),0==f.employment.length||f.deletedEmploymentObj.length===f.employment.length)return I("Designation Details is requried");for(var e=0;e<=f.employment.length-1;e++)f.employment[e].EmployeeId=f.employeeprofileobj.Id;if(f.effectiveRepeating)return I("Effective From is repeating please check");f.dupEmployeArray=[],f.dupEmployeArray=f.employment.filter(function(e){return"Deleted"!==e.RecordStatus});for(var e=0;e<=f.dupEmployeArray.length-1;e++){if(!f.dupEmployeArray[e].ChargeOutRate||"0"===f.dupEmployeArray[e].ChargeOutRate||"0"==f.dupEmployeArray[e].ChargeOutRate)return f.isValidationRequired1=!0,I("Charge-out Rate is required");f.isValidationRequired1=!1}{if(a.check_endDate(f.employment))return f.isValidationRequired1=!0,I("End Date is not properly please fill");f.isValidationRequired1=!1}for(var o=0;o<f.employment.length-1;o++)f.employment[o].IsEmploymentLocked=!0;if(f.isEdit){var i=y.getSessionItem("ModuleDetailId");f.deletedEmployeeIndex&&(f.employment[f.deletedEmployeeIndex-1].EndDate=null),f.employment=a.UpdateModuleId(f.employment,i||y.getItem("ModuleDetailId"));var t=a.saveEmployment(f.employment);t.then(function(e){p.notify.success("Saved data  Successfully"),p.set_module_detail_id("Admin","Employee Profile"),m.go("admin.wfconfigurations.employeeprofiles")}),t.error(function(e){return f.isValidationRequired=!0,window.scrollTo(0,0),angular.forEach(f.employment,function(e,o){f.employment[o].EffectiveFrom=f.employment[o].EffectiveFrom?new Date(f.employment[o].EffectiveFrom):null,f.employment[o].EndDate=f.employment[o].EndDate?new Date(f.employment[o].EndDate):null}),I(e.Message)})}else{f.employeeprofileobj.UserCreated=l.userFullName,f.employeeprofileobj.CreatedDate=new Date,f.employeeprofileobj.EmployeeDepartmentModel=f.employment,f.employeeprofileobj.EmploymentStartDate=angular.copy(f.employeestartdate);var r=a.saveEmployeeDetails(f.employeeprofileobj);r.success(function(e){f.tabs.serviceGroups=!0,f.isDisable=!1,b("serviceGroups")}),r.error(function(e){return f.isValidationRequired=!0,window.scrollTo(0,0),angular.forEach(f.employment,function(e,o){f.employment[o].EffectiveFrom=f.employment[o].EffectiveFrom?new Date(f.employment[o].EffectiveFrom):null,f.employment[o].EndDate=f.employment[o].EndDate?new Date(f.employment[o].EndDate):null}),I(e.Message)})}},f.userNames=g,f.addServiceGroup=function(){f.serviceGroupObj.ServiceGroups=f.serviceGroupObj.ServiceGroups?f.serviceGroupObj.ServiceGroups:[],f.serviceGroupObj.ServiceGroups.push(a.getserviceGroupObj(f.empId));for(var e=0;e<=f.serviceGroupObj.ServiceGroups.length-1;e++)""===f.serviceGroupObj.ServiceGroups[e].IsDefault&&(f.serviceGroupObj.ServiceGroups[e].IsDefault=0)},f.deleteServiceGroup=function(e,o){null===e.RecordStatus?p.confirmationDialog("Confirm Delete?","Are you sure you really want to delete?","Ok","Cancel").then(function(e){"ok"===e&&(f.serviceGroupObj.ServiceGroups[o].RecordStatus="Deleted")}):f.serviceGroupObj.ServiceGroups.splice(o,1)},f.saveServiceGroups=function(){f.validationMessages1=[],f.isValidationRequired1=!1,f.serviceGroupObj.EmployeeId=f.employeeprofileobj.Id;for(var e=0;e<=f.serviceGroupObj.ServiceGroups.length-1;e++)f.serviceGroupObj.ServiceGroups[e].EmployeeId=f.employeeprofileobj.Id;if(f.duplicateObj=f.serviceGroupObj.ServiceGroups.length,f.serviceGroupObj.ServiceGroups)for(var e=f.serviceGroupObj.ServiceGroups.length-1;0<=e;e--)"00000000-0000-0000-0000-000000000000"!==f.serviceGroupObj.ServiceGroups[e].Id||f.serviceGroupObj.ServiceGroups[e].ServiceGroupId||f.serviceGroupObj.ServiceGroups[e].IsDefault||"Added"!==f.serviceGroupObj.ServiceGroups[e].RecordStatus||f.serviceGroupObj.ServiceGroups.splice(e,1);f.serviceGroupObj.ServiceGroups;{if(a.check_servicegroups(f.serviceGroupObj.ServiceGroups))return void(f.serviceLookUp=!0);f.serviceLookUp=!1}if(f.serviceGroupObj.ServiceGroups)for(var e=f.serviceGroupObj.ServiceGroups.length-1;0<=e;e--)"00000000-0000-0000-0000-000000000000"==f.serviceGroupObj.ServiceGroups[e].Id||f.serviceGroupObj.ServiceGroups[e].ServiceGroupId||!1!==f.serviceGroupObj.ServiceGroups[e].IsDefault||(f.serviceGroupObj.ServiceGroups[e].ServiceGroupId=0,f.serviceGroupObj.ServiceGroups[e].RecordStatus="Deleted",f.errorCal=!1);for(var e=0;e<=f.serviceGroupObj.ServiceGroups.length-1;e++)if("Deleted"!=f.serviceGroupObj.ServiceGroups[e].RecordStatus){if(!0===f.serviceGroupObj.ServiceGroups[e].IsDefault&&!f.serviceGroupObj.ServiceGroups[e].ServiceGroupId)return j("Please select ServiceGroup");f.errorCal=!1}a.saveServiceGroup(f.serviceGroupObj).then(function(e){p.notify.success("Saved data  Successfully"),m.go("admin.wfconfigurations.employeeprofiles")})},f.removeEntityId=function(e){f.employeeprofileobj.userId=null},f.cancel=function(){p.set_module_detail_id("Admin","Employee Profile"),m.go(r.prevUrl)},f.errormsg=j,f.levelChange=function(e,o,i,t){f.employment[e].ChargeOutRate||(f.employment[e].ChargeOutRate="0");var r=a.loadDesignations(t,f.departmentLookups),l=a.loadLevels(i,r);o&&f.employment[e].EffectiveFrom?f.employment[e].ChargeOutRate=a.chargeOutRange(l,o):f.employment[e].ChargeOutRate="0";f.valueChange=!0},f.loadDepartmentLevels=function(e,o){return a.loadDesignations(o,f.departmentLookups)},f.loadLevels=function(e,o,i,t){f.employment[e].ChargeOutRate||(f.employment[e].ChargeOutRate="0");var r=a.loadDesignations(o,f.departmentLookups);return a.loadLevels(i,r)},f.effectiveFrom=function(e,o,i,t){if(f.isValidationRequired1=!1,f.effectiveRepeating=!1,f.dupEmployeArray=f.employment.filter(function(e){return"Deleted"!==e.RecordStatus}),e){a.getChargeoutRate(e,o,i).then(function(e){f.employment[t].ChargeOutRate=e.data},function(e){return f.isValidationRequired1=!0,I(e.data.Message)});for(var r=0;r<=f.dupEmployeArray.length-1;r++)if(f.dupEmployeArray[r+1]){if(f.dupEmployeArray[r+1].EffectiveFrom){var l=new Date(f.dupEmployeArray[r+1].EffectiveFrom);f.dupEmployeArray[r].EndDate=angular.copy(new Date(l.setDate(l.getDate()-1)))}if(f.dupEmployeArray[r].EffectiveFrom>=f.dupEmployeArray[r+1].EffectiveFrom&&""!=f.dupEmployeArray[r+1].EffectiveFrom&&null!=f.dupEmployeArray[r+1].EffectiveFrom)return f.isValidationRequired1=!0,f.effectiveRepeating=!0,I("Effective From is repeating please check");f.isValidationRequired1=!1}}else f.employment[t].ChargeOutRate="0"},f.validationText1=I,f.duplicateService=function(){{if(a.check_servicegroups(f.serviceGroupObj.ServiceGroups))return void(f.serviceLookUp=!0);f.serviceLookUp=!1}},s.currency=c.BaseCurrency,i.load_permissions({permissionKey:m.current.data.permissionKey,userName:l.userName,companyId:l.companyId}).then(function(e){f.isView="True"!==e.data.Metadata.Edit&&f.isEdit,i.load_tab_permissions("admin_employeeprofiles").then(function(e){f.isEmploymentTabView="True"==e.Employment.View,f.isEmploymentTabEdit="True"!=e.Employment.Edit;var o=["Service Groups"];f.isServiceGroupsTabView="True"==e[o[0]].View,f.isServiceGroupsTabEdit="True"!=e[o[0]].Edit}),f.isView&&setTimeout(function(){$("input").prop("disabled",!0),$("select").prop("disabled",!0),$("checkbox").prop("disabled",!0),$("textarea").prop("disabled",!0)},300);for(var o=0;o<=e.data.TabModels.length-1;o++)"Employment"===e.data.TabModels[o].ScreenName&&(f.EmploymentModDetId=e.data.TabModels[o].ModuleDetailId),"Service Groups"===e.data.TabModels[o].ScreenName&&(f.ServiceModDetailId=e.data.TabModels[o].ModuleDetailId)}),a.getlookups(f.empId).success(function(e){f.UserNames=e.UserNames,f.Gender=e.Genders.Lookups,f.Nationality=e.Nationality.Lookups,f.company=e.CompanyNames,f.currency=e.Currencies,f.departmentLookups=e.Departments,f.isImport&&b("employment")}),a.getEmployment().success(function(e){f.departments=e.Departments,f.designation=e.Designations,f.levels=e.LevelRatesLookUp,a.getServiceGroup(f.empId).success(function(e){f.servicegroup=e})}),a.createEmployeeDetails(f.adId).then(function(e){return document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />',f.employeeprofileobj=e.data,f.tabclick=!0,f.dupemployeeprofileobj=angular.copy(e.data),f.employeestartdate=f.employeeprofileobj.EmploymentStartDate,f.employeestartdate&&(f.employeestartdate=new Date(f.employeestartdate)),r.$broadcast("setCommunication"),f.employeeprofileobj.Small&&(f.imgUrl=f.employeeprofileobj.Small,document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />'),f.AddrObj={EmployeeName:f.employeeprofileobj.EmployeeName,Username:f.employeeprofileobj.Username,PhotoId:f.employeeprofileobj.PhotoId,Status:!1,Small:f.employeeprofileobj.Small,Addresses:f.employeeprofileobj.Addresses,Communication:f.employeeprofileobj.Communication,Phone:f.employeeprofileobj.Phone,Website:f.employeeprofileobj.Website},angular.element(document.querySelector("#fileInput")).on("change",v),e.data}),f.tabs.employeeDetalis&&(m.get("admin.wfconfigurations.employeeprofile").data.pageTitle="Employee Profile / Employee Detalis"),f.isDisable="new"===e.Id,s.dateformate=l.dateFormat,s.dobOpen=[],s.openedstart=[],s.openedend=[],s.open=function(e){s.dobOpen[e]=!0},s.open1=function(e){s.openedstart[e]=!0},s.open2=function(e){s.openedend[e]=!0},f.addDepartmentDatails=function(){f.employment.push(a.getEmploymentGroupObj())},f.deleteEmployement=function(e,o){"00000000-0000-0000-0000-000000000000"===e.Id?f.employment.splice(o,1):(f.isValidationRequired=!1,f.deletedEmployeeIndex=o,e.RecordStatus="Deleted")};var v=function(e){"image/gif"==e.currentTarget.files[0].type||"image/jpeg"===e.currentTarget.files[0].type||"image/png"===e.currentTarget.files[0].type?d.open({templateUrl:"cropimg.html",controller:"cropImgCtrl",backdrop:"static",resolve:{options:function(){return e}}}).result.then(function(e){s.upload(e.url,e.name)}):p.notify.warning("file format should be in JPEG/PNG/GIF")};function g(e){var o=this.dataItem(e.item.index());f.employeeprofileobj.userId=o.Id,o.Small?f.imgUrl=o.Small:f.imgUrl="images/userprofile.png",f.employeeprofileobj.Small=o.Small,f.employeeprofileobj.Original=o.Original,f.employeeprofileobj.Medium=o.Medium,f.employeeprofileobj.Large=o.Large,f.employeeprofileobj.PhotoId=o.PhotoId,document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />'}function b(e){if(f.isDirtyFormED&&f.isEdit)return f.tabs[e]=!1,f.tabs.employeeDetalis=!0,void p.dirtyHandler(e);if(f.isDirtyFormE&&f.isEdit)return f.tabs[e]=!1,f.tabs.employment=!0,void p.dirtyHandler(e);if(f.isDirtyFormSG&&f.isEdit)return f.tabs[e]=!1,f.tabs.serviceGroups=!0,void p.dirtyHandler(e);f.validationMessages=[],f.isValidationRequired=!1;var o=n.validate("EmployeeDetailsForm");if(o.isValidationRequired=!f.isImport&&o.isValidationRequired,o.isValidationRequired)return window.scrollTo(0,0),f.tabs.employeeDetalis=!0,f.isValidationRequired=!0,void f.validationMessages.push({validationText:"Invalid data, Please Verify !"});switch("employment"==e?(f.isEdit&&(y.setItem("ModuleDetailId",f.EmploymentModDetId),y.setSessionItem("ModuleDetailId",f.EmploymentModDetId)),f.isValidationRequired=!1,f.isValidationRequired1=!1,f.errorCal=!1,m.get("admin.wfconfigurations.employeeprofile").data.pageTitle="Employee Profile / Employment"):"serviceGroups"==e?(y.setItem("ModuleDetailId",f.ServiceModDetailId),y.setSessionItem("ModuleDetailId",f.ServiceModDetailId),f.isValidationRequired=!1,f.isValidationRequired1=!1,f.errorCal=!1,m.get("admin.wfconfigurations.employeeprofile").data.pageTitle="Employee Profile / Service Groups"):"employeeDetalis"==e&&(p.set_module_detail_id("Admin","Employee Profile"),f.isValidationRequired=!1,f.isValidationRequired1=!1,f.errorCal=!1,m.get("admin.wfconfigurations.employeeprofile").data.pageTitle="Employee Profile / Employee Detalis"),e){case"employeeDetalis":f.tabclick&&a.createEmployeeDetails(f.adId).then(function(e){return document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />',f.employeeprofileobj=e.data,f.employeestartdate=f.employeeprofileobj.EmploymentStartDate,f.employeestartdate&&(f.employeestartdate=new Date(f.employeestartdate)),r.$broadcast("setCommunication"),f.employeeprofileobj.Small&&(f.imgUrl=f.employeeprofileobj.Small,document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />'),f.AddrObj={EmployeeName:f.employeeprofileobj.EmployeeName,Username:f.employeeprofileobj.Username,PhotoId:f.employeeprofileobj.PhotoId,Status:!1,Small:f.employeeprofileobj.Small,Addresses:f.employeeprofileobj.Addresses,Communication:f.employeeprofileobj.Communication,Phone:f.employeeprofileobj.Phone,Website:f.employeeprofileobj.Website},e.data});break;case"employment":f.adId="new"==f.adId?f.employeeprofileobj.Id:f.adId,a.createEmployment(f.adId).then(function(e){f.employment=e.data,f.employmentObj=angular.copy(f.employment),f.tabs.employment=!0,f.isEdit&&(angular.forEach(f.employment,function(e,o){f.employment[o].EffectiveFrom=f.employment[o].EffectiveFrom?new Date(f.employment[o].EffectiveFrom):null,f.employment[o].EndDate=f.employment[o].EndDate?new Date(f.employment[o].EndDate):null,f.employment[o].LevelRank=f.employment[o].LevelRank?f.employment[o].LevelRank.toString():""}),f.imgUrl||(f.imgUrl="images/userprofile.png"),f.employeeprofileobj.Small=null==f.employeeprofileobj.Small?f.imgUrl:f.employeeprofileobj.Small,document.getElementById("img").innerHTML='<img src="'+f.employeeprofileobj.Small+'" alt="sa" />'),angular.forEach(f.employment,function(e,o){f.employment[o].EffectiveFrom=f.employment[o].EffectiveFrom?new Date(f.employment[o].EffectiveFrom):null,f.employment[o].EndDate=f.employment[o].EndDate?new Date(f.employment[o].EndDate):null,f.employment[o].LevelRank=f.employment[o].LevelRank?f.employment[o].LevelRank.toString():""}),f.departmentOptions=a.departmentGridOptions(f.company,f.departments,f.designation,f.levels,f.currency,f.isView)});break;case"serviceGroups":f.adId="new"==f.adId?f.employeeprofileobj.Id:f.adId,a.createServiceGroup(f.adId).then(function(e){f.serviceGroupObj=e.data})}}function E(){for(var e=0;e<f.UserNames.length;e++)if(f.employeeprofileobj.UserName=document.getElementById("userName").value,f.employeeprofileobj.UserName==f.UserNames[e].Code)return f.LookUp=!1;return!0}function I(e){if(f.isValidationRequired1=!0,f.validationText1=e,"ChargeOutRate is mandatory"===f.validationText1)for(var o=0;o<=f.employment.length-1;o++)f.employment[o].EffectiveFrom=f.employment[o].EffectiveFrom?new Date(f.employment[o].EffectiveFrom):null}function j(e){f.errorCal=!0,f.dataerror=e}function D(e){$("#invalid").removeClass("show"),$("#invalid").addClass("hide"),f.isFileUploaded=!0,f.imgUrl=e.data.Small,f.mediaRepoId=e.data.Id,f.employeeprofileobj.PhotoId=f.mediaRepoId,f.employeeprofileobj.Small=f.imgUrl,f.employeeprofileobj.Original=f.imgUrl,f.employeeprofileobj.Medium=f.imgUrl,f.employeeprofileobj.Large=f.imgUrl,document.getElementById("img").innerHTML='<img src="'+f.imgUrl+'" alt="sa" />'}f.userNames={select:g},$("#invalid").addClass("hide"),f.isValid=!1,f.photoUplodOptions={async:{saveUrl:t.azureStorageRemoteServer+"uploadlogo",removeUrl:t.azureStorageRemoteServer+"deletelogo",autoUpload:!0},localization:{select:"upload photo"},select:function(t){$.each(t.files,function(e,o){var i=o.extension.toUpperCase();".JPG"!=i&&".PNG"!=i&&".JPG"!=i&&(f.isUnsuportedFile=!0,f.isValid=!0,$("#invalid").addClass("show"),f.isValid=!0,t.preventDefault())})},success:D},s.upload=function(e,o){var i=y.getSessionItem("ModuleDetailId");u.upload({url:t.azureStorageRemoteServer+"UploadLogo",headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:y.encrypt({companyId:l.companyId,userName:l.userName,moduleDetailId:i||y.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})},data:{file:u.dataUrltoBlob(e,o)}}).then(function(e){s.myImage="",s.myCroppedImage="",document.querySelector("#fileInput").value="",D(e)})}}function o(t,r,e){var o,i;r.Remarks=e,r.myImage="",r.myCroppedImage="",o=e.files[0].rawFile,i=new FileReader,r.imageName=o.name,i.onload=function(o){r.$apply(function(e){e.myImage=o.target.result})},i.readAsDataURL(o),r.save=function(e,o){var i={url:e,name:r.imageName};t.close(i)},r.close=function(){t.dismiss()}}angular.module("employeeprofile").controller("employeeprofileController",e).controller("cropImgCtrls",o),e.$inject=["employeeprofileFactory","config","serviceConfig","$rootScope","formValidate","$state","$stateParams","commonService","$scope","users_permissions","$cookies","$uibModal","Upload","companysettings","zStorageEnc"],o.$inject=["$uibModalInstance","$scope","options"]}();
!function(){"use strict";function e(e,l,c,f,m,t){var n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return{load_sheads:function(e,t){var a=[];t||(t=new Date);for(var r=angular.copy(t),s=0;s<=6;s++){var o=l(r).add("days",s);a.push({date:o.format(c.dateFormat.toUpperCase()),day:n[o.day()]})}return a},load_month_weeks:function(e){function t(e,t){for(var a=[],r=e=0==e?e:7*e;r<=t.length-1;r++)r<=e+6&&a.push(t[r]);return a}var a=[];e||(e=new Date);for(var r=angular.copy(e),s=[],o=0;o<=35;o++){var n=l(r).add("days",o);s.push({day:new Date(n).getDate(),date:n.format(c.dateFormat.toUpperCase())})}for(var o=0;o<=4;o++)a.push({days:t(o,s)});return a},load_tasks:function(e,t,a,r,s,o,n){a||(a=new Date);var d,i,u="object"==typeof a?l(a).format("YYYY-MM-DD"):l(a,c.dateFormat).format("YYYY-MM-DD");d="month_view"==r?l(u).add(35,"days"):l(u).add(6,"days");d=l(d).format("YYYY-MM-DD"),s&&!o?(n=["00000000-0000-0000-0000-000000000000"],i=s+"lstEmployeeIds="+JSON.stringify(n)+"&startDate="+u+"&endDate="+d+"&caseId="+t+"&isFromDashBoard=false"):s&&o?(i=s,o):(n=e||n,i=f.schedulingRemoteServer+"getsheduletask?lstEmployeeIds="+JSON.stringify(n)+"&startDate="+u+"&endDate="+d+"&caseId="+t+"&isFromDashBoard=false");return m.getEntities(i)},load_day_tasks:function(e,t,a){var r="week_view"==a?6:35;function s(t){return e.filter(function(e){return e.Fromdate&&e.Todate?l(t).format("YYYY-MM-DD")>=l(e.Fromdate).format("YYYY-MM-DD")&&l(t).format("YYYY-MM-DD")<=l(e.Todate).format("YYYY-MM-DD")&&"Deleted"!=e.RecordStatus:e.Fromdate?l(t).format("YYYY-MM-DD")>=l(e.Fromdate).format("YYYY-MM-DD")&&"Deleted"!=e.RecordStatus:void 0})}t||(t=new Date);var o={},n=t;n="object"==typeof n?l(n).format("YYYY-MM-DD"):l(n,c.dateFormat.toUpperCase()).format("YYYY-MM-DD");for(var d=0;d<=r;d++)o[l(n).add(d,"days").format(c.dateFormat.toUpperCase())]=s(l(n).add(d,"days").format("YYYY-MM-DD"));return o},request_task:function(e,t){if(void(e=e||"00000000-0000-0000-0000-000000000000"))var a=f.trainingsRemoteServer+"gettrainingshyperlink?trainingid="+e;else var a=f.schedulingRemoteServer+"createscheduletask?id="+e+"&ServiceId="+t;return m.getEntities(a)},load_employees:function(e){e=e||null;var t=f.schedulingRemoteServer+"getemployeesllokup?caseid="+e;return m.getEntities(t)},save_task:function(e,t,a,r){var s=angular.copy(e),o=f.schedulingRemoteServer+"SaveScheduleTasks";return a?m.saveEntity(o,{CaseId:t,ScheduleTasks:s}):(s.StartDate=l(s.StartDate).format("YYYY-MM-DDT00:00:00"),s.EndDate=l(s.StartDate).format("YYYY-MM-DDT00:00:00"),s.Fromdate=s.StartDate,s.Todate=s.StartDate,s.TaskName=s.Title,s.ModifiedHours=parseFloat(s.Hours),s.RecordStatus="Added"==s.RecordStatus?"Added":"Deleted"==s.RecordStatus?"Deleted":"Modified",s.IsSystem=!1,s.TaskHours=s.TaskHours,s.Id=m.guid(),s.PBIName=s.PBIName,s.ScheduleTaskDetailModels=s.ScheduleTaskDetailModels,s.IsOverRunHours=s.IsOverRun?s.IsOverRunHours:"00:00",s.TaskId="00000000-0000-0000-0000-000000000000"==s.TaskId?angular.copy(s.Id):s.TaskId,m.saveEntity(o,{CaseId:t,ScheduleTasks:r&&"Deleted"==r.RecordStatus?[s,r]:[s]}))},delete_task:function(e){var t=f.schedulingRemoteServer+"deletescheduletask?id="+e;return m.getEntities(t)},bg_colors:["bg-1","bg-2","bg-3","bg-4","bg-5","bg-6","bg-7","bg-8","bg-9","bg-10"],set_case_users:function(e){var t={};if(e)for(var a=0;a<=e.length-1;a++)t[e[a].Id]=e[a].Name;return t},remove_tasks:function(e,t){for(var a=0;a<=t.length-1;a++)t[a].EmployeeId==e&&(t[a].ishide=!0);return t},update_object:function(e,t){for(var a=0;a<=e.length-1;a++)e[a].TaskId==t.TaskId&&(e[a]=t);return e},concat_objects:function(e,t){for(var a=0;a<=t.length-1;a++)r(t[a].TaskId,e)||e.push(t[a]);return e},remove_system_tasks:function(e,t){return e.filter(function(e){return!e.IsSystem})},isTaskExist:function(t,e){return 0!=e.filter(function(e){return e.TaskId===t.TaskId}).length},isExistingTask:function(e,t){return 0!=e.filter(function(e){return e.TaskId!=t.TaskId&&e.Fromdate==l(t.StartDate).format("YYYY-MM-DDT00:00:00")&&e.Title==t.Title&&"Deleted"!=e.RecordStatus&&e.EmployeeId==t.EmployeeId}).length},set_user_images:function(e){var t={};if(e)for(var a=0;a<=e.length-1;a++)t[e[a].Id]=e[a].PhotoUrl?e[a].PhotoUrl:"images/profile.jpg";return t},concatObjs:function(e,t){for(var a=0;a<=t.length-1;a++)t[a].IsSystem||r(t[a].TaskId,e)||e.push(t[a]);return e},getpbilist:function(e){var t=f.timelogRemoteServer+"getfeaturelu?caseid="+e;return m.getEntities(t)},calculateplannedhours:function(e,t){var a=e.split(":"),r=t.split(":"),s=parseInt(a[0])-parseInt(r[0]),o=parseInt(a[1])-parseInt(r[1]);return s=s.toString(),o=o.toString(),s=1==s.length?"0"+s:s,o=1==o.length?"0"+o:o,s+":"+o},istaskalloted:function(e,t){for(var a={reason:null,isduplicate:!1},r=0;r<=e.length-1;r++)if(t.TaskId!=e[r].TaskId&&e[r].Fromdate==l(t.StartDate).format("YYYY-MM-DDT00:00:00")&&"Deleted"!=t.RecordStatus&&e[r].EmployeeId!=t.EmployeeId)for(var s=0;s<=e[r].ScheduleTaskDetailModels.length-1;s++)for(var o=0;o<=t.ScheduleTaskDetailModels.length-1;o++)if(e[r].ScheduleTaskDetailModels[s].CaseFeatureId==t.ScheduleTaskDetailModels[o].CaseFeatureId)return a.reason=e[r].ScheduleTaskDetailModels[s].Name,a.isduplicate=!0,a;return a},isExistingDayTasks:function(e,a){var r=0;return e.filter(function(t,e){a.filter(function(e){t.TaskId!=e.TaskId&&t.Fromdate==l(e.StartDate).format("YYYY-MM-DDT00:00:00")&&t.Title==e.Title&&"Deleted"!=t.RecordStatus&&t.EmployeeId==e.EmployeeId&&r++})}),0<r},getAllTasks:function(e,t){var a=[];return e.forEach(function(e){a=a.concat(t[l(e.StartDate).format("DD/MM/YYYY")])}),a}};function r(t,e){return 0!=e.filter(function(e){return e.TaskId==t}).length}}angular.module("scheduler",[]).factory("scheduler",e),e.$inject=["$state","$moment","config","serviceConfig","commonService","$cookies"]}();
!function(){"use strict";function e(D,g,y,v,I,S,M,H,b){return{link:function(n,e,s){n.view_type=b.viewType?b.viewType:"month_view",n.sheads=[],n.month_weeks=[],n.scedulartaskLoder=!0,n.schedulerDateMonth="",n.load_sheads=r,n.load_month_weeks=f,n.individual_actions=function(e){var s={today:new Date,prev:y(n.schedulerDate).add("week_view"==n.view_type?-7:-30,"days"),next:y(n.schedulerDate).add("week_view"==n.view_type?7:30,"days")};n.schedulerDate=new Date(s[e]),r(n.view_type)},n.request_task=i,n.delete_task=function(s){S.confirmationDialog("confirm delete","Are you sure you want to delete?","Ok","cancel").then(function(e){"ok"===e&&("Added"==s.RecordStatus?(k.splice(k.indexOf(s),1),T()):(s.RecordStatus="Deleted",s.ScheduleTaskDetailModels&&s.ScheduleTaskDetailModels.forEach(function(e){e.RecordStatus="Deleted"}),u(s)),s.RecordStatus="Deleted",m(s,!1))})},n.load_bg_color=function(e,s){return n.users?(s&&(e=n.users.indexOf(e)),s?"bg-color-"+parseInt(1+(e%10==10?0:e%10)):n.bg_colors[e%10==10?0:e%10]):"bg-color-1"},n.bg_colors=D.bg_colors,n.create_task=function(e,s){s?("DIV"===s.target.tagName&&"DIV"===s.target.parentElement.tagName||"TD"===s.target.tagName||"SPAN"===s.target.tagName)&&i(null,e,null):i(null,e,null)},n.selectedList=[],n.case_users=[],n.load_tasks=p,n.onTaskClick=function(s,e,t){var a=k.filter(function(e){return e.TaskId===s.TaskId})[0];n.selectedDay=t;var d=n.selectedTasksList.indexOf(a);-1<d?n.isCtrlPressed?n.selectedTasksList.splice(d,1):n.selectedTasksList=[a]:n.isCtrlPressed?n.selectedTasksList.push(a):n.selectedTasksList=[a],"MyCalendar"==n.isSchedulerType&&s.IsTask?M.go("workflow.workflow.casing.casescheduling",{Id:s.CaseId,IsFrom:"cases"}):e.stopPropagation()},n.checkScheduleType=function(e,s){var t=[];switch(n.isSchedulerType){case"Schedular":t="cellMenuOptions"===e?"cellMenuOptions":e;break;case"MyCalendar":t=[]}return t},n.isCtrlPressed=!1,n.refresh=o;var c=[];document.getElementById("shedulerBody").onkeydown=function(e){"17"==e.which&&(n.isCtrlPressed=!0)},document.getElementById("shedulerBody").onkeyup=function(e){"17"==e.which?n.isCtrlPressed=!1:"67"==e.which?d():"86"==e.which?l({day:n.selectedDay}):"88"==e.which?a():"27"==e.which&&(n.selectedTasksList=[],c=[],n.selectedDay=null)},b.schedularDate&&(n.schedulerDate=new Date(b.schedularDate)),n.schedulerDate=n.schedulerDate?n.schedulerDate:new Date;var t=["January","February","March","April","May","June","July","August","September","October","November","December"];n.schedulerDateMonth=t[n.schedulerDate.getMonth()],n.selectedList=n.users?angular.copy(n.users):[],n.isTaskSelected=function(s){return 0!=n.selectedTasksList.filter(function(e){return e.TaskId===s}).length},n.scheduleTooltip=function(e){var s="";if(e){switch(n.isSchedulerType){case"Schedular":s=n.case_users[e.EmployeeId];break;case"ViewSchedule":s=(s=n.case_users[e.EmployeeId]+"<br>")+'<span class="tasknametltp">'+("ViewSchedule"==n.isSchedulerType&&e.IsTask?e.TaskName:"")+"</span>";break;case"MyCalendar":s=(s=n.case_users[e.EmployeeId]+"<br>")+'<span class="tasknametltp">'+("MyCalendar"==n.isSchedulerType&&e.IsTask?e.TaskName:"")+"</span>"}return s}},n.overrunStyle={border:"2px solid #E13",padding:"1px"};var h={action:null};function a(){h.action="Cut",c=angular.copy(n.selectedTasksList);for(var s=0;s<c.length;s++)k.filter(function(e){e.TaskId===c[s].TaskId&&(e.RecordStatus="Deleted",e.ishide=!0,e.ScheduleTaskDetailModels&&e.ScheduleTaskDetailModels.forEach(function(e){e.RecordStatus="Deleted"}))})}function d(){h.action="Copy",c=angular.copy(n.selectedTasksList)}function l(e,s){if(c&&0!=c.length){for(var t=!1,a=D.remove_system_tasks(angular.copy(c)),d=[],l=0;l<a.length;l++)d.push(new Date(a[l].StartDate));var o=y(new Date(Math.min.apply(null,d))).format("YYYY-MM-DDT00:00:00").split("T")[0];for(l=0;l<a.length;l++){a[l].TaskId=S.guid(),a[l].RecordStatus="Added",a[l].IsCopy=!0,a[l].CreatedDate=new Date,a[l].ScheduleTaskDetailModels&&a[l].ScheduleTaskDetailModels.forEach(function(e,s){e.RecordStatus="Added"});var r=y(e.day_task?e.day_task.date:e.day.date,g.dateFormat.toUpperCase()).format("YYYY-MM-DDT00:00:00").split("T")[0],i=y([parseInt(o.split("-")[0]),parseInt(o.split("-")[1])-1,parseInt(o.split("-")[2])]),u=y([parseInt(r.split("-")[0]),parseInt(r.split("-")[1])-1,parseInt(r.split("-")[2])]).diff(i,"days");a[l].Fromdate=y(a[l].Fromdate,"YYYY-MM-DDT00:00:00").add(u,"days").format("YYYY-MM-DDT00:00:00"),a[l].Todate=y(a[l].Todate,"YYYY-MM-DDT00:00:00").add(u,"days").format("YYYY-MM-DDT00:00:00"),a[l].StartDate=y(a[l].StartDate,"YYYY-MM-DDT00:00:00").add(u,"days").format("YYYY-MM-DDT00:00:00"),a[l].EndDate=y(a[l].EndDate,"YYYY-MM-DDT00:00:00").add(u,"days").format("YYYY-MM-DDT00:00:00")}if(angular.forEach(c,function(e,s){e.RecordStatus="Deleted",e.IsSystem&&(t=!0)}),t)return I.$broadcast("ScheduleSave",{data:{isError:!0,ErrorMessege:"Task not Allowed"}}),k=[],void p();m("Cut"==h.action?a.concat(c):a,!0),T(),n.selectedTasksList=[],n.$$phase||s||n.$apply()}}n.selectedDay=null,n.contextMenuOptions=function(s,e){return n.selectedDay=e,s&&(0!==n.selectedTasksList.filter(function(e){return e.TaskId===s.TaskId}).length||(n.isCtrlPressed?n.selectedTasksList.push(s):n.selectedTasksList=[s])),[["Cut",function(e,s,t){a()},function(e){return 0!==n.selectedTasksList.length}],null,["Copy",function(e){d()},function(e){return 0!==n.selectedTasksList.length}]]},n.cellMenuOptions=function(e){return n.selectedDay=e,n.selectedTasksList=[],[["Paste",function(e){l(e,!0)},function(e){return 0!==c.length}]]},n.selectedTasksList=[];var k=[];function T(){n.day_tasks=D.load_day_tasks(k,n.schedulerDate,n.view_type)}function m(e,s){n.scedulartaskLoder=!0;var t=D.save_task(e,n.caseId,s);t.then(function(e){S.notify.success("Saved Data"),I.$broadcast("ScheduleSave",{data:e})}),t.error(function(e){n.scedulartaskLoder=!1,n.day_tasks=[],k=[],p(),I.$broadcast("ScheduleSave",{data:{isError:!0,ErrorMessege:e.Message}})})}function o(){"$apply"!=n.$root.$$phase&&"$digest"!=n.$root.$$phase&&n.$apply(),n.selectedList=n.users?angular.copy(n.users.filter(function(e){return"Deleted"!=e.RecordStatus})):[],k=[],r(n.view_type)}function r(e){if(n.schedulerDateMonth=t[n.schedulerDate.getMonth()],n.startOfWeek&&(n.schedulerDate=new Date(y(y(n.schedulerDate).format("YYYY-MM-DDT00:00:00")).startOf("week").format("YYYY-MM-DDT00:00:00"))),n.sheads=D.load_sheads(e,n.schedulerDate),"month_view"==n.view_type&&f(),"DashboardSchedule"==n.isSchedulerType){var s=angular.copy(n.schedulerDate);n.uri=H.schedulingRemoteServer+'getsheduletask?lstEmployeeIds=["00000000-0000-0000-0000-000000000000"]&startDate='+y(y(s).format("YYYY-MM-DDT00:00:00")).startOf("month").format("YYYY-MM-DD")+"&endDate="+y(new Date(s)).format("YYYY-MM-DD")+"&caseId=00000000-0000-0000-0000-000000000000isFromDashBoard=true"}p()}function p(){n.scedulartaskLoder=!0,D.load_tasks(n.selectedList,n.caseId,n.schedulerDate,n.view_type,n.uri,n.uriWithParams,n.users).then(function(e){k=D.remove_system_tasks(k),k=D.concat_objects(k,e.data),n.tasksList=k,T(),n.scedulartaskLoder=!1},function(e){n.scedulartaskLoder=!1})}function i(e,s,t,a){!e&&!s||n.isReadonly||t&&t.IsSystem?"MyCalendar"==n.isSchedulerType&&t.IsTask&&M.go("workflow.workflow.casing.casescheduling",{Id:t.CaseId,IsFrom:"cases"}):v.open({templateUrl:"request_task.html",controller:"scheduleTaskController",controllerAs:"vm",backdrop:"static",size:"md",windowClass:"",resolve:{options:function(){return{taskid:e,task:t,caseid:n.caseId,date:s,case:n.caseNo,object:angular.copy(t),allTasks:k,users:n.users,caseServiceId:n.caseServiceId}}}}).result.then(function(e){"Added"!=e.RecordStatus||D.isTaskExist(e,k)?u(e):(-1===n.selectedList.indexOf(e.EmployeeId)&&(e.ishide=!0),k.push(e),T()),I.$broadcast("schedule_item_saved",{data:e,data1:n.tasksList})})}function u(e){k=D.update_object(k,e),I.$broadcast("scheduler_items_updated"),T()}function f(){n.month_weeks=D.load_month_weeks(n.schedulerDate)}D.load_employees(n.caseId).then(function(e){n.case_users=D.set_case_users(e.data),n.user_images=D.set_user_images(e.data)}),n.$on("refresh_schedule_items",function(e,s){s&&(k=[],n.uri=s),o()}),n.setActive=function(e,s){n.selectedDay=e,n.selectedTasksList=[]},n.isDayActive=function(e){return n.selectedDay==e&&0==n.selectedTasksList.length},n.selectUser=function(e){var s=n.selectedList.indexOf(e);-1<s?(n.selectedList.splice(s,1),function(e){k=D.remove_tasks(e,k),T()}(e)):(n.selectedList.push(e),function(s){n.scedulartaskLoder=!0,D.load_tasks([s],n.caseId,n.schedulerDate,n.view_type,null,n.uriWithParams).then(function(e){k=D.concatObjs(k,e.data),k=function(e,s){for(var t=0;t<=s.length-1;t++)s[t].EmployeeId==e&&(s[t].ishide=!1);return s}(s,k),T(),n.scedulartaskLoder=!1},function(e){n.scedulartaskLoder=!1})}(e))},n.$on("addOrRemove_employee",function(e,s){n.selectUser(s)}),n.$on("refresh_scheduler_tasks",function(e,s){"$apply"!=n.$root.$$phase&&"$digest"!=n.$root.$$phase&&n.$apply(),k=[],r(n.view_type)}),r(n.view_type),n.hoursSum=function(e){if(e){if(e.IsOverRun){e.Hours=e.Hours?y(e.Hours,"HH:mm:ss").format("HH:mm"):e.Hours,e.IsOverRunHours=e.IsOverRunHours?y(e.IsOverRunHours,"HH:mm:ss").format("HH:mm"):e.IsOverRunHours;var s=e.Hours.split(":"),t=e.IsOverRunHours?e.IsOverRunHours.split(":"):null,a=parseInt(s[0])+parseInt(t[0]),d=parseInt(s[1])+parseInt(t[1]);return 60<=d&&(a+=parseInt((d/60).toString().split(".")[0]),d-=60*parseInt((d/60).toString().split(".")[0])),a=a.toString(),d=d.toString(),(a=1==a.length?"0"+a:a)+":"+(d=1==d.length?"0"+d:d)}return e.Hours}},n.$on("save&newScheduleTask",function(e,s){"Added"==s.data.RecordStatus?"Added"!=s.data.RecordStatus||D.isTaskExist(s.data,k)||(-1===n.selectedList.indexOf(s.data.EmployeeId)&&(s.data.ishide=!0),k.push(s.data),T()):u(s.data),I.$broadcast("schedule_item_saved",{data:s.data})}),n.format=g.dateFormat,n.dateOptions={format:g.dateFormat,showWeeks:!1},n.schedulerDateOpen=!1,n.open=function(e,s){e.preventDefault(),n[s]=1!=n[s]},n.onDrop=function(e,s){n.selectedTasksList=[s],a(),l({day:e},!0),n.selectedDay=e},n.onDragStart=function(e){n.selectedTasksList=[e]},n.deleteAllTasks=function(a){S.confirmationDialog("confirm delete","Are you sure you want to delete all tasks of this date?","Ok","cancel").then(function(e){if("ok"===e){for(var s=0;s<a.length;s++)"Added"==(t=a[s]).RecordStatus?k.splice(k.indexOf(t),1):(t.RecordStatus="Deleted",t.ScheduleTaskDetailModels&&t.ScheduleTaskDetailModels.forEach(function(e){e.RecordStatus="Deleted"}),u(t)),t.RecordStatus="Deleted",I.$broadcast("schedule_item_saved",{data:t});T()}var t})}},templateUrl:"framework/scheduler/scheduler.html",scope:{caseId:"=",users:"=",caseNo:"=",isReadonly:"=",tasksList:"=",uri:"=",uriWithParams:"=",schedulerDate:"=",caseServiceId:"=",caseMembers:"=",schedulerPermissions:"=",isSchedulerType:"=",startOfWeek:"=?"},restrict:"E"}}function s(r,t,i,u,n,c,e,h,k,s,T,a){var m=this;function o(e,s){if(s)for(var t=0;t<=s.length-1;t++)e==s[t].Id&&(m.employeeobj=s[t])}function p(a,d){function l(a){if("00000000-0000-0000-0000-000000000000"==a.TaskId&&(a.Task.DefaultValue?a.Task.DefaultValue&&(a.Title=a.Task.DefaultValue):a.Title=1==a.Task.Lookups.length?a.Task.Lookups[0].Name:"","true"==m.istimesplit)){a.Hours="00:00";var e=T.getsublisttasks(m.sublisttasks,"sch");m.Timelogsdetails=[],m.Timelogsdetails.push(e)}m.scheduleTask&&(a.Remarks=m.scheduleTask.Remarks,a.StartDate=new Date(m.scheduleTask.StartDate)),a.Hours=a.Hours?moment(a.Hours,"HH:mm:ss").format("HH:mm"):a.Hours,a.IsOverRunHours=a.IsOverRunHours?moment(a.IsOverRunHours,"HH:mm:ss").format("HH:mm"):a.IsOverRunHours,a.DPBH=a.Hours?angular.copy(a.Hours):0,a.OVRH=a.IsOverRunHours?angular.copy(a.IsOverRunHours):0,a.prevempid=a.EmployeeId?angular.copy(a.EmployeeId):"",m.scheduleTask=a,m.scheduleTask.CaseId=n.caseid,m.scheduleTask.Fromdate&&(m.scheduleTask.Fromdate=moment(m.scheduleTask.Fromdate).format("DD/MM/YYYY")),m.scheduleTask.StartDate&&(m.scheduleTask.StartDate=new Date(m.scheduleTask.StartDate)),m.scheduleTask.EndDate&&(m.scheduleTask.EndDate=new Date(m.scheduleTask.EndDate)),n.date&&(m.scheduleTask.StartDate=new Date(moment(n.date,h.dateFormat.toUpperCase()).format("YYYY-MM-DD")),m.scheduleTask.EndDate=new Date(moment(n.date,h.dateFormat.toUpperCase()).format("YYYY-MM-DD"))),m.loadEmployeesFlag&&(m.scheduleTask.EmployeeId=m.loadEmployees[0].Id,o(m.scheduleTask.EmployeeId,m.loadEmployees)),"true"==m.istimesplit&&c.getpbilist(n.caseid).then(function(e){if(m.PbiLu=e.data,"00000000-0000-0000-0000-000000000000"!=n.taskid)if(m.Timelogsdetails=angular.copy(a.ScheduleTaskDetailModels),m.isedit=!1,0==m.Timelogsdetails.length){var s=T.getsublisttasks(m.sublisttasks,"sch");m.Timelogsdetails=[],m.Timelogsdetails.push(s)}else{for(var t=0;t<=m.Timelogsdetails.length-1;t++)"In Progress"!=m.Timelogsdetails[t].State&&"Done"!=m.Timelogsdetails[t].State||(m.isedit=!0),m.Timelogsdetails[t].tasknames=m.Timelogsdetails[t].CaseFeatureId.toString(),m.Timelogsdetails[t].Hours=T.getdetailhours(m.Timelogsdetails[t].Hours);m.selectedpbi=T.getsplittedpbilu(m.scheduleTask.PBIName,m.PbiLu),m.pbiselection(m.selectedpbi),m.schduledetail=angular.copy(m.Timelogsdetails)}})}"workflow.myCalender"!=s.current.name&&c.load_employees(n.caseid).then(function(e){var s=[];for(var t in n.users)s.push(n.users[t]);m.loadEmployeesFlag=1===e.data.length,m.loadEmployees=e.data,m.employees=e.data.filter(function(e){return-1!=s.indexOf(e.Id)}),c.request_task(n.taskid,n.caseServiceId).then(function(e){if(n.object){n.object.Task=e.data.Task,m.duplicateTask=angular.copy(n.object);for(var s=!1,t=0;t<=n.object.ScheduleTaskDetailModels.length-1;t++)"Added"!=n.object.ScheduleTaskDetailModels[t].RecordStatus||n.object.ScheduleTaskDetailModels[t].IsCopy||(s=!0);n.object.ScheduleTaskDetailModels=s?n.object.ScheduleTaskDetailModels:e.data.ScheduleTaskDetailModels,n.object.PBIName=n.object.PBIName,l(n.object),o(n.object.EmployeeId,m.employees)}else e.data.RecordStatus="Added",a&&(e.data.Title=a),d&&(e.data.Hours=d),l(e.data)})})}m.employeeChange=o,m.save_task=function(a){m.validateMessage=null;var e=document.getElementById("schdulediv");{if(k.validate("scheduletask").isValidationRequired)return e.scrollTop=0,void(m.validateMessage="Invalid Data, Please Verify");n.date?(m.scheduleTask.CreatedDate=new Date,m.scheduleTask.UserCreated=h.userFullName):(m.scheduleTask.ModifiedDate=new Date,m.scheduleTask.ModifiedBy=h.userFullName),m.scheduleTask.Hours=m.scheduleTask.Hours.toString(),m.scheduleTask.Hours=-1==m.scheduleTask.Hours.indexOf(".")?m.scheduleTask.Hours:m.scheduleTask.Hours.replace(".",":"),m.scheduleTask.Hours=-1==m.scheduleTask.Hours.indexOf(":")?m.scheduleTask.Hours+":00":m.scheduleTask.Hours,m.scheduleTask.IsOverRun&&(m.scheduleTask.IsOverRunHours=m.scheduleTask.IsOverRunHours.toString(),m.scheduleTask.IsOverRunHours=-1==m.scheduleTask.IsOverRunHours.indexOf(".")?m.scheduleTask.IsOverRunHours:m.scheduleTask.IsOverRunHours.replace(".",":"),m.scheduleTask.IsOverRunHours=-1==m.scheduleTask.IsOverRunHours.indexOf(":")?m.scheduleTask.IsOverRunHours+":00":m.scheduleTask.IsOverRunHours),m.scheduleTask.Type="00000000-0000-0000-0000-000000000000"==m.scheduleTask.TaskId?"new":"";var s=c.isExistingTask(m.allTasks,m.scheduleTask);if(m.scheduleTask.Hours=m.scheduleTask.Hours.trim(),0===m.scheduleTask.Hours.indexOf(":")||m.scheduleTask.IsOverRun&&0===m.scheduleTask.IsOverRunHours.indexOf(":"))return void(m.validateMessage="Invalid Time");if(0<new Date(m.employeeobj.EndDate).setHours(0,0,0,0)){if(new Date(m.scheduleTask.StartDate).setHours(0,0,0,0)<new Date(m.employeeobj.StartDate).setHours(0,0,0,0)||new Date(m.scheduleTask.StartDate).setHours(0,0,0,0)>new Date(m.employeeobj.EndDate).setHours(0,0,0,0))return void(m.validateMessage="Employee not joined")}else if(new Date(m.scheduleTask.StartDate).setHours(0,0,0,0)<new Date(m.employeeobj.StartDate).setHours(0,0,0,0))return void(m.validateMessage="Employee not joined");if("true"==m.istimesplit){m.scheduleTask.PBIName=T.pbilu(m.selectedpbi);var t=0;if(m.Timelogsdetails.forEach(function(s,e){s.EmployeeId=m.scheduleTask.EmployeeId,"Deleted"!==s.RecordStatus&&m.Timelogsdetails.filter(function(e){e.Id!==s.Id&&"Deleted"!==e.RecordStatus&&e.CaseFeatureId===s.CaseFeatureId&&t++})}),0<t)return e.scrollTop=0,!(m.validateMessage="Tasks should not be duplicate");m.scheduleTask.ScheduleTaskDetailModels=m.Timelogsdetails;var d=c.istaskalloted(n.allTasks,m.scheduleTask);if(d.isduplicate)return e.scrollTop=0,void(m.validateMessage=d.reason+" Is already assigned");var l=T.converthours(m.scheduleTask.ScheduleTaskDetailModels);m.scheduleTask.ScheduleTaskDetailModels=l}if(s)return e.scrollTop=0,void(m.validateMessage="Task not allowed.");m.duplicateTask&&(m.duplicateTask.EmployeeId===m.scheduleTask.EmployeeId&&new Date(m.duplicateTask.StartDate).setHours(0,0,0,0)===new Date(m.scheduleTask.StartDate).setHours(0,0,0,0)||(m.duplicateTask.RecordStatus="Deleted",m.scheduleTask.RecordStatus="Added"));var o=c.save_task(m.scheduleTask,n.caseid,!1,m.duplicateTask);o.then(function(e){if(u.notify.success("Saved data"),r.$broadcast("ScheduleSave",{data:e}),"new"==a){m.allTasks=c.concat_objects(m.allTasks,e.data.ScheduleTasks);var s=angular.copy(m.scheduleTask.Title),t=angular.copy(m.scheduleTask.Hours);m.scheduleTask.EmployeeId="",n.taskid=null,n.object=null,m.scheduleTask.PBIName=null,p(s,t)}else i.dismiss()}),o.error(function(e){m.validateMessage=e.Message})}},m.cancel_task=function(){i.dismiss()},m.getTimeAllowance=function(e,s){var t=s.which?s.which:s.keyCode;{if(!(31<t&&(t<48||58<t)))return!1;s.preventDefault()}},m.case=n.case,m.validateMessage=null,m.disable_fields=[],m.allTasks=[],m.allTasks=angular.copy(n.allTasks),p(),n.taskid?m.isEdit=!1:m.isEdit=!0,m.istimesplit=a.ConfigurationModel.IsTimeSplit,m.Addbackloglist=function(){var e=T.getsublisttasks(m.sublisttasks,"sch");e.EmployeeId=m.scheduleTask.EmployeeId,m.Timelogsdetails.push(e)},m.calculatetime=function(e,s){m.scheduleTask.Hours=T.detailtimesum(m.Timelogsdetails),m.modify=T.modifytime(m.Timelogsdetails[e].Id,s,m.Timelogsdetails[e].RecordStatus,m.schduledetail),m.modify&&(m.Timelogsdetails[e].RecordStatus="Modified",m.Timelogsdetails[e].ModifiedBy=h.userFullName,m.Timelogsdetails[e].ModifiedDate=new Date)},m.deletelist=function(e,s){if("Added"==s.RecordStatus){var t=c.calculateplannedhours(m.scheduleTask.Hours,s.Hours);return m.scheduleTask.Hours=t,void m.Timelogsdetails.splice(e,1)}if(1!=m.Timelogsdetails.length)if("Done"==s.State)u.notify.warning("Task cannot deleted");else if("In Progress"==s.State){var a=s.Hours.split(":");if(0<parseInt(a[0])||0<parseInt(a[1]))return void u.notify.warning("Task cannot deleted");var d=c.calculateplannedhours(m.scheduleTask.Hours,s.Hours);m.scheduleTask.Hours=d,s.RecordStatus="Deleted"}else{d=c.calculateplannedhours(m.scheduleTask.Hours,s.Hours);m.scheduleTask.Hours=d,s.RecordStatus="Deleted"}else u.notify.warning("Atleast one Task is required")},m.taskchange=function(e,s){if(m.Timelogsdetails[e].CaseFeatureId=s,m.validateMessage=null,m.Timelogsdetails[e].RecordStatus||(m.Timelogsdetails[e].RecordStatus="Modified",m.Timelogsdetails[e].ModifiedBy=h.userFullName,m.Timelogsdetails[e].ModifiedDate=new Date),1<m.Timelogsdetails.length){m.duplicateobj=[],m.duplicateobj=m.Timelogsdetails;for(var t=0;t<=m.Timelogsdetails.length-1;t++)if(1<=t){m.previousobj="Delete"==m.Timelogsdetails[t].RecordStatus?m.Timelogsdetails[t-1]:m.Timelogsdetails[t];for(var a=0;a<=m.duplicateobj.length-1;a++)if(m.designationobj=m.duplicateobj[a],m.previousobj.CaseFeatureId&&m.designationobj.CaseFeatureId&&t!==a&&m.previousobj.Id!==m.designationobj.Id&&"Delete"!==m.designationobj.RecordStatus&&m.previousobj.CaseFeatureId==m.designationobj.CaseFeatureId)return!(m.validateMessage="Tasks should not be duplicate")}}var d=T.gettaskname(s,m.pbilists.PbiList);m.Timelogsdetails[e].Name=d,m.Timelogsdetails[e].TaskName=d},m.pbiselection=function(e,s){var t={},a=[];t.id=[],e.forEach(function(e,s){a.push(e.Id)}),t.id=a,T.gettaskslist(t).then(function(e){m.taskslists=e.data,m.pbilists=T.gettasks(m.taskslists),m.Timelogsdetails=T.changepbi(m.Timelogsdetails,m.taskslists)})},m.dateplaceholder=h.dateFormat.toUpperCase(),t.format=h.dateFormat,t.dateOptions={format:h.dateFormat,class:"datepicker"},t.datePicker={startOpen:!1,endOpen:!1},t.open=function(e,s){e.preventDefault(),t.datePicker[s]=1!=t.datePicker[s]}}angular.module("scheduler").directive("schedulerModule",e).controller("scheduleTaskController",s),e.$inject=["scheduler","config","$moment","$uibModal","$rootScope","commonService","$state","serviceConfig","$stateParams"],s.$inject=["$rootScope","$scope","$uibModalInstance","commonService","options","scheduler","$moment","config","formValidate","$state","timeLogReportsFactory","companysettings"]}();
!function(){"use strict";function users_permissions(serviceConfig,commonService,config,$state,$q,$window,hidepermissions,companysettings,zStorageEnc){var icons={Add:"add-icon tool-icons",Edit:"edit-icon tool-icons",Disable:"disabled-icon tool-icons",Delete:"delete-icon tool-icons",Refresh:"refresh-icon tool-icons",SaveLayout:"savelayout-icon tool-icons",ViewHistory:"history-icon tool-icons",Void:"void-icon tool-icons",Quotation:"quotations-icon tool-icons",State:"State-icon tool-icons",CaseState:"tool-icons State-icon",CaseCancel:"cancel-icon tool-icons",Print:"print-icon tool-icons",OpportunityHistory:"reverse-quotations-icon tool-icons",Copy:"copy-icon tool-icons",Rejected:"rejected-icon tool-icons",Approved:"ok-icon tool-icons",Recommended:"tool-icons recomend-icon",OpportunityCancel:"cancel-icon tool-icons",OnHold:"datepicker-icon tool-icons",ConvertToEmployee:"convertemp-icon tool-icons",DefaultWorkProfile:"defaultwrkprofile-icon tool-icons",Approve:"ok-icon tool-icons",GenerateOrSend:"genarate-icon tool-icons",InvoiceStatus:"State-icon tool-icons",Verify:"tool-icons verified-icon",ChangeTrainingStatus:"approve-icon tool-icons",Cancel:"cancel-icon tool-icons",Preview:"preview-icon tool-icons",ChangeApprisalStatus:"approve-icon tool-icons",Generate:"download-icon tool-icons",Email:"sendemail-icon tool-icons",Review:"tool-icons reviewd-icon",Reject:"rejected-icon tool-icons",Complete:"complete-icon tool-icons",ClearFlag:"clearflag-icon tool-icons",Process:"tool-icons process-icon",ChangeClaimState:"approve-icon tool-icons",ChangeLeaveState:"approve-icon tool-icons",ForCancellation:"tool-icons forcancellation-icon",RejectedCancelled:"tool-icons approvedrejected-icon",ApprovedCancelled:"tool-icons approvedcancel-icon",Unclear:"uncleared-icon tool-icons",ForApproval:"tool-icons forapproved-icon",ExcelExport:"exportexcel-icon tool-icons",GenereateBankForm:"bankSubmission-icon tool-icons",GenereateCPFForm:"cpfSubmission-icon tool-icons",Download:"download-icon tool-icons"},service={icons:icons,load_permissions:load_permissions,permissions_obj:permissions_obj,load_tab_permissions:load_tab_permissions,load_user_permissions:load_user_permissions,isEditPermissionAccess:isEditPermissionAccess,setTabModuleDetailId:_setTabModuleDetailId,clear_savelayout:_clear_savelayout};return service;function load_permissions(e){var o=$q.defer(),i=zStorageEnc.getItem("PER_"+e.permissionKey);if(i)return o.resolve({data:i}),o.promise;e.userName=e.userName?e.userName:config.userName,e.companyId=e.companyId?e.companyId:config.companyId;var n=serviceConfig.userAccountRemoteServer+"getnewuserpermissionsfortoolbar?permissionKey="+e.permissionKey;return commonService.getEntities(n).then(function(o){return zStorageEnc.setItem("PER_"+e.permissionKey,o.data),o})}function permissions_obj(data,permissionkey){var _result=[];for(var key in"hr_runpayroll"==permissionkey&&data.Metadata.Cancel&&(data.Metadata.Cancel="False"),data.Metadata)!data.Metadata[key]||"True"!=data.Metadata[key]||hidepermissions[permissionkey]&&eval(hidepermissions[permissionkey][key])||_result.push(key);return _result}function load_tab_permissions(o){return load_permissions({userName:config.userName,permissionKey:o,companyId:config.companyId}).then(function(o){for(var e={},i=0;i<=o.data.TabModels.length-1;i++)e[o.data.TabModels[i].ScreenName]=o.data.TabModels[i].Metadata;return e})}function load_user_permissions(o){return o=o||$state.current.data.permissionKey,load_permissions({userName:config.userName,permissionKey:o,companyId:config.companyId}).then(function(o){var e={};for(var i in o.data.Metadata)e[i]=o.data.Metadata[i];for(var i in o.data.Functionality)e[i]=o.data.Functionality[i];return e})}function isEditPermissionAccess(o){return load_user_permissions(o).then(function(o){return!("False"==o.Edit||0==o.Edit||!o.Edit)})}function _setTabModuleDetailId(o,i){o=o||$state.current.data.permissionKey,load_permissions({userName:config.userName,permissionKey:o,companyId:config.companyId}).then(function(o){var e=o.data.TabModels.filter(function(o){return i=i?i.toLowerCase():null,o.ScreenName.toLowerCase()==i})[0];zStorageEnc.setItem("ModuleDetailId",e.ModuleDetailId),zStorageEnc.setSessionItem("ModuleDetailId",e.ModuleDetailId)})}function _clear_savelayout(o){o=-1===o.indexOf("?")?o:o.split("?")[0];var e=(serviceConfig.gridmetadataRemoteServer?serviceConfig.gridmetadataRemoteServer:serviceConfig.userAccountRemoteServer)+"resetLayout?url="+o;return commonService.getEntities(e)}}angular.module("appsworld").factory("users_permissions",users_permissions).value("hidepermissions",{workflow_clients:{Add:"companysettings.ClientCursor==true",Disable:"companysettings.ClientCursor==true"},workflow_cases:{Add:"companysettings.ClientCursor==true"},workflow_mycases:{Add:"companysettings.ClientCursor==true"},workflow_clientcase:{Add:"companysettings.ClientCursor==true"},workflow_invoices:{Add:"companysettings.WorkflowCursor==true"},client_opportunities:{OpportunityCancel:"companysettings.WorkflowCursor==true"}}),users_permissions.$inject=["serviceConfig","commonService","config","$state","$q","$window","hidepermissions","companysettings","zStorageEnc"]}();
!function(){"use strict";function e(c,e,o,n,t,s,i,m,u,p,d){return{restrict:"E",templateUrl:"views/common/user_permissions_tool.html",scope:{},link:function(s,e,n){s.permission_icons=m.icons,s.checkView=function(e,n,t){return"invoice"===n?-1<location.href.indexOf("#/workflow/workflow/cases"):(1!=e||"admin"==u.role)&&(!!s.permissions&&-1<s.permissions.indexOf("View")&&(!c[o.current.url]||-1==c[o.current.url].indexOf(n)))},s.permissionClick=function(e){p.$broadcast("actionHandler",e)};var t=i();function i(){return"takefromurl"===o.current.data.permissionKey&&(o.current.data.permissionKey=location.href.substring(location.href.lastIndexOf("/"),location.href.length)),{permissionKey:o.current.data.permissionKey,userName:u.userName,companyId:u.companyId}}function r(){o.current.data.permissionKey&&m.load_permissions(t).then(function(e){s.permissions=m.permissions_obj(e.data,t.permissionKey)})}function a(){t=i(),r()}r(),s.$on("refresh_user_permissions",function(){a()}),s.$on("$stateChangeSuccess",function(){"TermsOfPayments"===d.source?o.current.data.permissionKey="admin.ccsettings.ccaccounttypeterms"===o.current.name?"admin_cctermsofpayment":"admin.wfconfigurations.wfaccounttypeterms"===o.current.name?"admin_wftermsofpayment":"admin.beansettings.beanaccounttypeterms"===o.current.name?"admin_beantermsofpayment":"admin.taxsettings.taxaccounttypeterms"===o.current.name?"admin_taxtermsofpayment":"admin_tpayments":"AccountTypes"==d.source&&(o.current.data.permissionKey="admin.ccsettings.ccaccounttypeterms"===o.current.name?"admin_ccaccounttypeterms":"admin.wfconfigurations.wfaccounttypeterms"===o.current.name?"admin_wfaccounttypeterms":"admin.beansettings.beanaccounttypeterms"===o.current.name?"admin_beanaccounttypeterms":"admin.taxsettings.taxaccounttypeterms"===o.current.name?"admin_taxaccounttypeterms":"admin_acounttypes"),a()})}}}angular.module("appsworld").directive("userPermissionsTool",e).value("hidePermissions",{"/caseinvoicing":["saveLayOut","viewHistory","clearFilters","refresh"],"/mycaseinvoicing":["saveLayOut","viewHistory","clearFilters","refresh"],"/clientcaseinvoicing":["saveLayOut","viewHistory","clearFilters","refresh"],"/mytrainings":["saveLayOut","viewHistory"]}),e.$inject=["hidePermissions","$window","$state","commonService","serviceConfig","$templateCache","$http","users_permissions","config","$rootScope","$stateParams"]}();
!function(){"use strict";function e(e,t,i,o,n,a,c){var l=this;function d(){var e=c.activityRemoteServer+"getallnotifications?userName="+a.userName+"&$inlinecount=allpages&$orderby=CreatedDate desc",t=[{headerTemplate:'<div class="checkbox mb-0 mt-0"><input type="checkbox" ng-checked="vm.isOppChecked" id="chkOpp" ng-click="vm.allselection(data)" class="form-control"><label></label></div>',template:'<div class="checkbox checkboxlable"><input type="checkbox" id="{{dataItem.Id}}" ng-checked="vm.selection.indexOf(dataItem.Id) > -1" ng-click="vm.toggleSelection(dataItem.Id)"><label for=""></label></div>',width:"50px"},{headerTemplate:"User Name",field:"FromUser",width:"200px"},{headerTemplate:"Subject",field:"Subject",width:"120px"},{headerTemplate:"Description",field:"Description",width:"200px"},{headerTemplate:"Reply Count",field:"ReplyCount",width:"165px"},{headerTemplate:"Notification Date",field:"NotificationDate",template:"<lable>{{dataItem.NotificationDate |UTCtime}}</lable>",type:"date",width:"200px",format:"{0:"+a.dateFormat+"}"}];return o.setPagedGridOptions(e,t)}l.loadGrid=d,i(function(){d()},1e3),l.allselection=function(){for(var e=document.getElementById("chkOpp").checked,t=document.getElementsByClassName("form-control"),i=0;t[i];++i)if(t[i].checked){e=t[i].value;break}if(l.selection=[],l.statusselection=[],l.accountselection=[],e){var o=$("#notification").data().kendoGrid.dataSource.view();angular.forEach(o,function(e){l.selection.push(e.Id)})}},l.gridOptions=d(),console.log(l.gridOptions),l.selection=[],l.toggleSelection=function(e){var t=l.selection.indexOf(e),i=$("#notification").data().kendoGrid.dataSource.view();-1<t?(document.getElementById("chkOpp").checked=!1,l.selection.splice(t,1)):(l.selection.push(e),l.selection.length===i.length&&(document.getElementById("chkOpp").checked=!0))},l.getdelete=function(){return 0!=l.selection.length?(l.deletenotificaton={UserName:a.userName,Ids:l.selection},"Are you sure, do you want Delete the Message?","Confirm Delete",n.confirmationDialog("Confirm Delete","Are you sure, do you want Delete the Message?","ok","cancel").then(function(e){"ok"==e?t.post(c.activityRemoteServer+"task/deleteactivityNotify",l.deletenotificaton).success(function(e){l.selection=[],$("#notification").data("kendoGrid").dataSource.read()}):l.selection=[]})):void o.notify.warning("Please select  Notification")}}angular.module("notification",[]).controller("notificationController",e),e.$inject=["$scope","$http","$timeout","commonService","bootstrap.dialog","config","serviceConfig"]}();
!function(){"use strict";function e(r,t,n,o,a,e){var s=e.defer();return{load_blades:function(){var e={permissionKey:a.current.data.permissionKey,id:o.Id||o.id||null,module:window.sessionStorage.getItem("ModuleDetailId")};{if(e.permissionKey){var i=t.bladesRemoteServer+"GetBladeDetails?permissionkey="+e.permissionKey+"&companyId="+n.companyId+"&moduledetailid="+e.module+"&id="+e.id+"&role="+n.userName;return r.getEntities(i)}return s.promise}},set_blades:function(e){for(var i={},r=0;r<=e.length-1;r++)i[e[r].BladeTypeName]=e[r];return i}}}angular.module("appsworld").factory("bladesContext",e),e.$inject=["commonService","serviceConfig","config","$stateParams","$state","$q"]}();
!function(){"use strict";function t(t,e,o,a,i){var n=this;function r(){o.Analytics&&e.load_blades().then(function(t){n.bladesTypes=t.data.Blades,n.blades=e.set_blades(t.data.Blades)})}n.load_blade_template=function(e){-1==e.indexOf("BasicGraph")&&-1==e.indexOf("AdvancedGraph")&&-1==e.indexOf("ColumnChart")&&-1==e.indexOf("LineChart")||(n[e]=n.bladesTypes.filter(function(t){return t.BladeTypeName==e})[0]);return e+".html"},n.toggleModel=function(t){t.preventDefault();var e=$("#getpowerbis"),o=$("#getpowerbis").width();e.toggleClass("open"),e.hasClass("open")?e.animate({left:"0px"}):e.animate({left:-o},250)},n.screenName=function(){return-1==i.current.name.indexOf("lead")||-1!=i.current.name.indexOf("account")},r(),a.$on("load_analytics",function(){n.bladesTypes=null,n.blades=null,r()})}angular.module("appsworld").controller("bladesController",t).directive("basicGraph",[function(){return{restrict:"A",template:'<h4 style="background-color: #c7ec7c;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-pie-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="BasicGraph" style="min-width: 310px; height: 300px; max-width: 600px; margin: 0 auto;margin-bottom: 6px;box-shadow: 0 8px 6px -6px #cac6c6;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart("BasicGraph",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:"#e7f3cf"},title:{text:null},tooltip:{formatter:function(){var t=this.point;return'<span style="color:{point.color}">'+t.name+"</span>: <b>"+t.y}},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{colorByPoint:!0,data:t.options.Data}]})},50)}}}]).directive("advancedGraph",[function(){return{restrict:"E",template:'<h4 style="background-color: #f04e51;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div  id="AdvancedGraph" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#f2b9ba"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("advancedGraph1",[function(){return{restrict:"E",template:'<h4 style="background-color: #18dbea;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph1" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 9px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#c3eaed"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("advancedGraph2",[function(){return{restrict:"E",template:'<h4 style="background-color: #f9bc01;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph2" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"transparent"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("advancedGraph3",[function(){return{restrict:"E",template:'<h4 style="background-color: #dc975c;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph3" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#f8e3d1"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("advancedGraph4",[function(){return{restrict:"E",template:'<h4 style="background-color: #d9686b;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph4" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#ffdfe0"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("advancedGraph5",[function(){return{restrict:"E",template:'<h4 style="background-color: #ef9a15;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph5" style="min-width: 310px; height: 400px; margin: 0 auto"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#fad294"},title:{text:null},credits:{enabled:!1},xAxis:{type:"category",title:{text:t.options.XAxisName||t.options.BladeTypeName}},yAxis:{title:{text:t.options.YAxisName||t.options.BladeTypeName}},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:t.options.Data.MainData}],drilldown:{series:function(t){if(t)for(var e=0;e<t.length;e++)for(var o=0;o<t[e].data.length;o++)t[e].data[o][1]=parseFloat(t[e].data[o][1]);return t}(t.options.Data.SubData)}})},50)}}}]).directive("columnChart",[function(){return{restrict:"E",template:'<h4 style="background-color: #989cb3;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i> {{options.Heading}} <span style="margin-left: 13%;"></span></h4><div id="ColumnChart" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column",backgroundColor:"#d1d4e5"},title:{text:null},credits:{enabled:!1},xAxis:{categories:t.options.Data.Categories,crosshair:!0},yAxis:{min:0,title:{text:t.options.YAxisName}},tooltip:{formatter:function(){var t=this.point;return'<span style="color:{point.color}">'+t.category+"</span>: <b>"+t.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:t.options.Data.Columndata})},50)}}}]).directive("columnChart1",[function(){return{restrict:"E",template:'<h4 style="background-color: #ef9a15;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-bar-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="AdvancedGraph5" style="min-width: 310px; height: 400px; margin: 0 auto"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"column"},title:{text:null},credits:{enabled:!1},xAxis:{categories:t.options.Data.Categories,crosshair:!0},yAxis:{min:0,title:{text:t.options.YAxisName}},tooltip:{formatter:function(){var t=this.point;return'<span style="color:{point.color}">'+t.category+"</span>: <b>"+t.y}},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:t.options.Data.Columndata})},50)}}}]).directive("linesChart",[function(){return{restrict:"E",template:'<h4 style="background-color: #79ab9d;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-line-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="LineChart" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"line",backgroundColor:"transparent"},title:{text:null},xAxis:{categories:t.options.Data.Categories,title:{text:t.options.XAxisName},title:{text:null}},yAxis:{title:{text:t.options.YAxisName}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){return this.x+":"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b>"}},series:t.options.Data.LineData})},50)}}}]).directive("linesChart1",[function(){return{restrict:"E",template:'<h4 style="background-color: #35b1e8;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-line-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="LineChart1" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"line",backgroundColor:"#8ccce8"},title:{text:null},xAxis:{categories:t.options.Data.Categories,title:{text:t.options.XAxisName}},yAxis:{title:{text:t.options.YAxisName}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){return this.x+":"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b>"}},series:t.options.Data.LineData})},50)}}}]).directive("linesChart2",[function(){return{restrict:"E",template:'<h4 style="background-color: #91ca16;padding: 5px 3px 7px 4px;margin-bottom: 0px;color: #fff !important;"><i class="fa fa-line-chart" style="margin: 0px 11px;"></i>{{options.Heading}}</h4><div id="LineChart2" style="min-width: 310px; height: 400px; margin: 0 auto;box-shadow: 0 8px 6px -6px #cac6c6;margin-bottom: 6px;"></div>',scope:{options:"="},link:function(t,e,o){setTimeout(function(){Highcharts.chart(t.options.BladeTypeName,{chart:{type:"line",backgroundColor:"transparent"},title:{text:null},xAxis:{categories:t.options.Data.Categories,title:{text:t.options.XAxisName}},yAxis:{title:{text:t.options.YAxisName}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){return this.x+":"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b>"}},series:t.options.Data.LineData})},50)}}}]),t.$inject=["$rootScope","bladesContext","companysettings","$scope","$state"]}();
!function(){"use strict";function t(t,e,a,o,n,l){var s=this;function i(t,e){Highcharts.setOptions({colors:e.Data.Colors}),Highcharts.chart(t,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:"transparent"},title:{text:null},yAxis:{gridLineWidth:0},tooltip:{formatter:function(){var t=this.point;return'<span style="color:{point.color}">'+t.name+"</span>: <b>"+t.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b><br/>"}},credits:{enabled:!1},plotOptions:{pie:{size:200,allowPointSelect:!0,dataLabels:{enabled:!1},showInLegend:!0}},series:[{colorByPoint:!0,data:e.Data.data}]})}function r(t,e){Highcharts.setOptions({colors:e.Data.Colors,lang:{thousandsSep:","}}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},lang:{thousandsSep:","},title:{text:null},credits:{enabled:!1},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){function t(e,t){var a=e.point.series.options.data.filter(function(t){return e.key==t[0]});return"tooltip"==t?a[0][2]:0}var e=this.point;return e.drilldown?0==this.point.tooltip||null==this.point.tooltip?'<span style="color:{point.color}">'+e.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":#"+this.point.tooltip+"</span>-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0==t(this,"tooltip")||null==t(this,"tooltip")?'<span style="color:{point.color}">'+e.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":#"+t(this,"tooltip")+"-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:e.Data.Data.MainData}],drilldown:{series:e.Data.Data.SubData}})}function p(t,e){Highcharts.setOptions({colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"line",backgroundColor:"transparent"},title:{text:null},xAxis:{className:"highcharts-color-0",categories:e.Data.Data.Categories,title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.point;return 0==this.point.ToolTip||null==this.point.ToolTip?'<span style="color:{point.color}">'+this.x+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+this.x+"</span>: <b>#"+this.point.ToolTip+"</b> - $"+t.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:e.Data.Data.Data})}function d(t,e){Highcharts.setOptions({lang:{thousandsSep:","},colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},lang:{thousandsSep:","},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){var t=this.point;return 0==t.tooltip?'<span style="color:{point.color}">'+t.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+t.name+":#"+this.point.tooltip+"</span>-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:e.Data.Data.MainData}]})}function c(t,r){Highcharts.setOptions({lang:{drillUpText:"< Back to",thousandsSep:","},colors:r.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent",events:{drilldown:function(t){if(!t.seriesOptions){var e=this,a=r.Data.Data.drilldown,o=r.Data.Data.drilldown2,n=r.Data.Data.drilldown3,l=a[t.point.name],s=o[t.point.name],i=n[t.point.name];e.addSingleSeriesAsDrilldown(t.point,l),e.addSingleSeriesAsDrilldown(t.point,s),e.addSingleSeriesAsDrilldown(t.point,i),e.applyDrilldown()}}}},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:r.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:r.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},tooltip:{formatter:function(){function t(e,t){var a=e.point.series.options.data.filter(function(t){return e.key==t[0]});return("tooltip1"==t?a[0][2]:a[0][3]).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"<br/>"}var e=this.point;return e.drilldown?'<span style="color:{point.color}">'+e.name+":"+this.point.y+":"+this.point.tooltip1+"</span>-$"+this.point.tooltip2.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":"+this.point.y+":"+t(this,"tooltip1")+"-$"+t(this,"tooltip2")}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal"},series:{borderWidth:0,dataLabels:{enabled:!0,style:{textShadow:!1,"font-weight":"bold",fontSize:"0.9vw",color:"#003399",fill:"#003399",stroke:"#003399"},format:"{point.y:,.0f}"}}},series:r.Data.Data.MainData,drilldown:{series:[]}})}function h(t,e){Highcharts.setOptions({lang:{drillUpText:"< Back to",thousandsSep:","},colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},credits:{enabled:!1},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+":"+this.point.y+":"+this.point.tooltip1+"</span>-$"+this.point.tooltip2.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},plotOptions:{column:{stacking:"normal"},series:{borderWidth:0,dataLabels:{enabled:!0,style:{textShadow:!1,fontSize:"1vw"},format:"{point.y:,.0f}"}}},series:e.Data.Data.MainData})}function g(t,e){Highcharts.setOptions({colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},title:{text:null},credits:{enabled:!1},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:e.Data.Data.MainData})}function u(t){t.preventDefault();var e=$("#getreportOthers"),a=$("#getreportOthers").width();e.toggleClass("open"),e.hasClass("open")?e.animate({left:"0px"}):e.animate({left:-a},250)}function b(t){t.preventDefault();var e=$("#getpowerbis"),a=$("#getpowerbis").width();e.toggleClass("open"),e.hasClass("open")?e.animate({left:"0px"}):e.animate({left:-a},250)}s.advList=[],s.load_powerbis=function(t,e,a){if(e){document.getElementById("myModalLabel").innerHTML=a+" DashBoard",b(t);var o=e,n=new XMLHttpRequest;n.open("GET",o,!0,"smartcursors","Precursor@456"),n.withCredentials=!0,n.send(),document.getElementById("powerbi").setAttribute("src",o)}},s.toggleModel=b,s.load_reportOthers=function(t,e,a){document.getElementById("reportName").innerHTML=a+" Report",u(t);var o=e,n=new XMLHttpRequest;n.open("GET",o,!0,"awdbu1","Welcome@123"),n.withCredentials=!0,n.send(),document.getElementById("reportothers_id").setAttribute("src",o)},s.reportOthers1=u,o.$on("load_analytics",function(){s.bladesTypes=null,s.blades=null,s.kpiColorVM=s.kpi=s.kpiAdavanced=s.stkColumnGraph=s.aGraph=s.bGraph=s.lGraph=s.cGraph=s.bCdrilldownGraph=s.stkdrilldownGraph=s.reportOthers=s.dashboardOthers=s.others=!1,s.kpiCount=0,s.aCount=0,s.bCount=0,s.lCount=0,s.bdCount=0,s.stkCount=0,s.stkclmCount=0,s.chCount=0,a.Analytics&&e.load_blades().then(function(t){s.bladesTypes=t.data.Blades,s.PowerBiURL=t.data.PowerBiURL;for(var e=0;e<s.bladesTypes.length;e++){var a=s.bladesTypes[e].BladeTypeName;switch(a){case"KPI":a=s.bladesTypes[e].BladeTypeName+s.kpiCount,s.kpi=!0,"KPI0"==a?$("#KPI").html(s.bladesTypes[e].Data):$("#KPI").append(s.bladesTypes[e].Data),s.kpiCount++;break;case"KpiAdvanced":a=s.bladesTypes[e].BladeTypeName,s.kpiAdavanced=!0,$("#KpiAdvanced").html(s.bladesTypes[e].Heading);break;case"HCPie":a=s.bladesTypes[e].BladeTypeName+s.bCount,s.bGraph=!0,"HCPie0"==a?$("#bGraph").html(s.bladesTypes[e].Heading):$("#bGraph").append(s.bladesTypes[e].Heading),i(a,s.bladesTypes[e]),s.bCount++;break;case"HCColumnDrillDown":a=s.bladesTypes[e].BladeTypeName+s.aCount,s.aGraph=!0,"HCColumnDrillDown0"==a?$("#aGraph").html(s.bladesTypes[e].Heading):$("#aGraph").append(s.bladesTypes[e].Heading),r(a,s.bladesTypes[e]),s.aCount++;break;case"HCColumn":a=s.bladesTypes[e].BladeTypeName+s.chCount,s.cGraph=!0,"HCColumn0"==a?$("#cGraph").html(s.bladesTypes[e].Heading):$("#cGraph").append(s.bladesTypes[e].Heading),d(a,s.bladesTypes[e]),s.chCount++;break;case"HCLine":a=s.bladesTypes[e].BladeTypeName+s.lCount,s.lGraph=!0,"HCLine0"==a?$("#lGraph").html(s.bladesTypes[e].Heading):$("#lGraph").append(s.bladesTypes[e].Heading),p(a,s.bladesTypes[e]),s.lCount++;break;case"HCBasicColumn":a=s.bladesTypes[e].BladeTypeName+s.bdCount,s.bCdrilldownGraph=!0,"HCBasicColumn0"==a?$("#bcGraph").html(s.bladesTypes[e].Heading):$("#bcGraph").append(s.bladesTypes[e].Heading),g(a,s.bladesTypes[e]),s.bdCount++;break;case"HCStackedColumnDrillDown":a=s.bladesTypes[e].BladeTypeName+s.stkCount,s.stkdrilldownGraph=!0,"HCStackedColumnDrillDown0"==a?$("#stkGraph").html(s.bladesTypes[e].Heading):$("#stkGraph").append(s.bladesTypes[e].Heading),c(a,s.bladesTypes[e]),s.stkCount++;break;case"HCStackedColumn":a=s.bladesTypes[e].BladeTypeName+s.stkclmCount,s.stkColumnGraph=!0,"HCStackedColumn0"==a?$("#stkclmnGraph").html(s.bladesTypes[e].Heading):$("#stkclmnGraph").append(s.bladesTypes[e].Heading),h(a,s.bladesTypes[e]);break;case"Others":s.others=!0,s.reportOthers=s.bladesTypes[e].Data.Reports,s.dashboardOthers=s.bladesTypes[e].Data.DashBoards}}})})}angular.module("appsworld").controller("bladesController1",t),t.$inject=["$rootScope","bladesContext","companysettings","$scope","$state","config"]}();
!function(){"use strict";var e=angular.module("appsworld");function r(p,i,l){var t=[{Id:1,Name:"Tax Invoice",Description:"Tax Invoice Description",Modified:"5/6/2017",Location:"Madhu's OneDrive",Type:"images/Word-color_16x16x32.png"},{Id:2,Name:"Monthly Invoice",Description:"Monthly Invoice Description",Modified:"6/6/2017",Location:"imran's OneDrive",Type:"images/Excel-color_16x16x32.png"},{Id:3,Name:"Audit Invoice",Description:"Audit Invoice Description",Modified:"7/6/2017",Location:"Nagendra's OneDrive",Type:"images/Word-color_16x16x32.png"},{Id:4,Name:"Company Invoice",Description:"Company Invoice Description",Modified:"8/6/2017",Location:"Naresh's OneDrive",Type:"images/Excel-color_16x16x32.png"}];return{get_folder_structure:function(e){var r=i.admincommonRemoteServer+"getdocmoduledetails?moduleName="+app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor";return l.getEntities(r)},is_folder_exist:f,createFolder:function(){return{Id:"000000000000000000000000",ParentId:"",Name:null,IsFolder:!0,IsSystem:!1,CreatedBy:p.userFullName,CreatedDate:new Date,FilePath:"Null",FileSize:"",FileType:"Null",ModifiedDate:null,ModifiedBy:null,RecordId:null,RecordName:null,TableName:null,CompanyId:p.companyId,Details:null,Status:"Active"}},getFiles:function(e){var r={ReferenceId:e.Id,RecordId:e?e.RecordId:null,FeatureId:e?e.FeatureId:null,ScreenName:"",CursorName:app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",Type:null},n=i.docnewServer+"getmongodbfiles";return l.saveEntity(n,r)},saveFolder:function(e){"000000000000000000000000"==e.Id?(e.UserCreated=p.userFullName,e.CreatedDate=new Date,e.Status="Active"):(e.ModifiedBy=p.userFullName,e.ModifiedDate=new Date,e.Status=e.Status?e.Status:"Active");e.ModuleName=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor";var r=e.IsFolder?i.docnewServer+"savefoldersdata":i.docnewServer+"fileupload";return e=e.IsFolder?e:[e],l.saveEntity(r,e)},getFolders:function(e,r,n,t,a){var d={ReferenceId:null,RecordId:null,FeatureId:null,ScreenName:null,CursorName:app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",Type:null,TabName:null};"Tab"==t&&0==n.length?(d.ReferenceId=null,d.RecordId=e,d.FeatureId=e,d.TabName=r):"Screen"!=t||e.ReferenceId?"Tails"==t&&0==n.length?(d.ReferenceId=null,d.RecordId=a,d.FeatureId=e,d.TabName=r):(d.ReferenceId=e.Id,d.RecordId=e.RecordId,d.FeatureId=e.FeatureId,d.TabName=e.TabName):(d.ReferenceId=null,d.RecordId=null,d.FeatureId=null,d.TabName=r);var o=i.docnewServer+"getfolderdata";return l.saveEntity(o,d)},deleteFolderOrFile:function(e){var r=i.docnewServer+"deletefilesandfolders",n={Id:e.Id||e.ReferenceId||e.FileId,IsFolder:e.IsFolder,CompanyId:p.companyId};return l.saveEntity(r,[n])},file_extnts:{bmp:"bmp",gif:"gif",ico:"ico",jpeg:"jpeg",xls:"xls",accdb:"accdb",txt:"txt",odt:"odt",ods:"ods",odp:"odp",svg:"svg",pdf:"pdf",rtf:"rtf",pub:"pub",jpg:"jpg",ppt:"ppt",pptx:"pptx",zip:"zip",png:"png",xlsx:"xlsx",doc:"doc",docx:"docx"},downloadFile:function(e){if(e.IsFolder)window.open(i.docnewServer+"folderdownload?id="+e.Id+"&companyId="+p.companyId+"&folderName="+e.Name,"_blank");else window.open(i.docnewServer+"getmongodbfile?id="+e.FileId,"_blank")},downloadFileaszip:function(e){window.open(i.docnewServer+"folderdownload?id="+e.Id+"&companyId="+p.companyId+"&folderName="+e.Name,"_blank")},gettailgriddata:function(e,r,n){e="new"==e?"00000000-0000-0000-0000-000000000000":e;var t=i.docnewServer+"gettailbyentityid?tabName="+r+"&referenceID="+e+"&featureId="+n;return l.getEntities(t)},deletefile:function(e){for(var r=null,n=0;n<t.length;n++)t[n].Id==e.Id&&(r=n);return t.splice(r,1),t},searchFiles:function(e,r,n){var t=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor";r=r||null;var a={ModuleName:t,FolderId:n,SearchBy:e=e||null},d=i.docnewServer+"newsearchbyfilename1";return l.saveEntity(d,a)},getTabFiles:function(e,r,n,t){var a=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",d={ReferenceId:"Tab"==t&&0==n.length?null:data.Id,RecordId:"Tab"==t&&0==n.length?e:data.RecordId,FeatureId:"Tab"==t&&0==n.length?e:data.FeatureId,ScreenName:null,CursorName:a,Type:null,TabName:"Tab"==t&&0==n.length?r:data.TabName},o=i.docnewServer+"getTabs";return l.saveEntity(o,d)},getActivities:function(e){var r=i.docnewServer+"getsnapshort?referenceId="+e;return l.getEntities(r)},getComments:function(e){var r=i.docnewServer+"getcomments?fileid="+e;return l.getEntities(r)},getBreadcrumb:function(e,r){var n=i.docnewServer+"getbreadcrumb?folderId="+e+"&cursorName="+r;return l.getEntities(n)},getFileView:function(e){var r=i.docnewServer+"fileview?fileId="+e;return l.getEntities(r)},saveFiles:function(e){return l.saveEntity(i.docnewServer+"fileupload",e)},folderUpload:function(e){"000000000000000000000000"==e[0].Id?e[0].CreatedBy=p.userFullName:e[0].ModifiedBy=p.userFullName;return l.saveEntity(i.docnewServer+"folderorfile",e)},load_BreadCrumb:function(e){return e.Id=e.ReferenceId?e.Id:"",l.getEntities(i.docnewServer+"getbreadcrumb?folderId="+e.Id+"&cursorName="+app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor")},savedFolder:function(e,r,n,t,a,d){e.IsFolder&&"folder"==r&&("Tab"==t&&0==n.length?(e.ReferenceId=null,e.FeatureId=a,e.RecordId=a):"Tails"==t&&0==n.length?(e.RecordStatus="Added",e.ReferenceId=null,e.FeatureId=a,e.RecordId=d):(e.RecordStatus="Added",e.ReferenceId=n[n.length-1].Id,e.FeatureId=n[n.length-1].FeatureId,e.RecordId=n[n.length-1].RecordId));return e},getuploadedfiles:function(e,r,n,t,a,d,o,i){for(var l=[],u=0;u<e.length;u++){var c="000000000000000000000000"==e[u].Id?"000000000000000000000000":e[u].Id,s={Id:c,Name:e[u].FileName?e[u].FileName:e[u].Name,FileExt:e[u].MediaType,FileId:e[u].FileId,Description:d,RecordStatus:e[u].RecordStatus?e[u].RecordStatus:"Added",IsSystem:!1,IsFolder:!1,ReferenceId:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].Id:null,RecordId:"Tab"==n&&0==t.length?r:"Tails"==n&&0==t.length?i:t[t.length-1].RecordId,FeatureId:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].FeatureId:r,TabName:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].TabName:a,Status:"Active",FileSize:e[u].Length,CompanyId:p.companyId,CreatedBy:p.userFullName,CreatedDate:new Date,ModifiedDate:null,ModifiedBy:p.userFullName,IsMyDrive:!1,ModuleName:e.ModuleName};f(o,s.Id)||l.push(s)}return l},getfolderfiles:function(e,r,n,t,a,d){for(var o in e)e[o].RecordStatus="Added",e[o].FileSize=e[o].Length,e[o].FileExt=e[o].MediaType,e[o].IsMyDrive=!1,e[o].TabName="Tab"!=r&&"Tails"!=r||0!=n.length?n[n.length-1].TabName:d,e[o].FeatureId="Tab"!=r&&"Tails"!=r||0!=n.length?n[n.length-1].FeatureId:t,e[o].RecordId="Tab"==r&&0==n.length?t:"Tails"==r&&0==n.length?a:n[n.length-1].RecordId,e[o].ModuleName=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",-1<e[o].FileName.indexOf("/")?e[o].Name=e[o].FileName.split("/")[1]:e[o].Name=e[o].FileName;return e},getFileslist:function(e){var r=[];for(var n in e){var t=0;for(var a in e[n].webkitRelativePath)"/"==e[n].webkitRelativePath[a]&&(t+=1);1==t&&r.push(e[n])}return r},getTilesfilesInAdd:function(e,r,n,t,a,d,o,i){for(var l=o,u=0;u<e.length;u++){var c="000000000000000000000000"==e[u].Id?"000000000000000000000000":e[u].Id,s={Id:c,Name:e[u].FileName?e[u].FileName:e[u].Name,FileExt:e[u].MediaType,FileId:e[u].FileId,Description:d,RecordStatus:e[u].RecordStatus?e[u].RecordStatus:"Added",IsSystem:!1,IsFolder:!1,ReferenceId:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].Id:null,RecordId:"Tab"==n&&0==t.length?r:"Tails"==n&&0==t.length?i:t[t.length-1].RecordId,FeatureId:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].FeatureId:r,TabName:"Tab"!=n&&"Tails"!=n||0!=t.length?t[t.length-1].TabName:a,Status:"Active",FileSize:e[u].Length?parseFloat(.0009765625*e[u].Length).toFixed(0):e[u].Length,CompanyId:p.companyId,CreatedBy:p.userFullName,CreatedDate:new Date,ModifiedDate:null,ModifiedBy:p.userFullName,IsMyDrive:!1,ModuleName:e.ModuleName};f(o,s.Id)||l.push(s)}return l}};function f(e,r){return 0!=e.filter(function(e){return r=""==r?null:r,e.Id===r}).length}}e.factory("doc.sys.context",r),e.filter("foldername",[function(){return function(e){return e&&18<e.length?e.substring(0,18)+"...":e}}]),r.$inject=["config","serviceConfig","commonService"]}();
!function(){"use strict";function e(){return{templateUrl:"documents/documenttail.html",bindToController:!0,controller:t,controllerAs:"vm",link:function(t,e,a,i){t.$watch(a.tabName,function(e){t.vm.activate(e)})},scope:{tabName:"=?",featureid:"=?",refid:"=?"}}}function t(t,a,i){var o=this;o.getFileExt=function(e){if(e.FilePath){if(o.fileext=e.FilePath.split(".").pop(),e.Isfolder)return"fa fa-folder-open";o.fileext.toLowerCase();return o.fileext+"-list-icon"}},o.deleteFile=function(t){a.deleteFolderOrFile(t).then(function(e){t.Status="Inactive",o.activate()},function(e){i.notify.warning(e.data.Message)})},o.listViewIcons={txt:"fa fa-file-text",pdf:"fa fa-file",docx:"fa fa-file-word-o",ods:"fa fa-file-word-o",png:"fa fa-file-image-o",jpg:"fa fa-file-image-o",jpeg:"fa fa-file-image-o",ppt:"fa fa-file-powerpoint-o",xlsx:"fa fa-file-excel-o",odt:"fa fa-file-excel-o",xls:"fa fa-file-excel-o"},o.activate=function(e){a.gettailgriddata(o.refid,o.tabName).then(function(e){o.tailgriddata=e.data}),t.$on("tailsData",function(e,t){a.gettailgriddata(t.refid,o.tabName).then(function(e){o.tailgriddata=e.data})})}}angular.module("appsworld").directive("documentTail",e),e.$inject=[],angular.module("appsworld").controller("Controller",t),t.$inject=["$scope","doc.sys.context","commonService"]}();
!function(){"use strict";angular.module("appsworld").directive("mainDocument",e).controller("ActivityCtrl",r).controller("CommentCtrl",a).controller("NewmodalCtrl",d);function e(){return{templateUrl:"documents/documents.html",bindToController:!0,controller:o,controllerAs:"vm",link:function(o,e,r,d){o.$watch(r.refid,function(e){o.vm.activate()})},scope:{refid:"=?",grpName:"=?",tabName:"=?",screenType:"=?",recordId:"=?",isAdd:"=?",addTailsattachments:"="}}}function o(o,r,d,a,t,e,l,n,s,i,c,f,u){var m=this;function p(e){if(m.selectedfolder={},m.selectedFileorFolderId="","Tails"!=m.screenType&&window.scroll(0,0),m.Filesobj=[],c.is_folder_exist(m.bread_crumb,e.Id)||(m.bread_crumb.push(e),b()),m.folders=e.Details,m.folders)for(var o=0;o<m.folders.length;o++)m.folders[o].IsFolder||"Doc Repo"==m.folders[o].Source&&m.folders.splice(o);m.folders=m.folders?m.folders:[],i.referenceid=e._id,c.getFolders(e,m.tabName,m.bread_crumb,m.screenType,m.recordId).then(function(e){if(m.newfoldersdata=e.data,m.newfoldersdata)for(var o=0;o<m.newfoldersdata.length;o++)c.is_folder_exist(m.folders,m.newfoldersdata[o].Id)||m.folders.push(m.newfoldersdata[o])}),"Tab"==m.screenType&&0==m.bread_crumb.length?c.getTabFiles(m.refid,m.tabName,m.bread_crumb,m.screenType).then(function(e){if(m.files=e.data,0!=m.files.length)for(var o=0;o<m.files.length;o++)m.files[o].FileExt=m.files[o].Name.split(".").pop(),c.is_folder_exist(m.folders,m.files[o].Id)||m.folders.push(m.files[o])}):1<=m.bread_crumb.length&&("Screen"==m.screenType&&1==m.bread_crumb.length||c.getFiles(e).then(function(e){if(m.files=e.data,0!=m.files.length)for(var o=0;o<m.files.length;o++)m.files[o].FileExt=m.files[o].Name.split(".").pop(),c.is_folder_exist(m.folders,m.files[o].Id)||m.folders.push(m.files[o])}))}function b(){m.dupBreadcrumb=angular.copy(m.bread_crumb),m.breadcrumblastTwoFolders=[],m.exceptlastTwofolders=[],2<m.bread_crumb.length?(m.exceptlastTwofolders=m.bread_crumb.slice(0,m.bread_crumb.length-2),m.breadcrumblastTwoFolders=m.bread_crumb.splice(m.bread_crumb.length-2,2),m.bread_crumb=m.dupBreadcrumb):m.breadcrumblastTwoFolders=m.bread_crumb}function h(){m.folders=[],c.getFolders(m.refid,m.tabName,m.bread_crumb,m.screenType,m.recordId).then(function(e){if(m.newfoldersdata=e.data,m.newfoldersdata)for(var o=0;o<m.newfoldersdata.length;o++)c.is_folder_exist(m.folders,m.newfoldersdata[o].Id)||m.folders.push(m.newfoldersdata[o])}),"Tab"==m.screenType&&0==m.bread_crumb.length?c.getTabFiles(m.refid,m.tabName,m.bread_crumb,m.screenType).then(function(e){if(m.files=e.data,0!=m.files.length)for(var o=0;o<m.files.length;o++)m.files[o].FileExt=m.files[o].Name.split(".").pop(),c.is_folder_exist(m.folders,m.files[o].Id)||m.folders.push(m.files[o])}):"Tails"==m.screenType&&0==m.bread_crumb.length?c.gettailgriddata(m.recordId,m.tabName,m.refid).then(function(e){if(m.files=e.data,0!=m.files.length)for(var o=0;o<m.files.length;o++)m.files[o].FileExt=m.files[o].Name.split(".").pop(),c.is_folder_exist(m.folders,m.files[o].Id)||m.folders.push(m.files[o])}):"Screen"==m.screenType&&1==m.bread_crumb.length||c.getFiles(m.refid).then(function(e){if(m.files=e.data,0!=m.files.length)for(var o=0;o<m.files.length;o++)m.files[o].FileExt=m.files[o].Name.split(".").pop(),c.is_folder_exist(m.folders,m.files[o].Id)||m.folders.push(m.files[o])})}function I(){0!=m.bread_crumb.length||"Tab"!=m.screenType&&"Tails"!=m.screenType?p(m.bread_crumb[m.bread_crumb.length-1]):h()}function g(r){d.confirmationDialog("Confirm Delete ?","Are you sure do you really want to delete?","Ok","Cancel").then(function(e){if("ok"!=e)return Promise.resolve(e);if(m.isAdd){for(var o in m.folders)m.folders[o].Id==r.Id&&m.folders.splice(o,1);m.addTailsattachments=angular.copy(m.folders)}else c.deleteFolderOrFile(r).then(function(e){r.Status="Inactive",d.notify.success(r.IsFolder?"Folder Deleted Successfully":"File Deleted Successfully")},function(e){d.notify.warning(e.data.Message)})})}function y(o,e,r){m.checkFolderName===o.Name?o.IsRename=!1:""==(o=o=c.savedFolder(o,e,m.bread_crumb,m.screenType,m.refid,m.recordId)).Name?d.notify.warning(o.IsFolder?"Folder is required":"File Name is required"):c.saveFolder(o).then(function(e){o.IsRename=!1,d.notify.success(o.IsFolder?"Folder "+r+" Successfully":"File Renamed Successfully"),I()},function(e){d.notify.warning(e.data.Message)})}function w(e){m.selectedfolder={},e.IsRename=!0,m.Description=e.Description,m.checkFolderName=e.Name,e.RecordStatus="Rename",m.selectedItem=e,m.selectedFileorFolderId=e.Id,m.selectedfolder=e}function F(e){m.cursor=app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",0==m.bread_crumb.length&&"Screen"==m.screenType?m.id="":0!=m.bread_crumb.length||"Tab"!=m.screenType&&"Tails"!=m.screenType?m.id=m.bread_crumb[m.bread_crumb.length-1].Id:m.id=m.refid,e&&(m.isSearch=!0)}m.bread_crumb=[],m.selectedfolder={},m.isNewFolder=!1,m.searchby="",m.getFileExtImg=function(e){var o=e.FileExt.toLowerCase();return c.file_extnts[o]?c.file_extnts[o]:"default"},m.getTitle=function(e){return e.IsFolder?"Created on "+l(e.CreatedDate).format(o.dateFormat.toUpperCase()):"Uploaded on "+l(e.CreatedDate).format(o.dateFormat.toUpperCase())},m.getLength=function(){return m.folders?m.folders.filter(function(e){return"Inactive"!==e.Status}).length:0},m.toggleActiveClass=function(e,o){m.selectedfolder={},$("#folder_view").find(".folder-selected").removeClass("folder-selected"),$(e.currentTarget).addClass("folder-selected"),m.selectedFileorFolderId=o.Id,m.selectedfolder=o},m.selectedItem=null,m.load_folder=p,m.load_folder_byBreadCrumb=function(e){for(var o=0;o<m.bread_crumb.length;o++)m.bread_crumb[o].Id==e.Id&&m.bread_crumb.splice(o+1,m.bread_crumb.length-1);b(),p(e)},m.set_base=function(){if(m.bread_crumb=[],m.exceptlastTwofolders=[],m.breadcrumblastTwoFolders=[],"Screen"==m.screenType){m.folders=m.documents;for(var e=0;e<=m.folders.length;e++)m.folders[e].ModuleDetailId==f.getSessionItem("ModuleDetailId")&&p(m.folders[e])}else"Tab"!=m.screenType&&"Tails"!=m.screenType||(m.folders=[],h())},m.view_type="Tails"==m.screenType?"list_view":"grid_view",m.onClickedOutside=function(){m.clickRename||(m.selectedfolder={},m.selectedItem&&m.selectedItem.hasOwnProperty("IsRename")&&(m.selectedItem.IsRename=!1),m.selectedItem={},m.selectedFileorFolderId="",$("#folder_view").find(".folder-selected").removeClass("folder-selected"),$(".angular-bootstrap-contextmenu").find("ul").hasClass("dropdown-menu")&&$(".angular-bootstrap-contextmenu").find("ul").remove(".dropdown-menu"));m.clickRename=!1},m.showLoader=!0,m.getFileExt=function(e){if(e.IsFolder)return"fa fa-folder-open";return e.FileExt.toLowerCase()+"-list-icon"},m.clickFolder=function(e){m.selectedfolder={},m.selectedFileorFolderId=e.Id,m.selectedfolder=e},m.getfolderandfiles=h,m.deleteFolderOrFile=g,m.RenameFile=w,m.newfoldersdata1=[],m.refreshFolder=I,m.load_BreadCrumb=function(o){f.setSessionItem("ModuleDetailId",o.ModuleDetailId),c.load_BreadCrumb(o).then(function(e){m.bread_crumb=[],m.bread_crumb=e.data,b(),p(o)})},m.Foldersave=y,m.addnewfolder=function(){m.addmodal("Individual","Newupload","file")},m.filesPicked=function(e){m.addmodal("Individual","FolderUpload",e)},m.clickRename=!1,m.FileorFolderRename=function(e){if(13===event.charCode){if(47===event.charCode||92===event.charCode||58===event.charCode||42===event.charCode||63===event.charCode||34===event.charCode||60===event.charCode||62===event.charCode||124===event.charCode)return d.notify.warning('A file name cant contain any of the following characters: /:?*|<>"',""),!1;e.RecordStatus="Rename",e.Description=e.Description,y(e,e.IsFolder?"folder":"file","Renamed")}{if(47===event.charCode||92===event.charCode||58===event.charCode||42===event.charCode||63===event.charCode||34===event.charCode||60===event.charCode||62===event.charCode||124===event.charCode)return d.notify.warning('A file name cant contain any of the following characters: /:?*|<>"',""),!1;e.Description=e.Description,e.RecordStatus="Rename"}},m.onClearContextMenu=function(){$(".angular-bootstrap-contextmenu").find("ul").hasClass("dropdown-menu")&&$(".angular-bootstrap-contextmenu").find("ul").remove(".dropdown-menu")},m.isShowData=!0,m.closesidepanel=!0,m.isHide=!1,m.fileRename=function(e){if(e.IsFolder)m.Foldersave(e,"folder","Renamed");else if(e.IsFolder||m.isAdd){for(var o in m.folders)m.folders[o].Id==e.Id&&(m.folders[o].Name=e.Name,m.folders[o].RecordStatus="Added",m.folders[o].IsRename=!1);m.addTailsattachments=angular.copy(m.folders)}else m.Foldersave(e,"file","Renamed")},m.listViewIcons={txt:"fa fa-file-text",pdf:"fa fa-file",docx:"fa fa-file-word-o",ods:"fa fa-file-word-o",png:"fa fa-file-image-o",jpg:"fa fa-file-image-o",jpeg:"fa fa-file-image-o",ppt:"fa fa-file-powerpoint-o",xlsx:"fa fa-file-excel-o",odt:"fa fa-file-excel-o",xls:"fa fa-file-excel-o"},m.activate=function(e){"Tails"!=m.screenType&&window.scroll(0,0),"Screen"==m.screenType?(m.childloader=!0,c.get_folder_structure().then(function(e){m.documents=e.data.ModuleDetails,m.folders=m.documents,m.isSelected=m.folders[0].Heading,m.documents.forEach(function(e){e.List=[],e.IsCollapse=!0,e.Name=e.Heading,e.ReferenceId=e.ParentId,e.ModuleDetailId=e.Id}),f.setSessionItem("ModuleDetailId",m.folders[0].Id),p(m.folders[0]),m.childloader=!1})):"Tab"!=m.screenType&&"Tails"!=m.screenType||h(),a.$on("loaddocumentsData",function(e,o){h()})},a.expandNode=function(d,e){f.setSessionItem("ModuleDetailId",d.ModuleDetailId),m.childloader=!0,d.IsCollapse?c.getFolders(d,m.tabName,m.bread_crumb,m.screenType,m.recordId).then(function(e){for(var o in m.newfoldersdata1=e.data,d.List=[],m.newfoldersdata1){var r={ModuleDetailId:d.ModuleDetailId,PermissionKey:d.PermissionKey,Id:m.newfoldersdata1[o].Id,ReferenceId:m.newfoldersdata1[o].ReferenceId,Heading:m.newfoldersdata1[o].Name,Name:m.newfoldersdata1[o].Name,CompanyId:m.newfoldersdata1[o].CompanyId,IsFolder:m.newfoldersdata1[o].IsFolder,IsMyDrive:m.newfoldersdata1[o].IsMyDrive,IsSystem:m.newfoldersdata1[o].IsSystem,CreatedBy:m.newfoldersdata1[o].CreatedBy,CreatedDate:m.newfoldersdata1[o].CreatedDate,ModifiedDate:m.newfoldersdata1[o].ModifiedDate,ModifiedBy:m.newfoldersdata1[o].ModifiedBy,ModuleName:m.newfoldersdata1[o].ModuleName,Status:m.newfoldersdata1[o].Status,FileOrfoldersize:m.newfoldersdata1[o].FileOrfoldersize,RecordStatus:m.newfoldersdata1[o].RecordStatus,Description:m.newfoldersdata1[o].Description,Data:m.newfoldersdata1[o].Data,Files:m.newfoldersdata1[o].Files,Permissions:m.newfoldersdata1[o].Permissions,RecordId:m.newfoldersdata1[o].RecordId,Type:m.newfoldersdata1[o].Type,IsCollapse:!0,List:[]};d.List.push(r)}d.IsCollapse=!1,m.childloader=!1}):(d.IsCollapse=!0,m.childloader=!1)},m.getActivities=function(e){m.showLoader=!1,u.open({templateUrl:"Activity.html",controller:"ActivityCtrl",controllerAs:"vm",backdrop:"static",size:"md",resolve:{options:function(){return{id:e}}}}).result.then(function(e){m.showLoader=!0})},m.addmodal=function(e,o,r){m.showLoader=!1,u.open({templateUrl:"Addmodal_popup.html",controller:"NewmodalCtrl",controllerAs:"vm",backdrop:"static",size:"md",resolve:{options:function(){return{breadcrumb:m.bread_crumb,refid:m.refid,groupname:m.grpName,folders:m.folders,tab:m.screenType,tabName:m.tabName,recordId:m.recordId,Popuptype:e,Actiontype:o,Data:r,isAdd:m.isAdd,addTailsattachments:m.addTailsattachments}}}}).result.then(function(e){e&&(m.isAdd?(m.addTailsattachments=e,m.folders=angular.copy(m.addTailsattachments)):(I(),m.showLoader=!0))})},m.permissionclick=function(e,o){"Download"==e&&(m.clickRename=!0,c.downloadFile(o)),"Delete"==e&&g(o)},m.contextMenuOptions=function(e){return m.isShowData=!1,m.selectedfolder=e,$("#folder_view").find(".folder-selected").removeClass("folder-selected"),m.selectedFileorFolderId=e.Id,$(".angular-bootstrap-contextmenu").find("ul").hasClass("dropdown-menu")&&$(".angular-bootstrap-contextmenu").find("ul").remove(".dropdown-menu"),(m.selectedItem=e).IsSystem?e.IsFolder?[]:[[function(){return'<span class="dropdown-item" style="cursor:pointer;"><i class="doc-tool-icon doc-download-icon"></i>Download</span>'},function(){m.clickRename=!0,c.downloadFile(e)}]]:e.IsFolder?[[function(){return'<span class="dropdown-item" style="color:#cb2027;cursor:pointer"><i class="doc-tool-icon doc-delete-red-icon"></i>Delete</span>'},function(){m.clickRename=!0,g(e)}],[function(){return'<span class="dropdown-item" style="cursor:pointer"><i class="doc-tool-icon doc-edit-icon"></i>Rename</span>'},function(){m.clickRename=!0,w(e)}]]:[[function(){return'<span class="dropdown-item" style="cursor:pointer"><i class="doc-tool-icon doc-download-icon"></i>Download</span>'},function(){m.clickRename=!0,c.downloadFile(e)}],[function(){return'<span class="dropdown-item" style="color:#cb2027;cursor:pointer"><i class="doc-tool-icon doc-delete-red-icon"></i>Delete</span>'},function(){g(e)}],[function(){return'<span class="dropdown-item" style="cursor:pointer"><i class="doc-tool-icon doc-edit-icon"></i>Rename</span>'},function(){m.clickRename=!0,w(e)}]]},m.searchFolders=function(e){F(e)},m.closediv=function(){m.closesidepanel=!0!==m.closesidepanel},m.searchfolder=function(e,o){13===e.keyCode?F(o):e.preventDefault()},m.viewFile=function(e){t.go("client.DocumentsView",{Id:e.Id,cursor:app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",folId:e.ReferenceId,type:"Folder"})},m.uploadattachment=function(e){m.uploadedfile={},m.File={},e=e.target.files,m.entitydefObj={Name:m.grpName,Id:m.refid},m.Url=r.azureStorageRemoteServer+"UploadFile1",e&&n.upload({url:m.Url,data:{file:e},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:f.encrypt({companyId:o.companyId,userName:o.userName,moduleDetailId:f.getSessionItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){var o=e.data;m.isAdd?(m.filesResponse=c.getTilesfilesInAdd(o,m.refid,m.screenType,m.bread_crumb,m.tabName,m.Description,m.addTailsattachments?m.addTailsattachments:[],m.recordId),m.addTailsattachments=m.filesResponse,m.folders=m.addTailsattachments):(m.filesResponse=c.getuploadedfiles(o,m.refid,m.screenType,m.bread_crumb,m.tabName,m.Description,m.folders,m.recordId),m.addmodal("Individual","fileUpload",m.filesResponse))},function(e){d.notify.warning(e.data.Message)})}}function r(e,o,r,d){var a=this;d.getActivities(r.id).then(function(e){a.activitiesData=e.data}),a.cancelModel=function(){e.close()}}function d(r,a,t,l,e,o,d,n,s,i,c,f,u,m,p){var b=this;function h(){b.isNewFolder=!0,b.folders=b.folders?b.folders:[],b.dupfolders=[];for(var e=0;e<b.folders.length;e++)"Active"==b.folders[e].Status&&b.dupfolders.push(b.folders[e]);b.filesResponse=[],b.createobj=f.createFolder(),b.createobj.Description=b.Description}function I(e){b.fileType="FolderUpload";var o,r=e.target.files;0<e.target.files.length&&(b.folderName=e.target.files[0].webkitRelativePath.split("/")[0]),o=f.getFileslist(r);var d=u.getSessionItem("ModuleDetailId");b.Url=t.azureStorageRemoteServer+"UploadFile1",o&&s.upload({url:b.Url,data:{file:o},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:u.encrypt({companyId:a.companyId,userName:a.userName,moduleDetailId:d||u.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){b.filesResponse=e.data,b.filesResponse=f.getfolderfiles(b.filesResponse,b.screenType,b.bread_crumb,b.refid,b.recordId,b.tabName),b.isShowDefault=!1},function(e){b.isShowDefault=!1,b.isHide=!0,l.notify.warning(e.data.Message)})}b.cancelModel=function(){r.close()},b.bread_crumb=p.breadcrumb,b.grpName=p.groupname,b.refid=p.refid,b.folders=p.folders,b.recordId=p.recordId,b.screenType=p.tab,b.tabName=p.tabName,b.SavenewFolder=function(o,e){(o=f.savedFolder(o,e,b.bread_crumb,b.screenType,b.refid,b.recordId)).RecordStatus="Added",""==(o=o).Name?l.notify.warning(o.IsFolder?"Folder name is required":"File Name is required"):(o.Description=b.Description,f.saveFolder(o).then(function(e){o.Id=e.data.Id,o.IsRename=!1,f.is_folder_exist(b.folders,o.Id)||(l.notify.success(o.IsFolder?"Folder Saved Successfully":"File Uploaded Successfully"),r.close(e))},function(e){l.notify.warning(e.data.Message)}))},b.uploadattachment=function(e){if(b.uploadedfile={},b.fileType="fileUpload",b.File={},b.isShowDefault=!1,e=e.target.files,b.entitydefObj={Name:b.grpName,Id:b.refid},b.Url=t.azureStorageRemoteServer+"UploadFile1",e){var o=u.getSessionItem("ModuleDetailId");s.upload({url:b.Url,data:{file:e},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:u.encrypt({companyId:a.companyId,userName:a.userName,moduleDetailId:o||u.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){var o=e.data;b.isAdd?(b.filesResponse=f.getTilesfilesInAdd(o,b.refid,b.screenType,b.bread_crumb,b.tabName,b.Description,b.addTailsattachments?b.addTailsattachments:[],b.recordId),b.addTailsattachments=b.filesResponse,r.close(b.addTailsattachments)):b.filesResponse=f.getuploadedfiles(o,b.refid,b.screenType,b.bread_crumb,b.tabName,b.Description,b.folders,b.recordId)},function(e){b.isShowDefault=!1,b.isHide=!0,l.notify.warning(e.data.Message)})}},b.addnewfolder=h,b.isShowDefault=!0,b.filesResponse=[],b.Description=null,b.filesPicked=I,b.uploadFolderdata=function(){var e=[{Id:"000000000000000000000000",TabName:"Tab"!=b.screenType&&"Tails"!=b.screenType||0!=b.bread_crumb.length?b.bread_crumb[b.bread_crumb.length-1].TabName:b.tabName,Description:b.Description,ReferenceId:"Tab"!=b.screenType&&"Tails"!=b.screenType||0!=b.bread_crumb.length?b.bread_crumb[b.bread_crumb.length-1].Id:null,RecordId:"Tab"==b.screenType&&0==b.bread_crumb.length?b.refid:"Tails"==b.screenType&&0==b.bread_crumb.length?b.recordId:b.bread_crumb[b.bread_crumb.length-1].RecordId,FeatureId:"Tab"!=b.screenType&&"Tails"!=b.screenType||0!=b.bread_crumb.length?b.bread_crumb[b.bread_crumb.length-1].FeatureId:b.refid,Name:b.folderName,CompanyId:null,IsFolder:!0,IsSystem:!1,CreatedBy:null,CreatedDate:"",ModifiedDate:"",RecordName:null,Status:"Active",FileOrfoldersize:null,RecordStatus:"Added",Files:b.filesResponse,IsMyDrive:!1,ModuleName:app_configuration.app_config.current_module.toUpperCase()[0]+app_configuration.app_config.current_module.slice(1)+" Cursor",FolderType:null,Type:"Folder"}];f.folderUpload(e).then(function(e){l.notify.success("Folder Uploaded Successfully."),r.close(e)},function(e){l.notify.warning(e.data.Message)})},b.checkfolderName=function(e){32===e.keyCode&&(b.createobj.Name=b.createobj.Name?b.createobj.Name:e.preventDefault())},b.popuptype=p.Popuptype,b.isAdd=p.isAdd,b.addTailsattachments=p.addTailsattachments,"All"!=p.Popuptype&&("fileUpload"==p.Actiontype?(b.fileType="fileUpload",b.isShowDefault=!1,b.filesResponse=p.Data):"FolderUpload"==p.Actiontype?(b.fileType="FolderUpload",b.isShowDefault=!1,I(p.Data)):"Newupload"==p.Actiontype&&(b.isNewFolder=!0,b.isShowDefault=!1,h())),b.cancelFileandfolder=function(){"All"!=p.Popuptype?r.close():(b.createobj=[],b.isNewFolder=!1,b.isShowDefault=!0,b.filesResponse=[],b.Description=null,b.fileType=null)},b.cancelFile=function(e){b.filesResponse.splice(e,1)},b.saveFiles=function(e){e[0].Description=1==e.length?b.Description:null,f.saveFiles(e).then(function(e){r.close(e),l.notify.success("File Uploaded Successfully.")},function(e){l.notify.warning(e.data.Message)})}}function a(e,o,r,d){this.cancelModel=function(){e.close()}}e.$inject=[],o.$inject=["config","serviceConfig","commonService","$scope","$state","$stateParams","$moment","Upload","$window","$rootScope","doc.sys.context","zStorageEnc","$uibModal"],r.$inject=["$uibModalInstance","config","options","doc.sys.context"],d.$inject=["$uibModalInstance","config","serviceConfig","commonService","$scope","$state","$stateParams","$moment","Upload","$window","$rootScope","doc.sys.context","zStorageEnc","$uibModal","options"],a.$inject=["$uibModalInstance","config","options","doc.sys.context"]}();
!function(){"use strict";function e(u,a,r,p){var l=a.nextboardRemoteServer;return{request_activity:function(e){return e=e?"?id="+e:"?id",u.getEntities(l+"createcommunicator"+e)},save_activity:function(t,e,a,n){if("Modified"!=t.RecardStatus){if(t.UserCreated=t.UserCreated?t.UserCreated:r.userName,t.CommunicatorParticipantModels&&(t.CommunicatorParticipantModels.indexOf(r.userName),t.CommunicatorParticipantModels=e.filter(function(e){if(-1<t.CommunicatorParticipantModels.indexOf(e.UserName))return e.UserAccountId=e.Id,e.RecardStatus="Added"})),0<e.length)for(var i in e)e[i].UserName==r.userName&&(t.UserAccountId=e[i].Id);t.CommunicatorParticipantModels=t.CommunicatorParticipantModels?t.CommunicatorParticipantModels:[],t.ReferenceDocumentModel&&(t.ReferenceDocumentModel=a.filter(function(e){if(-1<t.ReferenceDocumentModel.indexOf(e.Name))return e.RecardStatus="Added"}),t.ReferenceDocumentModel.forEach(function(e){e.ReferenceNumber=e.Name,delete e.Name}))}"Events"==n?(t.DueDate=new Date(t.DueDate),t.DueDate=t.DueDate?p(t.DueDate).format("YYYY-MM-DDTHH:mm:00"):null,t.RemindDate&&(t.RemindDate=new Date(t.RemindDate),t.RemindDate=t.RemindDate?p(t.RemindDate).format("YYYY-MM-DDTHH:mm:00"):null)):(t.RemindDate=t.RemindDate?p(t.RemindDate).format("YYYY-MM-DDT12:00:00"):null,t.DueDate=t.DueDate?p(t.DueDate).format("YYYY-MM-DDT12:00:00"):null);return u.saveEntity(l+"savecommunicator",t)},participants_LU:function(){return u.getEntities(l+"partcipantlu")},set_participants:function(e,t){for(var a="",n=0;n<t.length;n++)a=a+e.filter(function(e){return e.Id==t[n]})[0].Username+",";return a.substring(0,a.length-1)},set_participantsListofJSON:function(e,t){for(var a=[],n=0;n<t.length;n++)a.push(e.filter(function(e){return e.Id==t[n]})[0]);return a},tab_names:function(){return["All","Tasks","Events","Notes"]},get_all_activities:function(e,t,a,n,i){var r=l+"getallcommunicators?$inlinecount=allpages&$take=25&page=1&pageSize=25&moduleName="+t+("All"==e?"&communicatorType":"&communicatorType="+e)+"&relatedType="+(a=a||"")+"&referenceId="+(n=n||""),o=i||r;return u.getEntities(o)},edit_mode_participants:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].UserAccountId);return t},uploaded_files:function(e,t){var a=e||{Id:"",CompanyId:r.companyId,SubscriptionType:null,SubscriptionTypeId:null,SubSubscriptionType:null,SubSubscriptionTypeId:null,FeatureId:null,FeatureName:null,Status:1,DocRepositoryDetails:[]};return t.RecordStatus="Added",t.CssSprite=null,t.Id=t.FileId,t.FileName=t.FileName,t.UserCreated=r.userName,t.FilePath=t.Original,t.DocumentType=t.MediaType,a.DocRepositoryDetails.push(t),a},set_data_foraction:function(e,t){if("completed"==e)t.Status="1";else if("cancelled"==e)t.Status="2";else{if("deleted"==e)return u.getEntities(l+"deletecommunicator?id="+t.Id);"0"==e&&(t.Status="3")}return t},move_direction_of_card:function(e,t,a){var n=i(e,a);{if("forward"==t)return e[n+1];if("back"==t)return e[n-1]}},card_number:i,filter_card:function(e,t){return e.filter(function(e){return e.Id==t.Id})[0]},create_call_for_taskreply:function(){return u.getEntities(l+"createcommunicatorreply?id")},save_call_for_taskreply:function(e){return u.saveEntity(l+"savecommunicatorreply",e)},set_replydata:function(e){var t={Id:"000000000000000000000000"};return t.CommunicatorId=e.Id,t.FromUser=r.userFullName,t.userName=r.userName,t.ReplyDate=new Date,t.Status="Active",t.CommunicatorType=e.CommunicatorType,t.CompanyId=r.companyId,t.Subject=e.Subject,t.RecardStatus="Added",t.ReplyParticipantModels=[],t.ReplyMessage="",t},adding_reply_manually:function(e,t){e.CommunicatorReplyModels.unshift(t),0<t.FileUpload.DocRepositoryDetails.length&&(e.CommunicatorReplyModels[0].DocFilePaths=t.FileUpload.DocRepositoryDetails);return e},checking_validations:function(e,t){if(e.FileUpload&&!e.Id){e.FileUpload.Status="1";for(var a=0;a<e.FileUpload.DocRepositoryDetails.length;a++)e.FileUpload.DocRepositoryDetails[a].RecordStatus||(e.FileUpload.DocRepositoryDetails[a].RecordStatus="Added")}if(e.FileUpload&&e.Id){e.FileUpload.Status="1";for(var a=0;a<e.FileUpload.DocRepositoryDetails.length;a++)e.FileUpload.DocRepositoryDetails[a].RecordStatus||(e.FileUpload.DocRepositoryDetails[a].RecordStatus="Update")}if(e.CommunicatorReplyModels)for(var n=0;n<e.CommunicatorReplyModels.length;n++)if(e.CommunicatorReplyModels[n].FileUpload)for(var i=0;i<e.CommunicatorReplyModels[n].FileUpload.DocRepositoryDetails.length;i++)e.CommunicatorReplyModels[n].FileUpload.DocRepositoryDetails[i].RecordStatus||(e.CommunicatorReplyModels[n].FileUpload.DocRepositoryDetails[i].RecordStatus="Added");if("Tasks"==t){if(e.DueDate&&p(e.DueDate)<p().startOf("day"))return"Due Date must be later than current Date";if(e.RemindDate){if(p(e.RemindDate)<p().startOf("day"))return"Remind me must be later or equal to current date";if(p(e.RemindDate)>p(e.DueDate))return"Date of Remind Me must be earlier than the Due Date"}}if("Events"==t){var r,o,u,l,c=e.DueDate.split(" "),d=c[0],m=c[1],s=d.split("/")[2]+"-"+d.split("/")[1]+"-"+d.split("/")[0];if(c=p(s+"T"+m),e.RemindDate){var f=e.RemindDate.split(" ");r=f[0],o=f[1],l=r.split("/")[2]+"-"+r.split("/")[1]+"-"+r.split("/")[0],u=p(l+"T"+o)}if(c<=p())return"Date & Time must be later to current Date & Time";if(u&&u<p())return"Remind me must be later or equal to current date";if(c<u)return"Date of Remind Me must be earlier than the Date & Time";e.DueDate=s+"T"+m,e.DueDate=moment(e.DueDate).format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"),e.RemindDate&&(e.RemindDate=l+"T"+o,e.RemindDate=moment(e.RemindDate).format("YYYY-MM-DDTHH:mm:ss.SSSS[Z]"))}return e},set_dates:function(e){"Events"==e.CommunicatorType&&(e.DueDate=e.DueDate?p(e.DueDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD/MM/YYYY hh:mm"):null,e.RemindDate=e.RemindDate?p(e.RemindDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD/MM/YYYY hh:mm"):null);"Tasks"==e.CommunicatorType&&(e.DueDate=e.DueDate?new Date(e.DueDate):e.DueDate,e.RemindDate=e.RemindDate?new Date(e.RemindDate):e.RemindDate);return e},delete_file:function(e,t){e[e.indexOf(t)].Id?e[e.indexOf(t)].RecordStatus="Deleted":e.splice(e.indexOf(t),1);return e},delete_reply:function(e){return u.getEntities(l+"deletecommunicator?id="+e)},changeParticipantToName:function(e,t){if("listofcards"==t)for(var a=0;a<e.length;a++)e[a].CommunicatorParticipants&&(e[a].CommunicatorParticipants=e[a].CommunicatorParticipants.split(",").filter(function(e){return e!==r.userName}).join(","));else"detailcard"==t&&e.CommunicatorParticipants&&(e.CommunicatorParticipants=e.CommunicatorParticipants.split(",").filter(function(e){return e!==r.userName}).join(","));return e},getPeopleLookUp:function(){return u.getEntities(l+"partcipantlu")},getScreenNamesLU:function(e){return u.getEntities(a.admincommonRemoteServer+"activityrelatedtolu?modulename="+e+"%20cursor")},getPostReferences:function(e){return u.saveEntity(a.adminDocRemoteServer+"getfolderstructurebyfeature",e)},getNotificationsData:function(e){var t=a.nextboardRemoteServer+"dashboardnotofication?$inlinecount=allpages&$take=25&page=1&pageSize=25&cursorName="+e+"&recordType=All";return u.getEntities(t)},checkrelatedlookup:function(e){{if(!document.getElementById("referenceIdsLU").value)return"Please select Related To from lookup.";var t=document.getElementById("referenceIdsLU").value,a=e,n=0;if(!(0<a.length))return"Please select Related To from lookup.";if(a.filter(function(e){e.Name==t&&n++}),0==n)return"Please select Related To from lookup."}}};function i(e,t){for(var a=0;a<e.length;a++)if(e[a].Id==t.Id)return a}}angular.module("communicatormodule",[]).factory("commmoduleContext",e).directive("datetimepicker1",["$moment",function(o){return{require:"?ngModel",scope:{layout:"=",type:"="},restrict:"AE",link:function(t,a,n,i){function r(){if(""==$(a).find("input").val()&&n.value&&(n.value=new Date(n.value),n.value=o(n.value).format("MM/DD/YYYY HH:mm")),"grid"==t.layout)"Due"==t.type?document.getElementById("datetimepickerss").innerHTML=$(a).find("input").val():document.getElementById("reminddatetimepickers").innerHTML=$(a).find("input").val();else var e=""==$(a).find("input").val()?n.value:$(a).find("input").val();i.$setViewValue(e),i.$render(e)}"string"==typeof n.value&&$(a).find("input").val(n.value),i&&(i.$render=function(){$(a).find("input").val(i.$viewValue||"")},a.datetimepicker({format:"MM/DD/YYYY HH:mm",keepOpen:!1}).data("autoclose",!0),a.on("keyup",function(e){t.$apply(r)}),$(a).on("dp.change",function(e){e.date&&t.$apply(r),(e=$(this).data("DateTimePicker")).hide()}),r())}}}]),e.$inject=["commonService","serviceConfig","config","$moment"]}();
!function(){"use strict";function e(e,i,t,n,o,r,l){return{restrict:"EA",scope:{onFileUploadSuccess:"&",uploadUrl:"="},link:function(a,e,t){a.uploadFile=function(t){if(t){var e=l.getSessionItem("ModuleDetailId");r.upload({url:a.uploadUrl||o.azureStorageRemoteServer+"uploadlogo",data:{file:t},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:l.encrypt({companyId:n.companyId,userName:n.userName,moduleDetailId:e||l.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){a.onFileUploadSuccess({data:e.data,file:t})},function(e){i.notify.warning(e.data.Message)})}}},template:'<div class="k-button k-upload-button" aria-label="Select files..."><i ngf-select="uploadFile($file)"  id="files" class="fa fa-paperclip  fa-lg"></i></div>'}}function t(s,u,d,m,f,p,v,e,t){return{restrict:"EA",scope:{moduleName:"=",screenName:"@?",referenceId:"@?",isView:"=?",isHideRelatedto:"=?",isScroll:"=?"},link:function(o,e,t){o.imageUrl=f.azureStorageRemoteServer+"UploadFile1",o.tabClickHandler=function(e){for(var t in o.activityTabs)o.activityTabs[t]=t===e;r()},o.selectedTab="All",o.tabs=s.tab_names(),o.saveData={},o.getCardDetails=c,o.get_activitiesby_name=function(e){e!=o.selectedTab&&(o.selectedTab=e,r())},o.actions_on_card=function(t,a){"deleted"==t?u.confirmationDialog("Confirm Delete ?","Are you sure do you really want to Delete ?","Ok","Cancel").then(function(e){"ok"==e&&s.set_data_foraction(t,a).then(function(e){u.notify.success("Deleted successfully"),r()},function(e){u.notify.warning(e.data.Message)})}):(a=s.set_data_foraction(t,a),s.save_activity(a,a.CommunicatorType,o.moduleName).then(function(e){r(e.data)},function(e){u.notify.warning(e.data.Message)}))},o.moving_cards_forward_back=function(e,t){c(s.move_direction_of_card(o.get_all_activities,e,t)),o.active_card=s.card_number(o.get_all_activities,o.requestedData)},o.save_reply=function(){o.reply_data.ModuleName=o.moduleName,o.reply_data.CursorIcon="Client"==o.moduleName?"client-cursor":"Workflow"==o.moduleName?"workflow-cursor":"Bean"==o.moduleName?"bean-cursor":"hr"==o.moduleName?"hr-cursor":"",o.reply_data.NotificationUrl="Client"==o.moduleName?"client/clientcurser/activities/all":"Workflow"==o.moduleName?"workflow/workflow/activitymodule":"hr"==o.moduleName?"hr/activities":"Bean"==o.moduleName?"bean/activitymodule":"",s.save_call_for_taskreply(o.reply_data).then(function(e){u.notify.success("Replied successfully"),a("afterreply")},function(e){u.notify.warning(e.Message)})},o.showLoader=!1,o.username=m.userName,o.userfullname=m.userFullName,o.format=m.dateFormat,o.saveActivity=function(e,a){if(o.validation_message=null,d.validate("mainCommunicator").isValidationRequired)return o.validation_message="Invalid Data,Please Verify!",void window.scrollTo(0,0);if("Events"==o.selectedTab){if(!document.getElementById("datetimepickerss").innerText)return o.validation_message="Due date should be required!",void window.scrollTo(0,0);e.DueDate=document.getElementById("datetimepickerss").innerText,e.RemindDate=document.getElementById("reminddatetimepickers").innerText}if(new Date(e.DueDate)<(new Date).setHours(0,0,0,0))return o.validation_message="Due date must be greater than current date.";if(e.RemindDate){if(new Date(e.RemindDate)<(new Date).setHours(0,0,0,0))return o.validation_message="Remind me must be greater than current date.";if(e.DueDate&&new Date(e.RemindDate).setHours(0,0,0,0)>new Date(e.DueDate).setHours(0,0,0,0))return o.validation_message="Remind me date must be less than or Equal to due date."}if(e.ScreenName&&0==e.ReferenceDocumentModel.length)return o.validation_message="Please select Related To from Lookup.";if(o.saveActivityResult=e,o.saveActivityResult.Id=null,o.saveActivityResult.FullName=o.userfullname,o.saveActivityResult.CommunicatorType=o.selectedTab,o.saveActivityResult.ModuleName=o.moduleName,o.saveActivityResult.companyId=m.companyId,o.saveActivityResult.Status=a,o.saveActivityResult.ScreenName=o.screenNametab?o.screenNametab:e.ScreenName,o.screenNametab)for(var t in o.referenceIdLU)o.referenceId==o.referenceIdLU[t].Id&&(o.saveActivityResult.ReferenceDocumentModel=[],o.saveActivityResult.ReferenceDocumentModel.push(o.referenceIdLU[t].Name));o.saveActivityResult.CursorIcon="Client"==o.moduleName?"client-cursor":"Workflow"==o.moduleName?"workflow-cursor":"Bean"==o.moduleName?"bean-cursor":"hr"==o.moduleName?"hr-cursor":"",o.saveActivityResult.NotificationUrl="Client"==o.moduleName?"client/clientcurser/activities/all":"Workflow"==o.moduleName?"workflow/workflow/activitymodule":"hr"==o.moduleName?"hr/activities":"Bean"==o.moduleName?"bean/activitymodule":"",o.saveActivityResult.FileUpload=o.getFileUpload.FileUpload,o.saveActivityResult.Color="Tasks"==o.selectedTab?"task-left-border":"Notes"==o.selectedTab?"note-left-border":"Events"==o.selectedTab?"event-left-border":null,o.saveActivityResult.Icon="Tasks"==o.selectedTab?"fa fa-tasks fa-lg":"Notes"==o.selectedTab?"fa fa-book fa-lg":"Events"==o.selectedTab?"fa fa-calendar fa-lg":null;var i=angular.copy(o.saveActivityResult.RemindDate),n=angular.copy(o.saveActivityResult.DueDate);s.save_activity(o.saveActivityResult,o.PeopleLookUpData1,o.referenceIdLU,o.selectedTab).then(function(e){var t=[];o.saveActivityResult.CommunicatorParticipantModels.forEach(function(e){t.push(e.UserName)}),u.notify.success(o.selectedTab.slice(0,-1)+" "+a+" successfully"),o.getFileUpload.FileUpload=null,o.saveData=null,"Events"==o.selectedTab&&(document.getElementById("datetimepickerss").innerText="",document.getElementById("reminddatetimepickers").innerText=""),o.selectedTab=e.data.CommunicatorType,l(),r()},function(e){o.saveActivityResult.RemindDate=i,o.saveActivityResult.DueDate=n,u.notify.warning(e.data.Message)})},o.cancel=l,o.showAddPeople=!1,o.showRelated=!1,o.showAttachment=!1,o.isScroll||window.scrollTo(0,0);function r(e){d.hideMessages("mainCommunicator"),o.busy=!1,s.get_all_activities(o.selectedTab,o.moduleName,o.screenName,o.referenceId).then(function(e){o.get_all_activities=e.data.Items,o.Nextpagelink=e.data.NextPageLink,function(){var e=app_configuration.app_config.current_module+" cursor";s.getNotificationsData(e).then(function(e){o.notificationdetails=e.data.Items})}(),o.saveData={}}),s.getPeopleLookUp().then(function(e){o.PeopleLookUpData1=e.data,o.PeopleLookUpData=e.data.filter(function(e){return e.UserName!=m.userName})}),o.isHideRelatedto||s.getScreenNamesLU(o.moduleName).then(function(e){o.ScreenNameLUData=e.data,o.screenNametab&&n(o.screenNametab)})}function l(){d.hideMessages("mainCommunicator"),o.validation_message=null,o.saveData=null,o.showAddPeople=!1,o.showRelated=!1,o.getFileUpload.FileUpload=null,o.showAttachment=!1,"Events"==o.selectedTab&&(document.getElementById("datetimepickerss").innerText="",document.getElementById("reminddatetimepickers").innerText="")}function i(e,t){o.replyMessage1=[],o.replyPeopleLookUp=null,o.reply_data=null,e?(o.showComment[e]=!1,o.editComment[e]=!1,o.editComment1[t]=!1):(o.showComment=[],o.editComment=[],o.editComment1=[])}function a(t){s.create_call_for_taskreply().then(function(e){o.reply_data=s.set_replydata(e.data,o.requestedData),t&&r(o.requestedData)})}function n(e){var t=o.screenNametab?o.screenNametab:o.saveData.ScreenName;t||(o.referenceIdLU=[]);var a=o.ScreenNameLUData.filter(function(e){if(e.Name.toLowerCase()===t.toLowerCase())return e});(a=a[0]).CompanyId=m.companyId,a.ModuleName=o.moduleName,a.Status="Active",s.getPostReferences(a).then(function(e){for(var t in o.referenceIdLU=e.data,o.referenceIdLU)o.referenceIdLU[t].ReferenceId=o.referenceIdLU[t].Id})}function c(e){s.request_activity(e.Id).then(function(e){o.requestedData=e.data,"Events"==o.requestedData.CommunicatorType&&(o.requestedData.DueDate=o.requestedData.DueDate?p(o.requestedData.DueDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD/MM/YYYY hh:mm"):null,o.requestedData.RemindDate=o.requestedData.RemindDate?p(o.requestedData.RemindDate,"YYYY-MM-DDTHH:mm:ss.SSSS[Z]").format("DD/MM/YYYY hh:mm"):null),o.requestedData=s.changeParticipantToName(o.requestedData,"detailcard"),o.active_card=s.card_number(o.get_all_activities,o.requestedData),"Tasks"==o.requestedData.CommunicatorType&&create_call_for_taskreply()})}o.showComment=[],o.editComment=[],o.editComment1=[],o.ReplyParticipantModels=[],o.replyBox=function(e,t){o.showComment[t]=!0,o.replyPeopleLookUp=o.PeopleLookUpData,o.existingParticipants=o.get_all_activities[0].CommunicatorParticipantModels.map(function(e){return e.UserName}),o.replyPeopleLookUp=o.replyPeopleLookUp.filter(function(e){if(o.existingParticipants.indexOf(e.UserName)<0)return!0}),o.reply_data=s.set_replydata(e)},o.postReply=function(e,t){if(!o.reply_data.ReplyMessage)return void u.notify.warning("Please enter any text");o.showComment[e]=!1,o.reply_data.ReplyParticipantModels=o.PeopleLookUpData1.filter(function(e){if(-1<t.indexOf(e.UserName))return e.RecardStatus="Added"}),o.reply_data.ReplyParticipantModels.forEach(function(e){e.UserAccountId=e.Id,delete e.Id}),o.reply_data.ModuleName=o.moduleName,o.reply_data.CursorIcon="Client"==o.moduleName?"client-cursor":"Workflow"==o.moduleName?"workflow-cursor":"Bean"==o.moduleName?"bean-cursor":"hr"==o.moduleName?"hr-cursor":"",o.reply_data.NotificationUrl="Client"==o.moduleName?"client/clientcurser/activities/all":"Workflow"==o.moduleName?"workflow/workflow/activitymodule":"hr"==o.moduleName?"hr/activities":"Bean"==o.moduleName?"bean/activitymodule":"",s.save_call_for_taskreply(o.reply_data).then(function(e){u.notify.success("Replied successfully"),o.reply_data=null,o.replyPeopleLookUp=null,a("afterreply")},function(e){u.notify.warning(e.Message)})},o.cancelReply=i,o.loadReferenceId=n,o.showAddPeople1=function(e){"addPeople"==e?o.showAddPeople=!o.showAddPeople:"relate"==e?o.showRelated=!o.showRelated:"attach"==e&&(o.showAttachment=!o.showAttachment)},o.editReply=function(e,t,a){o.editComment[t]=!0,o.editComment1[a]=!0,o.replyMessage1[t]=e.ReplyMessage},o.replyMessage=null,o.deleteMsg=function(t,a,e){e="Tasks"==e?"task":"Events"==e?"event":"note",u.confirmationDialog("Confirm Delete ?","Are you sure do you really want to Delete Reply "+e+"?","Ok","Cancel").then(function(e){"ok"==e&&s.delete_reply(t).then(function(e){u.notify.success("Deleted successfully"),i(a),r()},function(e){u.notify.success(e.data.Message)})})},o.open_EditModel=function(e){v.open({templateUrl:"activities.html",controller:"activityInstance",controllerAs:"vm",size:"md",resolve:{communicator_activity:function(){return{module_name:o.moduleName,activityObj:e,userName:m.userName,referenceId:o.referenceId}}}}).result.then(function(e){r()})},o.getFileUpload={FileUpload:null},o.saveEditReply=function(e,t,a){o.editComment[e]=!1,o.editComment1[t]=!1,a.ReplyMessage=o.replyMessage1[e],o.replyMessage1=[],a.RecardStatus="Modified",a.ModuleName=o.moduleName,a.CursorIcon="Client"==o.moduleName?"client-cursor":"Workflow"==o.moduleName?"workflow-cursor":"Bean"==o.moduleName?"bean-cursor":"hr"==o.moduleName?"hr-cursor":"",a.NotificationUrl="Client"==o.moduleName?"client/clientcurser/activities/all":"Workflow"==o.moduleName?"workflow/workflow/activitymodule":"hr"==o.moduleName?"hr/activities":"Bean"==o.moduleName?"bean/activitymodule":"",s.save_call_for_taskreply(a).then(function(e){u.notify.success("Replied successfully")},function(e){u.notify.warning(e.Message)})},o.nextPage=function(){if(!o.get_all_activities)return;if(o.get_all_activities.length<10)return;if(o.busy)return;if(o.busy=!0,o.lastId==o.get_all_activities[o.get_all_activities.length-1].Id)return;o.lastId=0<o.get_all_activities.length?o.get_all_activities[o.get_all_activities.length-1].Id:"",s.get_all_activities(o.selectedTab,o.moduleName,o.screenName,o.referenceId,o.Nextpagelink).then(function(e){var t=e.data.Items;if(o.Nextpagelink=e.data.NextPageLink,o.get_all_activities.length!=e.data.Count)for(var a in t)o.get_all_activities.push(t[a]);o.busy=!1})},o.peopleiconshow=function(e){{if(1==e.length)return e[0].UserName!=m.userName;if(1<e.length)return!0}},o.screenNametab=o.screenName?"Lead"==o.screenName?"Leads":"Account"==o.screenName?"Accounts":o.screenName:o.screenName,o.isRelatedto=!!o.screenName,r(),o.checklookup=function(){if(o.saveData.ScreenName){o.validation_message,o.relatedlookup=!1;var e=s.checkrelatedlookup(o.referenceIdLU);if(e)return o.validation_message="Please select Related To from lookup.",void window.scrollTo(0,0);o.validation_message=null}else o.validation_message=null},o.open_model=function(e){o.saveData=null,o.get_all_activities=null,o.getFileUpload.FileUpload=null,l(),i(),o.selectedTab=e,"Events"==o.selectedTab&&(document.getElementById("datetimepickerss").innerText="",document.getElementById("reminddatetimepickers").innerText=""),r()},o.replyMessage1=[],o.deleteReply=function(t,e){u.confirmationDialog("Confirm Delete ?","Are you sure do you really want to Delete Reply?","Ok","Cancel").then(function(e){"ok"==e&&(t.RecardStatus="Deleted",t.Status=1,t.ModuleName=o.moduleName,t.CursorIcon="Client"==o.moduleName?"client-cursor":"Workflow"==o.moduleName?"workflow-cursor":"Bean"==o.moduleName?"bean-cursor":"hr"==o.moduleName?"hr-cursor":"",t.NotificationUrl="Client"==o.moduleName?"client/clientcurser/activities/all":"Workflow"==o.moduleName?"workflow/workflow/activitymodule":"hr"==o.moduleName?"hr/activities":"Bean"==o.moduleName?"bean/activitymodule":"",s.save_call_for_taskreply(t).then(function(e){u.notify.success("Deleted successfully"),r()},function(e){u.notify.warning(e.data.Message)}))})},o.filesData=function(e){e&&(o.getFileUpload.FileUpload=s.uploaded_files(o.getFileUpload.FileUpload,e[0]))},o.deletefile=function(e){o.getFileUpload.FileUpload.DocRepositoryDetails=s.delete_file(o.getFileUpload.FileUpload.DocRepositoryDetails,e)},o.dateplaceholder1=m.dateFormat,o.datatime1=m.dateFormat+" HH:mm",o.format=m.dateFormat,o.datePicker={dueDateOpen:!1,remindmeOpen:!1},o.dateOptions={format:m.dateFormat},$(".datetimepicker5").datetimepicker({autoclose:!0}),$("#datetimepicker4").datetimepicker({autoclose:!0}),o.open=function(e,t){e.preventDefault(),o.datePicker[t]=!o.datePicker[t]},o.participantForCommunicator={change:function(){o.reply_data.CommunicatorReplyParticipents=s.set_participants(o.participantsLU,o.reply_data.participantModel),o.reply_data.CommunicatorReplyParticipentModels=s.set_participantsListofJSON(o.participantsLU,o.reply_data.participantModel)}},o.addMoreItems=function(){Array.isArray(o.get_all_activities)||(o.get_all_activities=[]),o.showLoader||o.get_all_activities.length<20||(o.showLoader=!0,s.get_data_by_scrolling(o.get_all_activities,o.selectedTab,o.moduleName).then(function(e){o.get_all_activities=0<e.data.length?o.get_all_activities.concat(e.data):o.get_all_activities,o.showLoader=!1}))}},templateUrl:"CustomDirectives/activities/communicatorNewVersion.html"}}function a(e,t,m,f,a,i,n,o,r){var p=this;function v(){e&&m.participants_LU().then(function(e){p.updateActivityObj&&(p.existingUsers=angular.copy(p.updateActivityObj.CommunicatorParticipantModels),p.existingParticipants=p.updateActivityObj.CommunicatorParticipantModels.map(function(e){if(e.UserName!=p.userName1)return e.UserName}),p.referenceIdLU=p.updateActivityObj.ReferenceDocumentModel,m.getScreenNamesLU(p.updateActivityObj.ModuleName).then(function(e){p.ScreenNameLUData=e.data,p.updateActivityObj.ScreenName&&l(p.updateActivityObj)})),p.participantsLU=e.data.filter(function(e){if(e.UserName!=p.userName1)return e.UserName})})}function l(e){if(!p.updateActivityObj.ScreenName)return p.ReferenceDocumentModel=[],void(p.referenceIdLU=[]);var t=p.ScreenNameLUData.filter(function(e){if(e.Name.toLowerCase()===p.updateActivityObj.ScreenName.toLowerCase())return e});(t=t[0]).CompanyId=i.companyId,t.ModuleName=p.updateActivityObj.ModuleName,t.Status="Active",m.getPostReferences(t).then(function(e){for(var t in p.referenceIdLU=e.data,p.referenceIdLU)p.referenceIdLU[t].ReferenceId=p.referenceIdLU[t].Id;for(var t in p.ReferenceDocumentModel=[],p.updateActivityObj.ReferenceDocumentModel)p.ReferenceDocumentModel.push(p.updateActivityObj.ReferenceDocumentModel[t].ReferenceNumber);p.dupReferenceDocumentModel=angular.copy(p.ReferenceDocumentModel)})}function y(){r.close()}p.updateActivityObj=angular.copy(e.activityObj),p.referenceId=e.referenceId,p.activityName=p.updateActivityObj.CommunicatorType,p.userName1=e.userName,"Events"!=p.activityName&&(p.updateActivityObj.RemindDate=p.updateActivityObj.RemindDate?new Date(p.updateActivityObj.RemindDate):p.updateActivityObj.RemindDate,p.updateActivityObj.DueDate=p.updateActivityObj.DueDate?new Date(p.updateActivityObj.DueDate):p.updateActivityObj.DueDate),p.cancel=y,p.saveActivity=function(e,t){if(e.DueDate&&new Date(e.DueDate)<(new Date).setHours(0,0,0,0))return f.notify.warning("Due date must be greater than current date.");if(e.RemindDate){if(new Date(e.RemindDate)<(new Date).setHours(0,0,0,0))return f.notify.warning("Remind me must be greater than current date.");if(e.DueDate&&new Date(e.RemindDate).setHours(0,0,0,0)>new Date(e.DueDate).setHours(0,0,0,0))return f.notify.warning("Remind me date must be less than or Equal to due date.")}if("Events"==p.activityName&&!e.DueDate)return f.notify.warning("Due date should be required.");if(e.ScreenName&&(p.ReferenceDocumentModel?p.ReferenceDocumentModel.length<1:p.ReferenceDocumentModel))return f.notify.warning("Please select Related To from Lookup.");p.updateActivityObj=e,p.updateActivityObj.RecardStatus=t;var a=p.updateActivityObj.CommunicatorParticipantModels.filter(function(t){return t.RecardStatus="Added",t.UserAccountId=t.Id,!p.existingUsers.some(function(e){return t.UserName==e.UserName})}),i=p.existingUsers.filter(function(t){return t.RecardStatus="Deleted",!p.updateActivityObj.CommunicatorParticipantModels.some(function(e){return t.UserName==e.UserName})});i=i.filter(function(e){return e.UserName!=p.userName1});var n=p.updateActivityObj.ReferenceDocumentModel.filter(function(t){return t.RecardStatus="Deleted",p.ReferenceDocumentModel?!p.ReferenceDocumentModel.some(function(e){return t.ReferenceNumber==e}):t}),o=[];for(var r in p.ReferenceDocumentModel){var l=0;for(var c in p.dupReferenceDocumentModel)p.ReferenceDocumentModel[r]==p.dupReferenceDocumentModel[c]&&(l+=1);0==l&&o.push(p.ReferenceDocumentModel[r])}var s=[];for(var u in o)for(var d in p.referenceIdLU)p.referenceIdLU[d].Name==o[u]&&(p.referenceIdLU[d].ReferenceNumber=p.referenceIdLU[d].Name,p.referenceIdLU[d].RecardStatus="Added",s.push(p.referenceIdLU[d]));p.updateActivityObj.CursorIcon="Client"==p.updateActivityObj.ModuleName?"client-cursor":"Workflow"==p.updateActivityObj.ModuleName?"workflow-cursor":"Bean"==p.updateActivityObj.ModuleName?"bean-cursor":"hr"==p.updateActivityObj.ModuleName?"hr-cursor":"",p.updateActivityObj.NotificationUrl="Client"==p.updateActivityObj.ModuleName?"client/clientcurser/activities/all":"Workflow"==p.updateActivityObj.ModuleName?"workflow/workflow/activitymodule":"hr"==p.updateActivityObj.ModuleName?"hr/activities":"Bean"==p.updateActivityObj.ModuleName?"bean/activitymodule":"",p.updateActivityObj.ReferenceDocumentModel=s.concat(n),p.updateActivityObj.CommunicatorParticipantModels=a.concat(i),m.save_activity(p.updateActivityObj,p.PeopleLookUpData1,p.PeopleLookUpData1,p.activityName).then(function(e){f.notify.success(p.updateActivityObj.CommunicatorType.slice(0,-1)+" "+t+" successfully"),p.updateActivityObj=null,y(),v()},function(e){f.notify.warning(e.data.Message)})},p.imageUrl=n.azureStorageRemoteServer+"UploadFile1",p.selectedParicipant=function(){p.updateActivityObj.CommunicatorParticipantModels=m.set_participantsListofJSON(p.participantsLU,p.participantModel)},p.loadReferenceId=l,v(),p.checklookup=function(){p.updateActivityObj.ScreenName&&(m.checkrelatedlookup(p.referenceIdLU)&&f.notify.warning("Please select Related To from lookup."))},p.dateplaceholder1=i.dateFormat,p.datatime1=i.dateFormat+" HH:mm",p.format=i.dateFormat,p.datePicker={dueDateOpen:!1,remindmeOpen:!1},p.dateOptions={format:i.dateFormat},p.open=function(e,t){e.preventDefault(),p.datePicker[t]=!p.datePicker[t]},p.changed=function(e){p.updateActivityObj.CommunicatorParticipantModels=e.sender.dataItems()},p.filesData=function(e){e&&(p.updateActivityObj.FileUpload=m.uploaded_files(p.updateActivityObj.FileUpload,e[0]))},p.deletefile=function(e){p.updateActivityObj.FileUpload.DocRepositoryDetails=m.delete_file(p.updateActivityObj.FileUpload.DocRepositoryDetails,e)}}angular.module("communicatormodule").directive("communicatorModule",t).directive("fileUpload",e).controller("activityInstance",a).filter("timeago","$moment",[function(e){return function(e){var t=moment.utc(e).local().format("YYYY-MM-DD HH:mm:ss");return moment(t,"YYYY-MM-DD HH:mm:ss").fromNow()}}]).filter("communicatorsearch",[function(){return function(e,t){return t&&e?e.filter(function(e){return!(!e.UserCreated.toLowerCase().includes(t.toString().toLowerCase())&&!e.Subject.toLowerCase().includes(t.toLowerCase()))||(e.CommunicatorParticipants?e.CommunicatorParticipants.toLowerCase().includes(t.toLowerCase()):void 0)}):e}}]),e.$inject=["commmoduleContext","commonService","formValidate","config","serviceConfig","Upload","zStorageEnc"],t.$inject=["commmoduleContext","commonService","formValidate","config","serviceConfig","$moment","$uibModal","$state","SignalRConn"],a.$inject=["communicator_activity","$scope","commmoduleContext","commonService","formValidate","config","serviceConfig","$moment","$uibModalInstance"]}();
!function(){"use strict";function e(e,c,t,o){return{getByIdservice:function(){var e=o.userAccountRemoteServer+"UserAccount";return c.getEntities(e)},saveservice:function(e,t,r){var n=o.admincommonRemoteServer+"SaveUserAccount";return c.saveEntity(n,e,t,r)}}}angular.module("appsworld").factory("editprofileFactory",e),e.$inject=["$http","commonService","config","serviceConfig"]}();
!function(){"use strict";function e(e,o,t,a,r,i,n,l,d,s,c,m,u,p){var g=this;t.CompanyId;window.scrollTo(0,0),g.addressType="single",g.title="Address",g.imgUrl="images/userprofile.png",document.getElementById("img").innerHTML='<img src="'+g.imgUrl+'" alt="sa" />',g.save=function(){r.$broadcast("checkAddrBook"),g.validationMessages=[];g.isValidationRequired=!1,i.validate("form1").isValidationRequired||r.isCommunicationValidationRequired||r.isPostValRequired?(g.validationMessages.push({validationText:"Invalid data, Please Verify !"}),g.isValidationRequired=!0,window.scrollTo(0,0)):(g.isFileUploaded?g.editprofileobj.PhotoId=g.mediaRepoId:g.editprofileobj.PhotoId=g.editprofileobj.PhotoId,"new"!=l.id&&(g.editprofileobj.ModifiedDate=new Date,g.editprofileobj.ModifiedBy=t.condoUser),g.editprofileobj.SalutationLU="",g.editprofileobj.CommunicationTypeLU="",e.saveservice(g.editprofileobj,g.dupPhotoId!=g.editprofileobj.PhotoId?n.current.data.pageTitle:null,g.dupPhotoId!=g.editprofileobj.PhotoId?"Photo":null).success(function(e){d.notify.success("Saved Successfully");var o=p.getCookie("company_details");(o=JSON.parse(o)).userImage=g.imgUrl;var i={};i.Medium=e.MediaRepository.Medium,r.$broadcast("refresh_userImage",{data:i});var t=window.location.host.split(":")[0];p.setCookie("company_details",o,"/",t);var a=r.prevUrlParam;n.go(r.prevUrl,a)}).error(function(e){g.validationMessages.push({validationText:e}),g.isValidationRequired=!0,window.scrollTo(0,0)}))},g.cancelbtn=function(){window.history.back()},g.adId=l.id,g.onTFChange=function(e){window.location.href=e?app_configuration.app_config.identity_config.authority+"account/login?returnUrl=/manage/EnableAuthenticator":app_configuration.app_config.identity_config.authority+"account/login?returnUrl=/manage/Disable2faWarning"},g.isTFA="true"==t.TwoFactorEnabled,l.id,e.getByIdservice().then(function(e){return g.editprofileobj=e.data,g.salutetypes=e.data.SalutationLU.Lookups,g.jsonString=g.editprofileobj.Communication,r.$broadcast("setCommunication"),g.imgUrl=g.editprofileobj.Small,g.dupPhotoId=angular.copy(e.data.PhotoId),g.editprofileobj.Small&&(document.getElementById("img").innerHTML='<img src="'+g.imgUrl+'" alt="sa" />'),g.AddrObj={FirstName:g.editprofileobj.FirstName,Username:g.editprofileobj.Username,PhotoId:g.editprofileobj.PhotoId,Status:!1,Small:g.editprofileobj.Small,Addresses:g.editprofileobj.Addresses,Communication:g.editprofileobj.Communication,Phone:g.editprofileobj.Phone,Website:g.editprofileobj.Website},e.data}),c.myImage="",c.myCroppedImage="";angular.element(document.querySelector("#fileInput")).on("change",function(e){"image/gif"==e.currentTarget.files[0].type||"image/jpeg"===e.currentTarget.files[0].type||"image/png"===e.currentTarget.files[0].type?u.open({templateUrl:"cropimg.html",controller:"cropImgCtrl",backdrop:"static",resolve:{options:function(){return e}}}).result.then(function(e){c.upload(e.url,e.name)}):d.notify.warning("file format should be in JPEG/PNG/GIF")}),c.upload=function(e,o){var i=p.getSessionItem("ModuleDetailId");m.upload({url:a.azureStorageRemoteServer+"UploadLogo",data:{file:m.dataUrltoBlob(e,o)},headers:{Authorization:"Bearer "+mgr.access_token,AuthInformation:p.encrypt({companyId:t.companyId,userName:t.userName,moduleDetailId:i||p.getItem("ModuleDetailId"),Values:{PermissionName:"View"}})}}).then(function(e){c.myImage="",c.myCroppedImage="",document.querySelector("#fileInput").value="",function(e){$("#invalid").removeClass("show"),$("#invalid").addClass("hide"),g.isFileUploaded=!0,g.imgUrl=e.data.Small,g.mediaRepoId=e.data.Id,g.editprofileobj.PhotoId=g.mediaRepoId,g.editprofileobj.Small=g.imgUrl,g.editprofileobj.Original=g.imgUrl,g.editprofileobj.Medium=g.imgUrl,g.editprofileobj.Large=g.imgUrl,document.getElementById("img").innerHTML='<img src="'+g.imgUrl+'" alt="sa" />'}(e)})},$("#invalid").addClass("hide"),$("#upload").kendoUpload({async:{saveUrl:a.azureStorageRemoteServer+"UploadLogo",removeUrl:a.azureStorageRemoteServer+"deletelogo",autoUpload:!0},select:function(t){$.each(t.files,function(e,o){var i=o.extension.toUpperCase();".JPG"!=i&&".PNG"!=i&&".JPG"!=i&&(g.isUnsuportedFile=!0,$("#invalid").addClass("show"),t.preventDefault())})},success:function(e){$("#invalid").removeClass("show"),$("#invalid").addClass("hide"),g.isFileUploaded=!0,g.imgUrl=e.response.Small,g.mediaRepoId=e.response.Id,r.$broadcast("refresh_userImage",{data:e.response}),g.editprofileobj.PhotoId=g.mediaRepoId,g.editprofileobj.Small=g.imgUrl,g.editprofileobj.Original=g.imgUrl,g.editprofileobj.Medium=g.imgUrl,g.editprofileobj.Large=g.imgUrl,document.getElementById("img").innerHTML='<img src="'+g.imgUrl+'" alt="sa" />'}}),$(".k-upload-button span").text("Upload photo")}function o(t,a,e){var o,i;a.Remarks=e,a.myImage="",a.myCroppedImage="",o=e.currentTarget.files[0],i=new FileReader,a.imageName=o.name,i.onload=function(o){a.$apply(function(e){e.myImage=o.target.result})},i.readAsDataURL(o),a.save=function(e,o){var i={url:e,name:a.imageName};t.close(i)},a.close=function(){t.dismiss()}}function i(e,o,i){var t=this;t.onTFChange=function(e){window.location.href=e?app_configuration.app_config.identity_config.authority+"account/login?returnUrl=/manage/EnableAuthenticator":app_configuration.app_config.identity_config.authority+"account/login?returnUrl=/manage/Disable2faWarning"},t.TFClass=function(e){return mgr?null!=mgr.profile.TwoFactorEnabled?"true"==mgr.profile.TwoFactorEnabled&&e?"active":!e&&"true"==mgr.profile.TwoFactorEnabled||e&&"false"==mgr.profile.TwoFactorEnabled?"notActive":"active":e?"notActive":"active":"notActive"},t.navigateto=function(e){o.go(e)},t.TwoFactorEnabled="true"==i.TwoFactorEnabled,t.checkRole=function(e){return i.role===e}}angular.module("appsworld").controller("editprofileController",e).controller("cropImgCtrl",o).controller("myAccountCtrl",i),e.$inject=["editprofileFactory","$cookies","config","serviceConfig","$rootScope","formValidate","$state","$stateParams","commonService","customValidations","$scope","Upload","$uibModal","zStorageEnc"],o.$inject=["$uibModalInstance","$scope","options"],i.$inject=["commonService","$state","config"]}();